{"version":3,"sources":["webpack://ionSdk/webpack/universalModuleDefinition","webpack://ionSdk/webpack/bootstrap","webpack://ionSdk/./node_modules/@babel/runtime/regenerator/index.js","webpack://ionSdk/./node_modules/@babel/runtime/helpers/asyncToGenerator.js","webpack://ionSdk/./node_modules/@babel/runtime/helpers/classCallCheck.js","webpack://ionSdk/./node_modules/@babel/runtime/helpers/createClass.js","webpack://ionSdk/./node_modules/sdp/sdp.js","webpack://ionSdk/./node_modules/@babel/runtime/helpers/getPrototypeOf.js","webpack://ionSdk/./node_modules/@babel/runtime/helpers/slicedToArray.js","webpack://ionSdk/./node_modules/events/events.js","webpack://ionSdk/./node_modules/@babel/runtime/helpers/typeof.js","webpack://ionSdk/./node_modules/protoo-client/lib/Logger.js","webpack://ionSdk/./node_modules/@babel/runtime/helpers/defineProperty.js","webpack://ionSdk/./node_modules/@babel/runtime/helpers/inherits.js","webpack://ionSdk/./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","webpack://ionSdk/./node_modules/protoo-client/lib/index.js","webpack://ionSdk/./node_modules/sdp-transform/lib/index.js","webpack://ionSdk/./node_modules/@babel/runtime/helpers/toPropertyKey.js","webpack://ionSdk/./node_modules/protoo-client/lib/EnhancedEventEmitter.js","webpack://ionSdk/./node_modules/protoo-client/lib/Message.js","webpack://ionSdk/./node_modules/sdp-transform/lib/grammar.js","webpack://ionSdk/./node_modules/@babel/runtime/helpers/toPrimitive.js","webpack://ionSdk/./node_modules/@babel/runtime/helpers/arrayWithHoles.js","webpack://ionSdk/./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","webpack://ionSdk/./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","webpack://ionSdk/./node_modules/@babel/runtime/helpers/arrayLikeToArray.js","webpack://ionSdk/./node_modules/@babel/runtime/helpers/nonIterableRest.js","webpack://ionSdk/./node_modules/@babel/runtime/helpers/setPrototypeOf.js","webpack://ionSdk/./node_modules/@babel/runtime/helpers/assertThisInitialized.js","webpack://ionSdk/./node_modules/@babel/runtime/helpers/regeneratorRuntime.js","webpack://ionSdk/./node_modules/protoo-client/lib/Peer.js","webpack://ionSdk/./node_modules/debug/src/browser.js","webpack://ionSdk/./node_modules/process/browser.js","webpack://ionSdk/./node_modules/debug/src/common.js","webpack://ionSdk/./node_modules/ms/index.js","webpack://ionSdk/./node_modules/protoo-client/lib/utils.js","webpack://ionSdk/./node_modules/protoo-client/lib/transports/WebSocketTransport.js","webpack://ionSdk/./node_modules/websocket/lib/browser.js","webpack://ionSdk/./node_modules/es5-ext/global.js","webpack://ionSdk/./node_modules/websocket/lib/version.js","webpack://ionSdk/./node_modules/retry/index.js","webpack://ionSdk/./node_modules/retry/lib/retry.js","webpack://ionSdk/./node_modules/retry/lib/retry_operation.js","webpack://ionSdk/./node_modules/uuid/v4.js","webpack://ionSdk/./node_modules/uuid/lib/rng-browser.js","webpack://ionSdk/./node_modules/uuid/lib/bytesToUuid.js","webpack://ionSdk/./node_modules/sdp-transform/lib/parser.js","webpack://ionSdk/./node_modules/sdp-transform/lib/writer.js","webpack://ionSdk/./src/VideoElement.js","webpack://ionSdk/./node_modules/webrtc-adapter/src/js/utils.js","webpack://ionSdk/./node_modules/webrtc-adapter/src/js/chrome/getusermedia.js","webpack://ionSdk/./node_modules/webrtc-adapter/src/js/chrome/getdisplaymedia.js","webpack://ionSdk/./node_modules/webrtc-adapter/src/js/chrome/chrome_shim.js","webpack://ionSdk/./node_modules/webrtc-adapter/src/js/firefox/getusermedia.js","webpack://ionSdk/./node_modules/webrtc-adapter/src/js/firefox/getdisplaymedia.js","webpack://ionSdk/./node_modules/webrtc-adapter/src/js/firefox/firefox_shim.js","webpack://ionSdk/./node_modules/webrtc-adapter/src/js/safari/safari_shim.js","webpack://ionSdk/./node_modules/webrtc-adapter/src/js/common_shim.js","webpack://ionSdk/./node_modules/webrtc-adapter/src/js/adapter_core.js","webpack://ionSdk/./node_modules/webrtc-adapter/src/js/adapter_factory.js","webpack://ionSdk/./src/Utils.js","webpack://ionSdk/./src/Enum.js","webpack://ionSdk/./src/Stream.js","webpack://ionSdk/./src/RTCError.js","webpack://ionSdk/./src/Client.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","runtime","regeneratorRuntime","accidentalStrictMode","globalThis","Function","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","error","done","Promise","then","fn","self","this","args","arguments","apply","err","undefined","instance","Constructor","TypeError","toPropertyKey","_defineProperties","target","props","length","descriptor","configurable","writable","protoProps","staticProps","SDPUtils","Math","random","toString","substring","localCName","generateIdentifier","splitLines","blob","trim","split","map","line","splitSections","part","index","getDescription","sections","getMediaSections","shift","matchPrefix","prefix","filter","indexOf","parseCandidate","parts","candidate","foundation","component","1","2","protocol","toLowerCase","priority","parseInt","ip","address","port","type","relatedAddress","relatedPort","tcpType","ufrag","usernameFragment","writeCandidate","sdp","push","toUpperCase","join","parseIceOptions","parseRtpMap","parsed","payloadType","clockRate","channels","numChannels","writeRtpMap","codec","pt","preferredPayloadType","parseExtmap","id","direction","uri","attributes","slice","writeExtmap","headerExtension","preferredId","parseFmtp","kv","j","writeFmtp","parameters","keys","params","forEach","param","parseRtcpFb","parameter","writeRtcpFb","lines","rtcpFeedback","fb","parseSsrcMedia","sp","ssrc","colon","attribute","parseSsrcGroup","semantics","ssrcs","getMid","mediaSection","mid","parseFingerprint","algorithm","getDtlsParameters","sessionpart","role","fingerprints","writeDtlsParameters","setupType","fp","parseCryptoLine","tag","cryptoSuite","keyParams","sessionParams","writeCryptoLine","writeCryptoKeyParams","parseCryptoKeyParams","keyMethod","keySalt","lifeTime","mkiValue","mkiLength","getCryptoParameters","getIceParameters","pwd","password","writeIceParameters","iceLite","parseRtpParameters","description","codecs","headerExtensions","fecMechanisms","rtcp","mline","profile","rtpmapline","fmtps","wildcardRtcpFb","find","existingFeedback","writeRtpDescription","kind","caps","maxptime","extension","parseRtpEncodingParameters","encodingParameters","hasRed","hasUlpfec","primarySsrc","secondarySsrc","flows","apt","encParam","codecPayloadType","rtx","JSON","parse","stringify","fec","mechanism","bandwidth","maxBitrate","parseRtcpParameters","rtcpParameters","remoteSsrc","obj","cname","rsize","reducedSize","compound","mux","writeRtcpParameters","parseMsid","spec","stream","track","planB","msidParts","parseSctpDescription","parseMLine","maxSizeLine","maxMessageSize","isNaN","sctpPort","fmt","sctpMapLines","writeSctpDescription","media","sctp","output","generateSessionId","substr","writeSessionBoilerplate","sessId","sessVer","sessUser","sessionId","version","getDirection","getKind","isRejected","parseOLine","username","sessionVersion","netType","addressType","isValidSDP","charAt","_getPrototypeOf","setPrototypeOf","getPrototypeOf","__proto__","arrayWithHoles","iterableToArrayLimit","unsupportedIterableToArray","nonIterableRest","arr","ReflectOwnKeys","R","Reflect","ReflectApply","receiver","ownKeys","getOwnPropertySymbols","getOwnPropertyNames","concat","NumberIsNaN","Number","EventEmitter","init","once","emitter","errorListener","removeListener","resolver","eventTargetAgnosticAddListener","handler","flags","on","addErrorHandlerIfEventEmitter","_events","_eventsCount","_maxListeners","defaultMaxListeners","checkListener","listener","_getMaxListeners","that","_addListener","prepend","events","existing","warning","newListener","emit","unshift","warned","w","Error","String","count","console","warn","onceWrapper","fired","wrapFn","_onceWrap","state","wrapped","_listeners","unwrap","evlistener","ret","Array","unwrapListeners","arrayClone","listenerCount","copy","addEventListener","wrapListener","removeEventListener","set","RangeError","setMaxListeners","getMaxListeners","doError","er","message","context","len","listeners","addListener","prependListener","prependOnceListener","list","position","originalListener","pop","spliceOne","off","removeAllListeners","rawListeners","eventNames","_typeof","iterator","constructor","debug","APP_NAME","_debug","_warn","_error","log","subClass","superClass","assertThisInitialized","Peer","WebSocketTransport","parser","writer","write","parseParams","parseFmtpConfig","parsePayloads","parseRemoteCandidates","parseImageAttributes","parseSimulcastStreamList","toPrimitive","Logger","logger","super","Infinity","_logger","event","safeEmit","generateRandomNumber","raw","isArray","request","method","data","response","ok","errorCode","errorReason","notification","grammar","v","reg","names","format","u","e","z","b","a","rate","subtype","config","sessionConfig","str","raddr","tcptype","generation","RegExp","dir2","clksrcExt","mediaClockValue","rateNumerator","rateDenominator","input","hint","prim","res","_i","_s","_e","_x","_r","_arr","_n","_d","next","arrayLikeToArray","minLen","from","test","arr2","_setPrototypeOf","ReferenceError","_regeneratorRuntime","Op","hasOwn","desc","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","Context","makeInvokeMethod","tryCatch","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","NativeIteratorPrototype","values","Gp","defineIteratorMethods","_invoke","AsyncIterator","PromiseImpl","previousPromise","callInvokeWithMethodAndArg","invoke","record","result","__await","unwrapped","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","methodName","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","displayName","isGeneratorFunction","genFun","ctor","mark","awrap","async","iter","val","reverse","skipTempReset","prev","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","EnhancedEventEmitter","Message","transport","_closed","_transport","_connected","_data","_sents","Map","_handleTransport","close","createRequest","send","pResolve","pReject","timeout","size","data2","delete","clearTimeout","timer","setTimeout","createNotification","closed","currentAttempt","_handleRequest","_handleResponse","_handleNotification","createSuccessResponse","catch","createErrorResponse","code","formatArgs","useColors","namespace","humanize","diff","color","splice","lastC","replace","match","save","namespaces","storage","setItem","removeItem","load","getItem","process","env","DEBUG","__nwjs","navigator","userAgent","document","documentElement","style","WebkitAppearance","firebug","table","$1","localStorage","localstorage","destroy","colors","formatters","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","run","marker","runClearTimeout","Item","array","noop","nextTick","title","browser","argv","versions","binding","cwd","chdir","dir","umask","createDebug","prevTime","namespacesCache","enabledCache","enableOverride","enabled","curr","Date","ms","coerce","formatter","selectColor","extend","delimiter","newDebug","toNamespace","regexp","default","stack","disable","skips","enable","hash","charCodeAt","abs","h","plural","msAbs","isPlural","round","options","exec","parseFloat","isFinite","long","fmtLong","fmtShort","W3CWebSocket","w3cwebsocket","retry","DEFAULT_RETRY_OPTIONS","retries","factor","minTimeout","maxTimeout","url","_url","_options","_ws","_runWebSocket","onopen","onclose","onerror","onmessage","operation","wasConnected","attempt","origin","headers","requestOptions","clientConfig","wasClean","reason","_globalThis","NativeWebSocket","WebSocket","MozWebSocket","websocket_version","protocols","prop","naiveFallback","__global__","RetryOperation","timeouts","forever","unref","maxRetryTime","opts","randomize","createTimeout","sort","pow","min","methods","original","op","callback","mainError","_originalTimeouts","_timeouts","_maxRetryTime","_fn","_errors","_attempts","_operationTimeout","_operationTimeoutCb","_timeout","_operationStart","_cachedTimeouts","currentTime","getTime","timeoutOps","cb","try","start","errors","attempts","counts","mainErrorCount","rng","bytesToUuid","buf","offset","rnds","ii","getRandomValues","crypto","msCrypto","rnds8","Uint8Array","byteToHex","bth","toIntIfInt","parseReg","location","content","needsBlank","keyLocation","rawName","attachProperties","validLine","session","rtp","fmtp","paramReducer","acc","expr","reduce","candidates","item","scid","paused","formatRegExp","formatStr","x","makeLine","defaultOuterOrder","defaultInnerOrder","mLine","payloads","outerOrder","innerOrder","el","VideoElement","_classCallCheck","_parentElementId","_video","_createClass","elementId","remote","video","createElement","autoplay","playsinline","controls","muted","srcObject","parentElement","getElementById","appendChild","pause","removeChild","logDisabled_","deprecationWarnings_","extractVersion","uastring","pos","wrapPeerConnectionEvent","eventNameToWrap","wrapper","RTCPeerConnection","proto","nativeAddEventListener","nativeEventName","wrappedCallback","modifiedEvent","handleEvent","_eventMap","nativeRemoveEventListener","has","unwrappedCb","disableLog","bool","disableWarnings","deprecated","oldMethod","newMethod","isObject","compactObject","accumulator","isObj","isEmptyObject","assign","filterStats","outbound","streamStatsType","filteredResult","trackStats","trackIdentifier","trackStat","stats","trackId","walkStats","base","resultSet","endsWith","shimGetUserMedia","browserDetails","mediaDevices","constraintsToChrome_","mandatory","optional","cc","ideal","exact","max","oldname_","oc","mix","advanced","shimConstraints_","constraints","func","audio","remap","face","facingMode","getSupportedFacingModeLies","getSupportedConstraints","matches","enumerateDevices","devices","dev","some","label","includes","deviceId","shimError_","PermissionDeniedError","PermissionDismissedError","InvalidStateError","DevicesNotFoundError","ConstraintNotSatisfiedError","TrackStartError","MediaDeviceFailedDueToShutdown","MediaDeviceKillSwitchOn","TabCaptureError","ScreenCaptureError","DeviceCaptureError","constraint","constraintName","getUserMedia","onSuccess","onError","webkitGetUserMedia","origGetUserMedia","cs","getAudioTracks","getVideoTracks","getTracks","DOMException","shimGetDisplayMedia","getSourceId","getDisplayMedia","sourceId","widthSpecified","width","heightSpecified","height","frameRateSpecified","frameRate","chromeMediaSource","chromeMediaSourceId","maxFrameRate","maxWidth","maxHeight","shimMediaStream","MediaStream","webkitMediaStream","shimOnTrack","_ontrack","f","origSetRemoteDescription","setRemoteDescription","_ontrackpoly","te","getReceivers","Event","transceiver","streams","dispatchEvent","shimGetSendersWithDtmf","shimSenderWithDtmf","pc","_dtmf","createDTMFSender","_pc","getSenders","_senders","origAddTrack","addTrack","sender","origRemoveTrack","removeTrack","idx","origAddStream","addStream","origRemoveStream","removeStream","RTCRtpSender","origGetSenders","senders","shimGetStats","origGetStats","getStats","selector","onSucc","onErr","fixChromeStats_","standardReport","report","standardStats","timestamp","localcandidate","remotecandidate","stat","makeMapStats","successCallbackWrapper_","shimSenderReceiverGetStats","RTCRtpReceiver","origGetReceivers","receivers","srcElement","MediaStreamTrack","shimAddTrackRemoveTrackWithNative","getLocalStreams","_shimmedLocalStreams","streamId","existingSenders","newSenders","newSender","shimAddTrackRemoveTrack","origGetLocalStreams","nativeStreams","_reverseStreams","_streams","newStream","replaceInternalStreamId","internalId","externalStream","internalStream","RTCSessionDescription","replaceExternalStreamId","signalingState","alreadyExists","oldStream","nativeMethod","methodObj","origSetLocalDescription","setLocalDescription","origLocalDescription","getOwnPropertyDescriptor","streamid","shimPeerConnection","webkitRTCPeerConnection","RTCIceCandidate","fixNegotiationNeeded","getConfiguration","sdpSemantics","nativeGetUserMedia","getSettings","nativeGetSettings","applyConstraints","nativeApplyConstraints","preferredMediaSource","mediaSource","RTCTrackEvent","mozRTCPeerConnection","modernStatsTypes","inboundrtp","outboundrtp","candidatepair","nativeGetStats","shimSenderGetStats","shimReceiverGetStats","shimRemoveStream","shimRTCDataChannel","DataChannel","RTCDataChannel","shimAddTransceiver","origAddTransceiver","addTransceiver","setParametersPromises","sendEncodings","shouldPerformCheck","encodingParam","rid","scaleResolutionDownBy","maxFramerate","getParameters","encodings","setParameters","shimGetParameters","origGetParameters","shimCreateOffer","origCreateOffer","createOffer","all","finally","shimCreateAnswer","origCreateAnswer","createAnswer","shimLocalStreamsAPI","_localStreams","_addTrack","tracks","shimRemoteStreamsAPI","getRemoteStreams","_remoteStreams","_onaddstream","_onaddstreampoly","shimCallbacksAPI","addIceCandidate","successCallback","failureCallback","promise","withCallback","_getUserMedia","shimConstraints","errcb","shimRTCIceServerUrls","OrigPeerConnection","pcConfig","pcConstraints","iceServers","newIceServers","server","urls","generateCertificate","shimTrackEventTransceiver","shimCreateOfferLegacy","offerOptions","offerToReceiveAudio","audioTransceiver","getTransceivers","setDirection","offerToReceiveVideo","videoTransceiver","shimAudioContext","AudioContext","webkitAudioContext","shimRTCIceCandidate","NativeRTCIceCandidate","nativeCandidate","parsedCandidate","toJSON","sdpMid","sdpMLineIndex","shimRTCIceCandidateRelayProtocol","relayProtocol","0","shimMaxMessageSize","_sctp","sctpInDescription","getRemoteFirefoxVersion","getCanSendMaxMessageSize","remoteIsFirefox","canSendMaxMessageSize","getMaxMessageSize","isFirefox","canSendMMS","remoteMMS","POSITIVE_INFINITY","shimSendThrowTypeError","wrapDcSend","dc","origDataChannelSend","byteLength","readyState","origCreateDataChannel","createDataChannel","dataChannel","channel","shimConnectionState","completed","checking","iceConnectionState","_onconnectionstatechange","origMethod","_connectionstatechangepoly","_lastConnectionState","connectionState","newEvent","removeExtmapAllowMixed","nativeSRD","shimAddIceCandidateNullOrEmpty","nativeAddIceCandidate","shimParameterlessSetLocalDescription","nativeSetLocalDescription","shimChrome","shimFirefox","shimSafari","logging","mozGetUserMedia","isSecureContext","supportsUnifiedPlan","RTCRtpTransceiver","adapter","commonShim","browserShim","adapterFactory","getBrowerDetail","checkSupportWebRtc","getMediaDevices","videoDevices","audioDevices","audioOutputDevices","_step","_iterator","_createForOfIteratorHelper","device","FrameRateEnum","FRAME_RATE_ENUM_5","FRAME_RATE_ENUM_10","FRAME_RATE_ENUM_15","FRAME_RATE_ENUM_20","FRAME_RATE_ENUM_25","FRAME_RATE_ENUM_30","FRAME_RATE_ENUM_NORMAL","VideoResolutionEnum","VIDEO_RESOLUTION_ENUM_120P","VIDEO_RESOLUTION_ENUM_240P","VIDEO_RESOLUTION_ENUM_360P","VIDEO_RESOLUTION_ENUM_480P","VIDEO_RESOLUTION_ENUM_540P","VIDEO_RESOLUTION_ENUM_720P","VIDEO_RESOLUTION_ENUM_1080P","VIDEO_RESOLUTION_ENUM_NORMAL","VideoResolutions","3","4","5","6","VideoFrameRate","MicrophoneContext","_audioContext","_gainNode","createGain","_audioSource","_audioDestination","createMediaStreamSource","createMediaStreamDestination","connect","gain","StreamDirection","Stream","_EventEmitter","_inherits","_init","_super","_createSuper","_this","streamDir","_streamDirection","_uid","_mid","_sfuid","_sid","_minfo","_stream","_videoElement","_videoDeviceId","_asyncToGenerator","_callee","deviceData","audioOptions","audioDevice","videoOptions","videoDevice","_audioOptions","_audioDevice","_videoOptions","_videoDevice","_args","_context","screen","resolution","audioDeviceId","videoDeviceId","_objectSpread","_processAudioPubStream","sfuid","sid","uid","minfo","play","_micro","parentElementId","changeMicrophoneLevel","mute","isSuccess","ErrorMessage","RTCError","serverError","serverErrorDesc","isServerError","PublishStreamType","Client","_createReceiver2","_createSender2","_close","_keepalive2","_broadcast","_unsubscribe","_subscribe","_unpublish","_publish","_setScreenUnSub","_setScreenSub","_setVideoUnSub","_setVideoSub","_setAudioUnSub","_setAudioSub","_setScreenPublish","_SwitchVideo","_setVideoPublish","_setAudioPublish","_leave","_join","useWSS","hostname","_hostname","_useWSS","_port","_pcs","_publishStreams","_ableSubStreamInfo","_rid","keepaliveTimer","_isIgnoreCancelError","_videoResolution","_videoFrameRate","_screenFrameRate","isIgnoreCancelError","_this2","_getProtooUrl","protooClient","_protoo","currentAttemp","roomId","_this3","pubs","ableStreamInfo","clearInterval","setInterval","_keepalive","t0","_callee2","_iterator2","_step2","_context2","unpublish","unsubscribe","t1","t2","_callee3","isPublish","_args3","_context3","publish","_x2","_callee4","_args4","_context4","_x3","_callee5","newDevice","_this4","_args5","_context5","getRenderParentElementId","render","_callee6","_context6","_x4","_callee7","_iterator3","_step3","_step3$value","_context7","_slicedToArray","subscribe","_x5","_callee8","_iterator4","_step4","_context8","_x6","_callee9","_iterator5","_step5","_step5$value","_context9","videotype","_x7","_callee10","_iterator6","_step6","_context10","_x8","_callee11","_iterator7","_step7","_step7$value","_context11","_x9","_callee12","_iterator8","_step8","_context12","_x10","_callee15","_this5","_args15","_context15","_ref","_callee14","_context14","_createSender","onicecandidate","_ref2","_callee13","offer","audioOption","videoOption","_context13","sendOffer","localDescription","jsep","_x13","_x11","_x12","_callee16","streamType","_iterator9","_step9","_step9$value","_context16","_removePC","_x14","_callee20","_this6","_context20","_ref3","_callee19","_context19","_createReceiver","ontrack","onaddstream","onremovestream","_ref4","_callee18","subscribeCb","_context18","_ref5","_callee17","_context17","_x19","_x17","_x18","_x15","_x16","_callee21","_context21","_x20","_callee22","_context22","_x21","_callee23","_context23","_callee24","_context24","leave","payload","codeName","sdpTransform","videoIdx","rtcpFB","tmp","_callee25","_context25","_payloadModify","_x22","_x23","_callee26","_context26","_modifyCodec","_x24","codecBegin","codecEnd","_step10","_iterator10","_step10$value","pid","accept","bizid"],"mappings":"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","file":"ion-sdk.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ionSdk\"] = factory();\n\telse\n\t\troot[\"ionSdk\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 48);\n","// TODO(Babel 8): Remove this file.\n\nvar runtime = require(\"../helpers/regeneratorRuntime\")();\nmodule.exports = runtime;\n\n// Copied from https://github.com/facebook/regenerator/blob/main/packages/runtime/runtime.js#L736=\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n      args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n      _next(undefined);\n    });\n  };\n}\nmodule.exports = _asyncToGenerator, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nmodule.exports = _classCallCheck, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var toPropertyKey = require(\"./toPropertyKey.js\");\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, toPropertyKey(descriptor.key), descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\nmodule.exports = _createClass, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","/* eslint-env node */\n'use strict';\n\n// SDP helpers.\nconst SDPUtils = {};\n\n// Generate an alphanumeric identifier for cname or mids.\n// TODO: use UUIDs instead? https://gist.github.com/jed/982883\nSDPUtils.generateIdentifier = function() {\n  return Math.random().toString(36).substring(2, 12);\n};\n\n// The RTCP CNAME used by all peerconnections from the same JS.\nSDPUtils.localCName = SDPUtils.generateIdentifier();\n\n// Splits SDP into lines, dealing with both CRLF and LF.\nSDPUtils.splitLines = function(blob) {\n  return blob.trim().split('\\n').map(line => line.trim());\n};\n// Splits SDP into sessionpart and mediasections. Ensures CRLF.\nSDPUtils.splitSections = function(blob) {\n  const parts = blob.split('\\nm=');\n  return parts.map((part, index) => (index > 0 ?\n    'm=' + part : part).trim() + '\\r\\n');\n};\n\n// Returns the session description.\nSDPUtils.getDescription = function(blob) {\n  const sections = SDPUtils.splitSections(blob);\n  return sections && sections[0];\n};\n\n// Returns the individual media sections.\nSDPUtils.getMediaSections = function(blob) {\n  const sections = SDPUtils.splitSections(blob);\n  sections.shift();\n  return sections;\n};\n\n// Returns lines that start with a certain prefix.\nSDPUtils.matchPrefix = function(blob, prefix) {\n  return SDPUtils.splitLines(blob).filter(line => line.indexOf(prefix) === 0);\n};\n\n// Parses an ICE candidate line. Sample input:\n// candidate:702786350 2 udp 41819902 8.8.8.8 60769 typ relay raddr 8.8.8.8\n// rport 55996\"\n// Input can be prefixed with a=.\nSDPUtils.parseCandidate = function(line) {\n  let parts;\n  // Parse both variants.\n  if (line.indexOf('a=candidate:') === 0) {\n    parts = line.substring(12).split(' ');\n  } else {\n    parts = line.substring(10).split(' ');\n  }\n\n  const candidate = {\n    foundation: parts[0],\n    component: {1: 'rtp', 2: 'rtcp'}[parts[1]] || parts[1],\n    protocol: parts[2].toLowerCase(),\n    priority: parseInt(parts[3], 10),\n    ip: parts[4],\n    address: parts[4], // address is an alias for ip.\n    port: parseInt(parts[5], 10),\n    // skip parts[6] == 'typ'\n    type: parts[7],\n  };\n\n  for (let i = 8; i < parts.length; i += 2) {\n    switch (parts[i]) {\n      case 'raddr':\n        candidate.relatedAddress = parts[i + 1];\n        break;\n      case 'rport':\n        candidate.relatedPort = parseInt(parts[i + 1], 10);\n        break;\n      case 'tcptype':\n        candidate.tcpType = parts[i + 1];\n        break;\n      case 'ufrag':\n        candidate.ufrag = parts[i + 1]; // for backward compatibility.\n        candidate.usernameFragment = parts[i + 1];\n        break;\n      default: // extension handling, in particular ufrag. Don't overwrite.\n        if (candidate[parts[i]] === undefined) {\n          candidate[parts[i]] = parts[i + 1];\n        }\n        break;\n    }\n  }\n  return candidate;\n};\n\n// Translates a candidate object into SDP candidate attribute.\n// This does not include the a= prefix!\nSDPUtils.writeCandidate = function(candidate) {\n  const sdp = [];\n  sdp.push(candidate.foundation);\n\n  const component = candidate.component;\n  if (component === 'rtp') {\n    sdp.push(1);\n  } else if (component === 'rtcp') {\n    sdp.push(2);\n  } else {\n    sdp.push(component);\n  }\n  sdp.push(candidate.protocol.toUpperCase());\n  sdp.push(candidate.priority);\n  sdp.push(candidate.address || candidate.ip);\n  sdp.push(candidate.port);\n\n  const type = candidate.type;\n  sdp.push('typ');\n  sdp.push(type);\n  if (type !== 'host' && candidate.relatedAddress &&\n      candidate.relatedPort) {\n    sdp.push('raddr');\n    sdp.push(candidate.relatedAddress);\n    sdp.push('rport');\n    sdp.push(candidate.relatedPort);\n  }\n  if (candidate.tcpType && candidate.protocol.toLowerCase() === 'tcp') {\n    sdp.push('tcptype');\n    sdp.push(candidate.tcpType);\n  }\n  if (candidate.usernameFragment || candidate.ufrag) {\n    sdp.push('ufrag');\n    sdp.push(candidate.usernameFragment || candidate.ufrag);\n  }\n  return 'candidate:' + sdp.join(' ');\n};\n\n// Parses an ice-options line, returns an array of option tags.\n// Sample input:\n// a=ice-options:foo bar\nSDPUtils.parseIceOptions = function(line) {\n  return line.substring(14).split(' ');\n};\n\n// Parses a rtpmap line, returns RTCRtpCoddecParameters. Sample input:\n// a=rtpmap:111 opus/48000/2\nSDPUtils.parseRtpMap = function(line) {\n  let parts = line.substring(9).split(' ');\n  const parsed = {\n    payloadType: parseInt(parts.shift(), 10), // was: id\n  };\n\n  parts = parts[0].split('/');\n\n  parsed.name = parts[0];\n  parsed.clockRate = parseInt(parts[1], 10); // was: clockrate\n  parsed.channels = parts.length === 3 ? parseInt(parts[2], 10) : 1;\n  // legacy alias, got renamed back to channels in ORTC.\n  parsed.numChannels = parsed.channels;\n  return parsed;\n};\n\n// Generates a rtpmap line from RTCRtpCodecCapability or\n// RTCRtpCodecParameters.\nSDPUtils.writeRtpMap = function(codec) {\n  let pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  const channels = codec.channels || codec.numChannels || 1;\n  return 'a=rtpmap:' + pt + ' ' + codec.name + '/' + codec.clockRate +\n      (channels !== 1 ? '/' + channels : '') + '\\r\\n';\n};\n\n// Parses a extmap line (headerextension from RFC 5285). Sample input:\n// a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n// a=extmap:2/sendonly urn:ietf:params:rtp-hdrext:toffset\nSDPUtils.parseExtmap = function(line) {\n  const parts = line.substring(9).split(' ');\n  return {\n    id: parseInt(parts[0], 10),\n    direction: parts[0].indexOf('/') > 0 ? parts[0].split('/')[1] : 'sendrecv',\n    uri: parts[1],\n    attributes: parts.slice(2).join(' '),\n  };\n};\n\n// Generates an extmap line from RTCRtpHeaderExtensionParameters or\n// RTCRtpHeaderExtension.\nSDPUtils.writeExtmap = function(headerExtension) {\n  return 'a=extmap:' + (headerExtension.id || headerExtension.preferredId) +\n      (headerExtension.direction && headerExtension.direction !== 'sendrecv'\n        ? '/' + headerExtension.direction\n        : '') +\n      ' ' + headerExtension.uri +\n      (headerExtension.attributes ? ' ' + headerExtension.attributes : '') +\n      '\\r\\n';\n};\n\n// Parses a fmtp line, returns dictionary. Sample input:\n// a=fmtp:96 vbr=on;cng=on\n// Also deals with vbr=on; cng=on\nSDPUtils.parseFmtp = function(line) {\n  const parsed = {};\n  let kv;\n  const parts = line.substring(line.indexOf(' ') + 1).split(';');\n  for (let j = 0; j < parts.length; j++) {\n    kv = parts[j].trim().split('=');\n    parsed[kv[0].trim()] = kv[1];\n  }\n  return parsed;\n};\n\n// Generates a fmtp line from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeFmtp = function(codec) {\n  let line = '';\n  let pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.parameters && Object.keys(codec.parameters).length) {\n    const params = [];\n    Object.keys(codec.parameters).forEach(param => {\n      if (codec.parameters[param] !== undefined) {\n        params.push(param + '=' + codec.parameters[param]);\n      } else {\n        params.push(param);\n      }\n    });\n    line += 'a=fmtp:' + pt + ' ' + params.join(';') + '\\r\\n';\n  }\n  return line;\n};\n\n// Parses a rtcp-fb line, returns RTCPRtcpFeedback object. Sample input:\n// a=rtcp-fb:98 nack rpsi\nSDPUtils.parseRtcpFb = function(line) {\n  const parts = line.substring(line.indexOf(' ') + 1).split(' ');\n  return {\n    type: parts.shift(),\n    parameter: parts.join(' '),\n  };\n};\n\n// Generate a=rtcp-fb lines from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeRtcpFb = function(codec) {\n  let lines = '';\n  let pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.rtcpFeedback && codec.rtcpFeedback.length) {\n    // FIXME: special handling for trr-int?\n    codec.rtcpFeedback.forEach(fb => {\n      lines += 'a=rtcp-fb:' + pt + ' ' + fb.type +\n      (fb.parameter && fb.parameter.length ? ' ' + fb.parameter : '') +\n          '\\r\\n';\n    });\n  }\n  return lines;\n};\n\n// Parses a RFC 5576 ssrc media attribute. Sample input:\n// a=ssrc:3735928559 cname:something\nSDPUtils.parseSsrcMedia = function(line) {\n  const sp = line.indexOf(' ');\n  const parts = {\n    ssrc: parseInt(line.substring(7, sp), 10),\n  };\n  const colon = line.indexOf(':', sp);\n  if (colon > -1) {\n    parts.attribute = line.substring(sp + 1, colon);\n    parts.value = line.substring(colon + 1);\n  } else {\n    parts.attribute = line.substring(sp + 1);\n  }\n  return parts;\n};\n\n// Parse a ssrc-group line (see RFC 5576). Sample input:\n// a=ssrc-group:semantics 12 34\nSDPUtils.parseSsrcGroup = function(line) {\n  const parts = line.substring(13).split(' ');\n  return {\n    semantics: parts.shift(),\n    ssrcs: parts.map(ssrc => parseInt(ssrc, 10)),\n  };\n};\n\n// Extracts the MID (RFC 5888) from a media section.\n// Returns the MID or undefined if no mid line was found.\nSDPUtils.getMid = function(mediaSection) {\n  const mid = SDPUtils.matchPrefix(mediaSection, 'a=mid:')[0];\n  if (mid) {\n    return mid.substring(6);\n  }\n};\n\n// Parses a fingerprint line for DTLS-SRTP.\nSDPUtils.parseFingerprint = function(line) {\n  const parts = line.substring(14).split(' ');\n  return {\n    algorithm: parts[0].toLowerCase(), // algorithm is case-sensitive in Edge.\n    value: parts[1].toUpperCase(), // the definition is upper-case in RFC 4572.\n  };\n};\n\n// Extracts DTLS parameters from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the fingerprint line as input. See also getIceParameters.\nSDPUtils.getDtlsParameters = function(mediaSection, sessionpart) {\n  const lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=fingerprint:');\n  // Note: a=setup line is ignored since we use the 'auto' role in Edge.\n  return {\n    role: 'auto',\n    fingerprints: lines.map(SDPUtils.parseFingerprint),\n  };\n};\n\n// Serializes DTLS parameters to SDP.\nSDPUtils.writeDtlsParameters = function(params, setupType) {\n  let sdp = 'a=setup:' + setupType + '\\r\\n';\n  params.fingerprints.forEach(fp => {\n    sdp += 'a=fingerprint:' + fp.algorithm + ' ' + fp.value + '\\r\\n';\n  });\n  return sdp;\n};\n\n// Parses a=crypto lines into\n//   https://rawgit.com/aboba/edgertc/master/msortc-rs4.html#dictionary-rtcsrtpsdesparameters-members\nSDPUtils.parseCryptoLine = function(line) {\n  const parts = line.substring(9).split(' ');\n  return {\n    tag: parseInt(parts[0], 10),\n    cryptoSuite: parts[1],\n    keyParams: parts[2],\n    sessionParams: parts.slice(3),\n  };\n};\n\nSDPUtils.writeCryptoLine = function(parameters) {\n  return 'a=crypto:' + parameters.tag + ' ' +\n    parameters.cryptoSuite + ' ' +\n    (typeof parameters.keyParams === 'object'\n      ? SDPUtils.writeCryptoKeyParams(parameters.keyParams)\n      : parameters.keyParams) +\n    (parameters.sessionParams ? ' ' + parameters.sessionParams.join(' ') : '') +\n    '\\r\\n';\n};\n\n// Parses the crypto key parameters into\n//   https://rawgit.com/aboba/edgertc/master/msortc-rs4.html#rtcsrtpkeyparam*\nSDPUtils.parseCryptoKeyParams = function(keyParams) {\n  if (keyParams.indexOf('inline:') !== 0) {\n    return null;\n  }\n  const parts = keyParams.substring(7).split('|');\n  return {\n    keyMethod: 'inline',\n    keySalt: parts[0],\n    lifeTime: parts[1],\n    mkiValue: parts[2] ? parts[2].split(':')[0] : undefined,\n    mkiLength: parts[2] ? parts[2].split(':')[1] : undefined,\n  };\n};\n\nSDPUtils.writeCryptoKeyParams = function(keyParams) {\n  return keyParams.keyMethod + ':'\n    + keyParams.keySalt +\n    (keyParams.lifeTime ? '|' + keyParams.lifeTime : '') +\n    (keyParams.mkiValue && keyParams.mkiLength\n      ? '|' + keyParams.mkiValue + ':' + keyParams.mkiLength\n      : '');\n};\n\n// Extracts all SDES parameters.\nSDPUtils.getCryptoParameters = function(mediaSection, sessionpart) {\n  const lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=crypto:');\n  return lines.map(SDPUtils.parseCryptoLine);\n};\n\n// Parses ICE information from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the ice-ufrag and ice-pwd lines as input.\nSDPUtils.getIceParameters = function(mediaSection, sessionpart) {\n  const ufrag = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=ice-ufrag:')[0];\n  const pwd = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=ice-pwd:')[0];\n  if (!(ufrag && pwd)) {\n    return null;\n  }\n  return {\n    usernameFragment: ufrag.substring(12),\n    password: pwd.substring(10),\n  };\n};\n\n// Serializes ICE parameters to SDP.\nSDPUtils.writeIceParameters = function(params) {\n  let sdp = 'a=ice-ufrag:' + params.usernameFragment + '\\r\\n' +\n      'a=ice-pwd:' + params.password + '\\r\\n';\n  if (params.iceLite) {\n    sdp += 'a=ice-lite\\r\\n';\n  }\n  return sdp;\n};\n\n// Parses the SDP media section and returns RTCRtpParameters.\nSDPUtils.parseRtpParameters = function(mediaSection) {\n  const description = {\n    codecs: [],\n    headerExtensions: [],\n    fecMechanisms: [],\n    rtcp: [],\n  };\n  const lines = SDPUtils.splitLines(mediaSection);\n  const mline = lines[0].split(' ');\n  description.profile = mline[2];\n  for (let i = 3; i < mline.length; i++) { // find all codecs from mline[3..]\n    const pt = mline[i];\n    const rtpmapline = SDPUtils.matchPrefix(\n      mediaSection, 'a=rtpmap:' + pt + ' ')[0];\n    if (rtpmapline) {\n      const codec = SDPUtils.parseRtpMap(rtpmapline);\n      const fmtps = SDPUtils.matchPrefix(\n        mediaSection, 'a=fmtp:' + pt + ' ');\n      // Only the first a=fmtp:<pt> is considered.\n      codec.parameters = fmtps.length ? SDPUtils.parseFmtp(fmtps[0]) : {};\n      codec.rtcpFeedback = SDPUtils.matchPrefix(\n        mediaSection, 'a=rtcp-fb:' + pt + ' ')\n        .map(SDPUtils.parseRtcpFb);\n      description.codecs.push(codec);\n      // parse FEC mechanisms from rtpmap lines.\n      switch (codec.name.toUpperCase()) {\n        case 'RED':\n        case 'ULPFEC':\n          description.fecMechanisms.push(codec.name.toUpperCase());\n          break;\n        default: // only RED and ULPFEC are recognized as FEC mechanisms.\n          break;\n      }\n    }\n  }\n  SDPUtils.matchPrefix(mediaSection, 'a=extmap:').forEach(line => {\n    description.headerExtensions.push(SDPUtils.parseExtmap(line));\n  });\n  const wildcardRtcpFb = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-fb:* ')\n    .map(SDPUtils.parseRtcpFb);\n  description.codecs.forEach(codec => {\n    wildcardRtcpFb.forEach(fb=> {\n      const duplicate = codec.rtcpFeedback.find(existingFeedback => {\n        return existingFeedback.type === fb.type &&\n          existingFeedback.parameter === fb.parameter;\n      });\n      if (!duplicate) {\n        codec.rtcpFeedback.push(fb);\n      }\n    });\n  });\n  // FIXME: parse rtcp.\n  return description;\n};\n\n// Generates parts of the SDP media section describing the capabilities /\n// parameters.\nSDPUtils.writeRtpDescription = function(kind, caps) {\n  let sdp = '';\n\n  // Build the mline.\n  sdp += 'm=' + kind + ' ';\n  sdp += caps.codecs.length > 0 ? '9' : '0'; // reject if no codecs.\n  sdp += ' ' + (caps.profile || 'UDP/TLS/RTP/SAVPF') + ' ';\n  sdp += caps.codecs.map(codec => {\n    if (codec.preferredPayloadType !== undefined) {\n      return codec.preferredPayloadType;\n    }\n    return codec.payloadType;\n  }).join(' ') + '\\r\\n';\n\n  sdp += 'c=IN IP4 0.0.0.0\\r\\n';\n  sdp += 'a=rtcp:9 IN IP4 0.0.0.0\\r\\n';\n\n  // Add a=rtpmap lines for each codec. Also fmtp and rtcp-fb.\n  caps.codecs.forEach(codec => {\n    sdp += SDPUtils.writeRtpMap(codec);\n    sdp += SDPUtils.writeFmtp(codec);\n    sdp += SDPUtils.writeRtcpFb(codec);\n  });\n  let maxptime = 0;\n  caps.codecs.forEach(codec => {\n    if (codec.maxptime > maxptime) {\n      maxptime = codec.maxptime;\n    }\n  });\n  if (maxptime > 0) {\n    sdp += 'a=maxptime:' + maxptime + '\\r\\n';\n  }\n\n  if (caps.headerExtensions) {\n    caps.headerExtensions.forEach(extension => {\n      sdp += SDPUtils.writeExtmap(extension);\n    });\n  }\n  // FIXME: write fecMechanisms.\n  return sdp;\n};\n\n// Parses the SDP media section and returns an array of\n// RTCRtpEncodingParameters.\nSDPUtils.parseRtpEncodingParameters = function(mediaSection) {\n  const encodingParameters = [];\n  const description = SDPUtils.parseRtpParameters(mediaSection);\n  const hasRed = description.fecMechanisms.indexOf('RED') !== -1;\n  const hasUlpfec = description.fecMechanisms.indexOf('ULPFEC') !== -1;\n\n  // filter a=ssrc:... cname:, ignore PlanB-msid\n  const ssrcs = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(line => SDPUtils.parseSsrcMedia(line))\n    .filter(parts => parts.attribute === 'cname');\n  const primarySsrc = ssrcs.length > 0 && ssrcs[0].ssrc;\n  let secondarySsrc;\n\n  const flows = SDPUtils.matchPrefix(mediaSection, 'a=ssrc-group:FID')\n    .map(line => {\n      const parts = line.substring(17).split(' ');\n      return parts.map(part => parseInt(part, 10));\n    });\n  if (flows.length > 0 && flows[0].length > 1 && flows[0][0] === primarySsrc) {\n    secondarySsrc = flows[0][1];\n  }\n\n  description.codecs.forEach(codec => {\n    if (codec.name.toUpperCase() === 'RTX' && codec.parameters.apt) {\n      let encParam = {\n        ssrc: primarySsrc,\n        codecPayloadType: parseInt(codec.parameters.apt, 10),\n      };\n      if (primarySsrc && secondarySsrc) {\n        encParam.rtx = {ssrc: secondarySsrc};\n      }\n      encodingParameters.push(encParam);\n      if (hasRed) {\n        encParam = JSON.parse(JSON.stringify(encParam));\n        encParam.fec = {\n          ssrc: primarySsrc,\n          mechanism: hasUlpfec ? 'red+ulpfec' : 'red',\n        };\n        encodingParameters.push(encParam);\n      }\n    }\n  });\n  if (encodingParameters.length === 0 && primarySsrc) {\n    encodingParameters.push({\n      ssrc: primarySsrc,\n    });\n  }\n\n  // we support both b=AS and b=TIAS but interpret AS as TIAS.\n  let bandwidth = SDPUtils.matchPrefix(mediaSection, 'b=');\n  if (bandwidth.length) {\n    if (bandwidth[0].indexOf('b=TIAS:') === 0) {\n      bandwidth = parseInt(bandwidth[0].substring(7), 10);\n    } else if (bandwidth[0].indexOf('b=AS:') === 0) {\n      // use formula from JSEP to convert b=AS to TIAS value.\n      bandwidth = parseInt(bandwidth[0].substring(5), 10) * 1000 * 0.95\n          - (50 * 40 * 8);\n    } else {\n      bandwidth = undefined;\n    }\n    encodingParameters.forEach(params => {\n      params.maxBitrate = bandwidth;\n    });\n  }\n  return encodingParameters;\n};\n\n// parses http://draft.ortc.org/#rtcrtcpparameters*\nSDPUtils.parseRtcpParameters = function(mediaSection) {\n  const rtcpParameters = {};\n\n  // Gets the first SSRC. Note that with RTX there might be multiple\n  // SSRCs.\n  const remoteSsrc = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(line => SDPUtils.parseSsrcMedia(line))\n    .filter(obj => obj.attribute === 'cname')[0];\n  if (remoteSsrc) {\n    rtcpParameters.cname = remoteSsrc.value;\n    rtcpParameters.ssrc = remoteSsrc.ssrc;\n  }\n\n  // Edge uses the compound attribute instead of reducedSize\n  // compound is !reducedSize\n  const rsize = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-rsize');\n  rtcpParameters.reducedSize = rsize.length > 0;\n  rtcpParameters.compound = rsize.length === 0;\n\n  // parses the rtcp-mux attrіbute.\n  // Note that Edge does not support unmuxed RTCP.\n  const mux = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-mux');\n  rtcpParameters.mux = mux.length > 0;\n\n  return rtcpParameters;\n};\n\nSDPUtils.writeRtcpParameters = function(rtcpParameters) {\n  let sdp = '';\n  if (rtcpParameters.reducedSize) {\n    sdp += 'a=rtcp-rsize\\r\\n';\n  }\n  if (rtcpParameters.mux) {\n    sdp += 'a=rtcp-mux\\r\\n';\n  }\n  if (rtcpParameters.ssrc !== undefined && rtcpParameters.cname) {\n    sdp += 'a=ssrc:' + rtcpParameters.ssrc +\n      ' cname:' + rtcpParameters.cname + '\\r\\n';\n  }\n  return sdp;\n};\n\n\n// parses either a=msid: or a=ssrc:... msid lines and returns\n// the id of the MediaStream and MediaStreamTrack.\nSDPUtils.parseMsid = function(mediaSection) {\n  let parts;\n  const spec = SDPUtils.matchPrefix(mediaSection, 'a=msid:');\n  if (spec.length === 1) {\n    parts = spec[0].substring(7).split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n  const planB = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(line => SDPUtils.parseSsrcMedia(line))\n    .filter(msidParts => msidParts.attribute === 'msid');\n  if (planB.length > 0) {\n    parts = planB[0].value.split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n};\n\n// SCTP\n// parses draft-ietf-mmusic-sctp-sdp-26 first and falls back\n// to draft-ietf-mmusic-sctp-sdp-05\nSDPUtils.parseSctpDescription = function(mediaSection) {\n  const mline = SDPUtils.parseMLine(mediaSection);\n  const maxSizeLine = SDPUtils.matchPrefix(mediaSection, 'a=max-message-size:');\n  let maxMessageSize;\n  if (maxSizeLine.length > 0) {\n    maxMessageSize = parseInt(maxSizeLine[0].substring(19), 10);\n  }\n  if (isNaN(maxMessageSize)) {\n    maxMessageSize = 65536;\n  }\n  const sctpPort = SDPUtils.matchPrefix(mediaSection, 'a=sctp-port:');\n  if (sctpPort.length > 0) {\n    return {\n      port: parseInt(sctpPort[0].substring(12), 10),\n      protocol: mline.fmt,\n      maxMessageSize,\n    };\n  }\n  const sctpMapLines = SDPUtils.matchPrefix(mediaSection, 'a=sctpmap:');\n  if (sctpMapLines.length > 0) {\n    const parts = sctpMapLines[0]\n      .substring(10)\n      .split(' ');\n    return {\n      port: parseInt(parts[0], 10),\n      protocol: parts[1],\n      maxMessageSize,\n    };\n  }\n};\n\n// SCTP\n// outputs the draft-ietf-mmusic-sctp-sdp-26 version that all browsers\n// support by now receiving in this format, unless we originally parsed\n// as the draft-ietf-mmusic-sctp-sdp-05 format (indicated by the m-line\n// protocol of DTLS/SCTP -- without UDP/ or TCP/)\nSDPUtils.writeSctpDescription = function(media, sctp) {\n  let output = [];\n  if (media.protocol !== 'DTLS/SCTP') {\n    output = [\n      'm=' + media.kind + ' 9 ' + media.protocol + ' ' + sctp.protocol + '\\r\\n',\n      'c=IN IP4 0.0.0.0\\r\\n',\n      'a=sctp-port:' + sctp.port + '\\r\\n',\n    ];\n  } else {\n    output = [\n      'm=' + media.kind + ' 9 ' + media.protocol + ' ' + sctp.port + '\\r\\n',\n      'c=IN IP4 0.0.0.0\\r\\n',\n      'a=sctpmap:' + sctp.port + ' ' + sctp.protocol + ' 65535\\r\\n',\n    ];\n  }\n  if (sctp.maxMessageSize !== undefined) {\n    output.push('a=max-message-size:' + sctp.maxMessageSize + '\\r\\n');\n  }\n  return output.join('');\n};\n\n// Generate a session ID for SDP.\n// https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-20#section-5.2.1\n// recommends using a cryptographically random +ve 64-bit value\n// but right now this should be acceptable and within the right range\nSDPUtils.generateSessionId = function() {\n  return Math.random().toString().substr(2, 22);\n};\n\n// Write boiler plate for start of SDP\n// sessId argument is optional - if not supplied it will\n// be generated randomly\n// sessVersion is optional and defaults to 2\n// sessUser is optional and defaults to 'thisisadapterortc'\nSDPUtils.writeSessionBoilerplate = function(sessId, sessVer, sessUser) {\n  let sessionId;\n  const version = sessVer !== undefined ? sessVer : 2;\n  if (sessId) {\n    sessionId = sessId;\n  } else {\n    sessionId = SDPUtils.generateSessionId();\n  }\n  const user = sessUser || 'thisisadapterortc';\n  // FIXME: sess-id should be an NTP timestamp.\n  return 'v=0\\r\\n' +\n      'o=' + user + ' ' + sessionId + ' ' + version +\n        ' IN IP4 127.0.0.1\\r\\n' +\n      's=-\\r\\n' +\n      't=0 0\\r\\n';\n};\n\n// Gets the direction from the mediaSection or the sessionpart.\nSDPUtils.getDirection = function(mediaSection, sessionpart) {\n  // Look for sendrecv, sendonly, recvonly, inactive, default to sendrecv.\n  const lines = SDPUtils.splitLines(mediaSection);\n  for (let i = 0; i < lines.length; i++) {\n    switch (lines[i]) {\n      case 'a=sendrecv':\n      case 'a=sendonly':\n      case 'a=recvonly':\n      case 'a=inactive':\n        return lines[i].substring(2);\n      default:\n        // FIXME: What should happen here?\n    }\n  }\n  if (sessionpart) {\n    return SDPUtils.getDirection(sessionpart);\n  }\n  return 'sendrecv';\n};\n\nSDPUtils.getKind = function(mediaSection) {\n  const lines = SDPUtils.splitLines(mediaSection);\n  const mline = lines[0].split(' ');\n  return mline[0].substring(2);\n};\n\nSDPUtils.isRejected = function(mediaSection) {\n  return mediaSection.split(' ', 2)[1] === '0';\n};\n\nSDPUtils.parseMLine = function(mediaSection) {\n  const lines = SDPUtils.splitLines(mediaSection);\n  const parts = lines[0].substring(2).split(' ');\n  return {\n    kind: parts[0],\n    port: parseInt(parts[1], 10),\n    protocol: parts[2],\n    fmt: parts.slice(3).join(' '),\n  };\n};\n\nSDPUtils.parseOLine = function(mediaSection) {\n  const line = SDPUtils.matchPrefix(mediaSection, 'o=')[0];\n  const parts = line.substring(2).split(' ');\n  return {\n    username: parts[0],\n    sessionId: parts[1],\n    sessionVersion: parseInt(parts[2], 10),\n    netType: parts[3],\n    addressType: parts[4],\n    address: parts[5],\n  };\n};\n\n// a very naive interpretation of a valid SDP.\nSDPUtils.isValidSDP = function(blob) {\n  if (typeof blob !== 'string' || blob.length === 0) {\n    return false;\n  }\n  const lines = SDPUtils.splitLines(blob);\n  for (let i = 0; i < lines.length; i++) {\n    if (lines[i].length < 2 || lines[i].charAt(1) !== '=') {\n      return false;\n    }\n    // TODO: check the modifier a bit more.\n  }\n  return true;\n};\n\n// Expose public methods.\nif (typeof module === 'object') {\n  module.exports = SDPUtils;\n}\n","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  return _getPrototypeOf(o);\n}\nmodule.exports = _getPrototypeOf, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayWithHoles = require(\"./arrayWithHoles.js\");\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit.js\");\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\nvar nonIterableRest = require(\"./nonIterableRest.js\");\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}\nmodule.exports = _slicedToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(obj);\n}\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","const debug = require('debug');\n\nconst APP_NAME = 'protoo-client';\n\nclass Logger\n{\n\tconstructor(prefix)\n\t{\n\t\tif (prefix)\n\t\t{\n\t\t\tthis._debug = debug(`${APP_NAME}:${prefix}`);\n\t\t\tthis._warn = debug(`${APP_NAME}:WARN:${prefix}`);\n\t\t\tthis._error = debug(`${APP_NAME}:ERROR:${prefix}`);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis._debug = debug(APP_NAME);\n\t\t\tthis._warn = debug(`${APP_NAME}:WARN`);\n\t\t\tthis._error = debug(`${APP_NAME}:ERROR`);\n\t\t}\n\n\t\t/* eslint-disable no-console */\n\t\tthis._debug.log = console.info.bind(console);\n\t\tthis._warn.log = console.warn.bind(console);\n\t\tthis._error.log = console.error.bind(console);\n\t\t/* eslint-enable no-console */\n\t}\n\n\tget debug()\n\t{\n\t\treturn this._debug;\n\t}\n\n\tget warn()\n\t{\n\t\treturn this._warn;\n\t}\n\n\tget error()\n\t{\n\t\treturn this._error;\n\t}\n}\n\nmodule.exports = Logger;\n","var toPropertyKey = require(\"./toPropertyKey.js\");\nfunction _defineProperty(obj, key, value) {\n  key = toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nmodule.exports = _defineProperty, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var setPrototypeOf = require(\"./setPrototypeOf.js\");\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\nmodule.exports = _inherits, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\nvar assertThisInitialized = require(\"./assertThisInitialized.js\");\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n  return assertThisInitialized(self);\n}\nmodule.exports = _possibleConstructorReturn, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","const { version } = require('../package.json');\nconst Peer = require('./Peer');\nconst WebSocketTransport = require('./transports/WebSocketTransport');\n\n/**\n * Expose mediasoup-client version.\n *\n * @type {String}\n */\nexports.version = version;\n\n/**\n * Expose Peer class.\n *\n * @type {Class}\n */\nexports.Peer = Peer;\n\n/**\n * Expose WebSocketTransport class.\n *\n * @type {Class}\n */\nexports.WebSocketTransport = WebSocketTransport;\n","var parser = require('./parser');\nvar writer = require('./writer');\n\nexports.write = writer;\nexports.parse = parser.parse;\nexports.parseParams = parser.parseParams;\nexports.parseFmtpConfig = parser.parseFmtpConfig; // Alias of parseParams().\nexports.parsePayloads = parser.parsePayloads;\nexports.parseRemoteCandidates = parser.parseRemoteCandidates;\nexports.parseImageAttributes = parser.parseImageAttributes;\nexports.parseSimulcastStreamList = parser.parseSimulcastStreamList;\n","var _typeof = require(\"./typeof.js\")[\"default\"];\nvar toPrimitive = require(\"./toPrimitive.js\");\nfunction _toPropertyKey(arg) {\n  var key = toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}\nmodule.exports = _toPropertyKey, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","const { EventEmitter } = require('events');\nconst Logger = require('./Logger');\n\nclass EnhancedEventEmitter extends EventEmitter\n{\n\tconstructor(logger)\n\t{\n\t\tsuper();\n\t\tthis.setMaxListeners(Infinity);\n\n\t\tthis._logger = logger || new Logger('EnhancedEventEmitter');\n\t}\n\n\tsafeEmit(event, ...args)\n\t{\n\t\ttry\n\t\t{\n\t\t\tthis.emit(event, ...args);\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tthis._logger.error(\n\t\t\t\t'safeEmit() | event listener threw an error [event:%s]:%o',\n\t\t\t\tevent, error);\n\t\t}\n\t}\n\n\tasync safeEmitAsPromise(event, ...args)\n\t{\n\t\treturn new Promise((resolve, reject) =>\n\t\t{\n\t\t\tthis.safeEmit(event, ...args, resolve, reject);\n\t\t});\n\t}\n}\n\nmodule.exports = EnhancedEventEmitter;\n","const Logger = require('./Logger');\nconst { generateRandomNumber } = require('./utils');\n\nconst logger = new Logger('Message');\n\nclass Message\n{\n\tstatic parse(raw)\n\t{\n\t\tlet object;\n\t\tconst message = {};\n\n\t\ttry\n\t\t{\n\t\t\tobject = JSON.parse(raw);\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('parse() | invalid JSON: %s', error);\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (typeof object !== 'object' || Array.isArray(object))\n\t\t{\n\t\t\tlogger.error('parse() | not an object');\n\n\t\t\treturn;\n\t\t}\n\n\t\t// Request.\n\t\tif (object.request)\n\t\t{\n\t\t\tmessage.request = true;\n\n\t\t\tif (typeof object.method !== 'string')\n\t\t\t{\n\t\t\t\tlogger.error('parse() | missing/invalid method field');\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (typeof object.id !== 'number')\n\t\t\t{\n\t\t\t\tlogger.error('parse() | missing/invalid id field');\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tmessage.id = object.id;\n\t\t\tmessage.method = object.method;\n\t\t\tmessage.data = object.data || {};\n\t\t}\n\t\t// Response.\n\t\telse if (object.response)\n\t\t{\n\t\t\tmessage.response = true;\n\n\t\t\tif (typeof object.id !== 'number')\n\t\t\t{\n\t\t\t\tlogger.error('parse() | missing/invalid id field');\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tmessage.id = object.id;\n\n\t\t\t// Success.\n\t\t\tif (object.ok)\n\t\t\t{\n\t\t\t\tmessage.ok = true;\n\t\t\t\tmessage.data = object.data || {};\n\t\t\t}\n\t\t\t// Error.\n\t\t\telse\n\t\t\t{\n\t\t\t\tmessage.ok = false;\n\t\t\t\tmessage.errorCode = object.errorCode;\n\t\t\t\tmessage.errorReason = object.errorReason;\n\t\t\t}\n\t\t}\n\t\t// Notification.\n\t\telse if (object.notification)\n\t\t{\n\t\t\tmessage.notification = true;\n\n\t\t\tif (typeof object.method !== 'string')\n\t\t\t{\n\t\t\t\tlogger.error('parse() | missing/invalid method field');\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tmessage.method = object.method;\n\t\t\tmessage.data = object.data || {};\n\t\t}\n\t\t// Invalid.\n\t\telse\n\t\t{\n\t\t\tlogger.error('parse() | missing request/response field');\n\n\t\t\treturn;\n\t\t}\n\n\t\treturn message;\n\t}\n\n\tstatic createRequest(method, data)\n\t{\n\t\tconst request =\n\t\t{\n\t\t\trequest : true,\n\t\t\tid      : generateRandomNumber(),\n\t\t\tmethod  : method,\n\t\t\tdata    : data || {}\n\t\t};\n\n\t\treturn request;\n\t}\n\n\tstatic createSuccessResponse(request, data)\n\t{\n\t\tconst response =\n\t\t{\n\t\t\tresponse : true,\n\t\t\tid       : request.id,\n\t\t\tok       : true,\n\t\t\tdata     : data || {}\n\t\t};\n\n\t\treturn response;\n\t}\n\n\tstatic createErrorResponse(request, errorCode, errorReason)\n\t{\n\t\tconst response =\n\t\t{\n\t\t\tresponse    : true,\n\t\t\tid          : request.id,\n\t\t\tok          : false,\n\t\t\terrorCode   : errorCode,\n\t\t\terrorReason : errorReason\n\t\t};\n\n\t\treturn response;\n\t}\n\n\tstatic createNotification(method, data)\n\t{\n\t\tconst notification =\n\t\t{\n\t\t\tnotification : true,\n\t\t\tmethod       : method,\n\t\t\tdata         : data || {}\n\t\t};\n\n\t\treturn notification;\n\t}\n}\n\nmodule.exports = Message;\n","var grammar = module.exports = {\n  v: [{\n    name: 'version',\n    reg: /^(\\d*)$/\n  }],\n  o: [{\n    // o=- 20518 0 IN IP4 203.0.113.1\n    // NB: sessionId will be a String in most cases because it is huge\n    name: 'origin',\n    reg: /^(\\S*) (\\d*) (\\d*) (\\S*) IP(\\d) (\\S*)/,\n    names: ['username', 'sessionId', 'sessionVersion', 'netType', 'ipVer', 'address'],\n    format: '%s %s %d %s IP%d %s'\n  }],\n  // default parsing of these only (though some of these feel outdated)\n  s: [{ name: 'name' }],\n  i: [{ name: 'description' }],\n  u: [{ name: 'uri' }],\n  e: [{ name: 'email' }],\n  p: [{ name: 'phone' }],\n  z: [{ name: 'timezones' }], // TODO: this one can actually be parsed properly...\n  r: [{ name: 'repeats' }],   // TODO: this one can also be parsed properly\n  // k: [{}], // outdated thing ignored\n  t: [{\n    // t=0 0\n    name: 'timing',\n    reg: /^(\\d*) (\\d*)/,\n    names: ['start', 'stop'],\n    format: '%d %d'\n  }],\n  c: [{\n    // c=IN IP4 10.47.197.26\n    name: 'connection',\n    reg: /^IN IP(\\d) (\\S*)/,\n    names: ['version', 'ip'],\n    format: 'IN IP%d %s'\n  }],\n  b: [{\n    // b=AS:4000\n    push: 'bandwidth',\n    reg: /^(TIAS|AS|CT|RR|RS):(\\d*)/,\n    names: ['type', 'limit'],\n    format: '%s:%s'\n  }],\n  m: [{\n    // m=video 51744 RTP/AVP 126 97 98 34 31\n    // NB: special - pushes to session\n    // TODO: rtp/fmtp should be filtered by the payloads found here?\n    reg: /^(\\w*) (\\d*) ([\\w/]*)(?: (.*))?/,\n    names: ['type', 'port', 'protocol', 'payloads'],\n    format: '%s %d %s %s'\n  }],\n  a: [\n    {\n      // a=rtpmap:110 opus/48000/2\n      push: 'rtp',\n      reg: /^rtpmap:(\\d*) ([\\w\\-.]*)(?:\\s*\\/(\\d*)(?:\\s*\\/(\\S*))?)?/,\n      names: ['payload', 'codec', 'rate', 'encoding'],\n      format: function (o) {\n        return (o.encoding)\n          ? 'rtpmap:%d %s/%s/%s'\n          : o.rate\n            ? 'rtpmap:%d %s/%s'\n            : 'rtpmap:%d %s';\n      }\n    },\n    {\n      // a=fmtp:108 profile-level-id=24;object=23;bitrate=64000\n      // a=fmtp:111 minptime=10; useinbandfec=1\n      push: 'fmtp',\n      reg: /^fmtp:(\\d*) ([\\S| ]*)/,\n      names: ['payload', 'config'],\n      format: 'fmtp:%d %s'\n    },\n    {\n      // a=control:streamid=0\n      name: 'control',\n      reg: /^control:(.*)/,\n      format: 'control:%s'\n    },\n    {\n      // a=rtcp:65179 IN IP4 193.84.77.194\n      name: 'rtcp',\n      reg: /^rtcp:(\\d*)(?: (\\S*) IP(\\d) (\\S*))?/,\n      names: ['port', 'netType', 'ipVer', 'address'],\n      format: function (o) {\n        return (o.address != null)\n          ? 'rtcp:%d %s IP%d %s'\n          : 'rtcp:%d';\n      }\n    },\n    {\n      // a=rtcp-fb:98 trr-int 100\n      push: 'rtcpFbTrrInt',\n      reg: /^rtcp-fb:(\\*|\\d*) trr-int (\\d*)/,\n      names: ['payload', 'value'],\n      format: 'rtcp-fb:%s trr-int %d'\n    },\n    {\n      // a=rtcp-fb:98 nack rpsi\n      push: 'rtcpFb',\n      reg: /^rtcp-fb:(\\*|\\d*) ([\\w-_]*)(?: ([\\w-_]*))?/,\n      names: ['payload', 'type', 'subtype'],\n      format: function (o) {\n        return (o.subtype != null)\n          ? 'rtcp-fb:%s %s %s'\n          : 'rtcp-fb:%s %s';\n      }\n    },\n    {\n      // a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n      // a=extmap:1/recvonly URI-gps-string\n      // a=extmap:3 urn:ietf:params:rtp-hdrext:encrypt urn:ietf:params:rtp-hdrext:smpte-tc 25@600/24\n      push: 'ext',\n      reg: /^extmap:(\\d+)(?:\\/(\\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\\S*)(?: (\\S*))?/,\n      names: ['value', 'direction', 'encrypt-uri', 'uri', 'config'],\n      format: function (o) {\n        return (\n          'extmap:%d' +\n          (o.direction ? '/%s' : '%v') +\n          (o['encrypt-uri'] ? ' %s' : '%v') +\n          ' %s' +\n          (o.config ? ' %s' : '')\n        );\n      }\n    },\n    {\n      // a=extmap-allow-mixed\n      name: 'extmapAllowMixed',\n      reg: /^(extmap-allow-mixed)/\n    },\n    {\n      // a=crypto:1 AES_CM_128_HMAC_SHA1_80 inline:PS1uQCVeeCFCanVmcjkpPywjNWhcYD0mXXtxaVBR|2^20|1:32\n      push: 'crypto',\n      reg: /^crypto:(\\d*) ([\\w_]*) (\\S*)(?: (\\S*))?/,\n      names: ['id', 'suite', 'config', 'sessionConfig'],\n      format: function (o) {\n        return (o.sessionConfig != null)\n          ? 'crypto:%d %s %s %s'\n          : 'crypto:%d %s %s';\n      }\n    },\n    {\n      // a=setup:actpass\n      name: 'setup',\n      reg: /^setup:(\\w*)/,\n      format: 'setup:%s'\n    },\n    {\n      // a=connection:new\n      name: 'connectionType',\n      reg: /^connection:(new|existing)/,\n      format: 'connection:%s'\n    },\n    {\n      // a=mid:1\n      name: 'mid',\n      reg: /^mid:([^\\s]*)/,\n      format: 'mid:%s'\n    },\n    {\n      // a=msid:0c8b064d-d807-43b4-b434-f92a889d8587 98178685-d409-46e0-8e16-7ef0db0db64a\n      name: 'msid',\n      reg: /^msid:(.*)/,\n      format: 'msid:%s'\n    },\n    {\n      // a=ptime:20\n      name: 'ptime',\n      reg: /^ptime:(\\d*(?:\\.\\d*)*)/,\n      format: 'ptime:%d'\n    },\n    {\n      // a=maxptime:60\n      name: 'maxptime',\n      reg: /^maxptime:(\\d*(?:\\.\\d*)*)/,\n      format: 'maxptime:%d'\n    },\n    {\n      // a=sendrecv\n      name: 'direction',\n      reg: /^(sendrecv|recvonly|sendonly|inactive)/\n    },\n    {\n      // a=ice-lite\n      name: 'icelite',\n      reg: /^(ice-lite)/\n    },\n    {\n      // a=ice-ufrag:F7gI\n      name: 'iceUfrag',\n      reg: /^ice-ufrag:(\\S*)/,\n      format: 'ice-ufrag:%s'\n    },\n    {\n      // a=ice-pwd:x9cml/YzichV2+XlhiMu8g\n      name: 'icePwd',\n      reg: /^ice-pwd:(\\S*)/,\n      format: 'ice-pwd:%s'\n    },\n    {\n      // a=fingerprint:SHA-1 00:11:22:33:44:55:66:77:88:99:AA:BB:CC:DD:EE:FF:00:11:22:33\n      name: 'fingerprint',\n      reg: /^fingerprint:(\\S*) (\\S*)/,\n      names: ['type', 'hash'],\n      format: 'fingerprint:%s %s'\n    },\n    {\n      // a=candidate:0 1 UDP 2113667327 203.0.113.1 54400 typ host\n      // a=candidate:1162875081 1 udp 2113937151 192.168.34.75 60017 typ host generation 0 network-id 3 network-cost 10\n      // a=candidate:3289912957 2 udp 1845501695 193.84.77.194 60017 typ srflx raddr 192.168.34.75 rport 60017 generation 0 network-id 3 network-cost 10\n      // a=candidate:229815620 1 tcp 1518280447 192.168.150.19 60017 typ host tcptype active generation 0 network-id 3 network-cost 10\n      // a=candidate:3289912957 2 tcp 1845501695 193.84.77.194 60017 typ srflx raddr 192.168.34.75 rport 60017 tcptype passive generation 0 network-id 3 network-cost 10\n      push:'candidates',\n      reg: /^candidate:(\\S*) (\\d*) (\\S*) (\\d*) (\\S*) (\\d*) typ (\\S*)(?: raddr (\\S*) rport (\\d*))?(?: tcptype (\\S*))?(?: generation (\\d*))?(?: network-id (\\d*))?(?: network-cost (\\d*))?/,\n      names: ['foundation', 'component', 'transport', 'priority', 'ip', 'port', 'type', 'raddr', 'rport', 'tcptype', 'generation', 'network-id', 'network-cost'],\n      format: function (o) {\n        var str = 'candidate:%s %d %s %d %s %d typ %s';\n\n        str += (o.raddr != null) ? ' raddr %s rport %d' : '%v%v';\n\n        // NB: candidate has three optional chunks, so %void middles one if it's missing\n        str += (o.tcptype != null) ? ' tcptype %s' : '%v';\n\n        if (o.generation != null) {\n          str += ' generation %d';\n        }\n\n        str += (o['network-id'] != null) ? ' network-id %d' : '%v';\n        str += (o['network-cost'] != null) ? ' network-cost %d' : '%v';\n        return str;\n      }\n    },\n    {\n      // a=end-of-candidates (keep after the candidates line for readability)\n      name: 'endOfCandidates',\n      reg: /^(end-of-candidates)/\n    },\n    {\n      // a=remote-candidates:1 203.0.113.1 54400 2 203.0.113.1 54401 ...\n      name: 'remoteCandidates',\n      reg: /^remote-candidates:(.*)/,\n      format: 'remote-candidates:%s'\n    },\n    {\n      // a=ice-options:google-ice\n      name: 'iceOptions',\n      reg: /^ice-options:(\\S*)/,\n      format: 'ice-options:%s'\n    },\n    {\n      // a=ssrc:2566107569 cname:t9YU8M1UxTF8Y1A1\n      push: 'ssrcs',\n      reg: /^ssrc:(\\d*) ([\\w_-]*)(?::(.*))?/,\n      names: ['id', 'attribute', 'value'],\n      format: function (o) {\n        var str = 'ssrc:%d';\n        if (o.attribute != null) {\n          str += ' %s';\n          if (o.value != null) {\n            str += ':%s';\n          }\n        }\n        return str;\n      }\n    },\n    {\n      // a=ssrc-group:FEC 1 2\n      // a=ssrc-group:FEC-FR 3004364195 1080772241\n      push: 'ssrcGroups',\n      // token-char = %x21 / %x23-27 / %x2A-2B / %x2D-2E / %x30-39 / %x41-5A / %x5E-7E\n      reg: /^ssrc-group:([\\x21\\x23\\x24\\x25\\x26\\x27\\x2A\\x2B\\x2D\\x2E\\w]*) (.*)/,\n      names: ['semantics', 'ssrcs'],\n      format: 'ssrc-group:%s %s'\n    },\n    {\n      // a=msid-semantic: WMS Jvlam5X3SX1OP6pn20zWogvaKJz5Hjf9OnlV\n      name: 'msidSemantic',\n      reg: /^msid-semantic:\\s?(\\w*) (\\S*)/,\n      names: ['semantic', 'token'],\n      format: 'msid-semantic: %s %s' // space after ':' is not accidental\n    },\n    {\n      // a=group:BUNDLE audio video\n      push: 'groups',\n      reg: /^group:(\\w*) (.*)/,\n      names: ['type', 'mids'],\n      format: 'group:%s %s'\n    },\n    {\n      // a=rtcp-mux\n      name: 'rtcpMux',\n      reg: /^(rtcp-mux)/\n    },\n    {\n      // a=rtcp-rsize\n      name: 'rtcpRsize',\n      reg: /^(rtcp-rsize)/\n    },\n    {\n      // a=sctpmap:5000 webrtc-datachannel 1024\n      name: 'sctpmap',\n      reg: /^sctpmap:([\\w_/]*) (\\S*)(?: (\\S*))?/,\n      names: ['sctpmapNumber', 'app', 'maxMessageSize'],\n      format: function (o) {\n        return (o.maxMessageSize != null)\n          ? 'sctpmap:%s %s %s'\n          : 'sctpmap:%s %s';\n      }\n    },\n    {\n      // a=x-google-flag:conference\n      name: 'xGoogleFlag',\n      reg: /^x-google-flag:([^\\s]*)/,\n      format: 'x-google-flag:%s'\n    },\n    {\n      // a=rid:1 send max-width=1280;max-height=720;max-fps=30;depend=0\n      push: 'rids',\n      reg: /^rid:([\\d\\w]+) (\\w+)(?: ([\\S| ]*))?/,\n      names: ['id', 'direction', 'params'],\n      format: function (o) {\n        return (o.params) ? 'rid:%s %s %s' : 'rid:%s %s';\n      }\n    },\n    {\n      // a=imageattr:97 send [x=800,y=640,sar=1.1,q=0.6] [x=480,y=320] recv [x=330,y=250]\n      // a=imageattr:* send [x=800,y=640] recv *\n      // a=imageattr:100 recv [x=320,y=240]\n      push: 'imageattrs',\n      reg: new RegExp(\n        // a=imageattr:97\n        '^imageattr:(\\\\d+|\\\\*)' +\n        // send [x=800,y=640,sar=1.1,q=0.6] [x=480,y=320]\n        '[\\\\s\\\\t]+(send|recv)[\\\\s\\\\t]+(\\\\*|\\\\[\\\\S+\\\\](?:[\\\\s\\\\t]+\\\\[\\\\S+\\\\])*)' +\n        // recv [x=330,y=250]\n        '(?:[\\\\s\\\\t]+(recv|send)[\\\\s\\\\t]+(\\\\*|\\\\[\\\\S+\\\\](?:[\\\\s\\\\t]+\\\\[\\\\S+\\\\])*))?'\n      ),\n      names: ['pt', 'dir1', 'attrs1', 'dir2', 'attrs2'],\n      format: function (o) {\n        return 'imageattr:%s %s %s' + (o.dir2 ? ' %s %s' : '');\n      }\n    },\n    {\n      // a=simulcast:send 1,2,3;~4,~5 recv 6;~7,~8\n      // a=simulcast:recv 1;4,5 send 6;7\n      name: 'simulcast',\n      reg: new RegExp(\n        // a=simulcast:\n        '^simulcast:' +\n        // send 1,2,3;~4,~5\n        '(send|recv) ([a-zA-Z0-9\\\\-_~;,]+)' +\n        // space + recv 6;~7,~8\n        '(?:\\\\s?(send|recv) ([a-zA-Z0-9\\\\-_~;,]+))?' +\n        // end\n        '$'\n      ),\n      names: ['dir1', 'list1', 'dir2', 'list2'],\n      format: function (o) {\n        return 'simulcast:%s %s' + (o.dir2 ? ' %s %s' : '');\n      }\n    },\n    {\n      // old simulcast draft 03 (implemented by Firefox)\n      //   https://tools.ietf.org/html/draft-ietf-mmusic-sdp-simulcast-03\n      // a=simulcast: recv pt=97;98 send pt=97\n      // a=simulcast: send rid=5;6;7 paused=6,7\n      name: 'simulcast_03',\n      reg: /^simulcast:[\\s\\t]+([\\S+\\s\\t]+)$/,\n      names: ['value'],\n      format: 'simulcast: %s'\n    },\n    {\n      // a=framerate:25\n      // a=framerate:29.97\n      name: 'framerate',\n      reg: /^framerate:(\\d+(?:$|\\.\\d+))/,\n      format: 'framerate:%s'\n    },\n    {\n      // RFC4570\n      // a=source-filter: incl IN IP4 239.5.2.31 10.1.15.5\n      name: 'sourceFilter',\n      reg: /^source-filter: *(excl|incl) (\\S*) (IP4|IP6|\\*) (\\S*) (.*)/,\n      names: ['filterMode', 'netType', 'addressTypes', 'destAddress', 'srcList'],\n      format: 'source-filter: %s %s %s %s %s'\n    },\n    {\n      // a=bundle-only\n      name: 'bundleOnly',\n      reg: /^(bundle-only)/\n    },\n    {\n      // a=label:1\n      name: 'label',\n      reg: /^label:(.+)/,\n      format: 'label:%s'\n    },\n    {\n      // RFC version 26 for SCTP over DTLS\n      // https://tools.ietf.org/html/draft-ietf-mmusic-sctp-sdp-26#section-5\n      name: 'sctpPort',\n      reg: /^sctp-port:(\\d+)$/,\n      format: 'sctp-port:%s'\n    },\n    {\n      // RFC version 26 for SCTP over DTLS\n      // https://tools.ietf.org/html/draft-ietf-mmusic-sctp-sdp-26#section-6\n      name: 'maxMessageSize',\n      reg: /^max-message-size:(\\d+)$/,\n      format: 'max-message-size:%s'\n    },\n    {\n      // RFC7273\n      // a=ts-refclk:ptp=IEEE1588-2008:39-A7-94-FF-FE-07-CB-D0:37\n      push:'tsRefClocks',\n      reg: /^ts-refclk:([^\\s=]*)(?:=(\\S*))?/,\n      names: ['clksrc', 'clksrcExt'],\n      format: function (o) {\n        return 'ts-refclk:%s' + (o.clksrcExt != null ? '=%s' : '');\n      }\n    },\n    {\n      // RFC7273\n      // a=mediaclk:direct=963214424\n      name:'mediaClk',\n      reg: /^mediaclk:(?:id=(\\S*))? *([^\\s=]*)(?:=(\\S*))?(?: *rate=(\\d+)\\/(\\d+))?/,\n      names: ['id', 'mediaClockName', 'mediaClockValue', 'rateNumerator', 'rateDenominator'],\n      format: function (o) {\n        var str = 'mediaclk:';\n        str += (o.id != null ? 'id=%s %s' : '%v%s');\n        str += (o.mediaClockValue != null ? '=%s' : '');\n        str += (o.rateNumerator != null ? ' rate=%s' : '');\n        str += (o.rateDenominator != null ? '/%s' : '');\n        return str;\n      }\n    },\n    {\n      // a=keywds:keywords\n      name: 'keywords',\n      reg: /^keywds:(.+)$/,\n      format: 'keywds:%s'\n    },\n    {\n      // a=content:main\n      name: 'content',\n      reg: /^content:(.+)/,\n      format: 'content:%s'\n    },\n    // BFCP https://tools.ietf.org/html/rfc4583\n    {\n      // a=floorctrl:c-s\n      name: 'bfcpFloorCtrl',\n      reg: /^floorctrl:(c-only|s-only|c-s)/,\n      format: 'floorctrl:%s'\n    },\n    {\n      // a=confid:1\n      name: 'bfcpConfId',\n      reg: /^confid:(\\d+)/,\n      format: 'confid:%s'\n    },\n    {\n      // a=userid:1\n      name: 'bfcpUserId',\n      reg: /^userid:(\\d+)/,\n      format: 'userid:%s'\n    },\n    {\n      // a=floorid:1\n      name: 'bfcpFloorId',\n      reg: /^floorid:(.+) (?:m-stream|mstrm):(.+)/,\n      names: ['id', 'mStream'],\n      format: 'floorid:%s mstrm:%s'\n    },\n    {\n      // any a= that we don't understand is kept verbatim on media.invalid\n      push: 'invalid',\n      names: ['value']\n    }\n  ]\n};\n\n// set sensible defaults to avoid polluting the grammar with boring details\nObject.keys(grammar).forEach(function (key) {\n  var objs = grammar[key];\n  objs.forEach(function (obj) {\n    if (!obj.reg) {\n      obj.reg = /(.*)/;\n    }\n    if (!obj.format) {\n      obj.format = '%s';\n    }\n  });\n});\n","var _typeof = require(\"./typeof.js\")[\"default\"];\nfunction _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\nmodule.exports = _toPrimitive, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\nmodule.exports = _arrayWithHoles, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _iterableToArrayLimit(arr, i) {\n  var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"];\n  if (null != _i) {\n    var _s,\n      _e,\n      _x,\n      _r,\n      _arr = [],\n      _n = !0,\n      _d = !1;\n    try {\n      if (_x = (_i = _i.call(arr)).next, 0 === i) {\n        if (Object(_i) !== _i) return;\n        _n = !1;\n      } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0);\n    } catch (err) {\n      _d = !0, _e = err;\n    } finally {\n      try {\n        if (!_n && null != _i[\"return\"] && (_r = _i[\"return\"](), Object(_r) !== _r)) return;\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n    return _arr;\n  }\n}\nmodule.exports = _iterableToArrayLimit, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\nmodule.exports = _unsupportedIterableToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nmodule.exports = _arrayLikeToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nmodule.exports = _nonIterableRest, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  return _setPrototypeOf(o, p);\n}\nmodule.exports = _setPrototypeOf, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}\nmodule.exports = _assertThisInitialized, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\nfunction _regeneratorRuntime() {\n  \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */\n  module.exports = _regeneratorRuntime = function _regeneratorRuntime() {\n    return exports;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  var exports = {},\n    Op = Object.prototype,\n    hasOwn = Op.hasOwnProperty,\n    defineProperty = Object.defineProperty || function (obj, key, desc) {\n      obj[key] = desc.value;\n    },\n    $Symbol = \"function\" == typeof Symbol ? Symbol : {},\n    iteratorSymbol = $Symbol.iterator || \"@@iterator\",\n    asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\",\n    toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n  function define(obj, key, value) {\n    return Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), obj[key];\n  }\n  try {\n    define({}, \"\");\n  } catch (err) {\n    define = function define(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator,\n      generator = Object.create(protoGenerator.prototype),\n      context = new Context(tryLocsList || []);\n    return defineProperty(generator, \"_invoke\", {\n      value: makeInvokeMethod(innerFn, self, context)\n    }), generator;\n  }\n  function tryCatch(fn, obj, arg) {\n    try {\n      return {\n        type: \"normal\",\n        arg: fn.call(obj, arg)\n      };\n    } catch (err) {\n      return {\n        type: \"throw\",\n        arg: err\n      };\n    }\n  }\n  exports.wrap = wrap;\n  var ContinueSentinel = {};\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n  var getProto = Object.getPrototypeOf,\n    NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype);\n  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function (method) {\n      define(prototype, method, function (arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (\"throw\" !== record.type) {\n        var result = record.arg,\n          value = result.value;\n        return value && \"object\" == _typeof(value) && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) {\n          invoke(\"next\", value, resolve, reject);\n        }, function (err) {\n          invoke(\"throw\", err, resolve, reject);\n        }) : PromiseImpl.resolve(value).then(function (unwrapped) {\n          result.value = unwrapped, resolve(result);\n        }, function (error) {\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n      reject(record.arg);\n    }\n    var previousPromise;\n    defineProperty(this, \"_invoke\", {\n      value: function value(method, arg) {\n        function callInvokeWithMethodAndArg() {\n          return new PromiseImpl(function (resolve, reject) {\n            invoke(method, arg, resolve, reject);\n          });\n        }\n        return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n      }\n    });\n  }\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = \"suspendedStart\";\n    return function (method, arg) {\n      if (\"executing\" === state) throw new Error(\"Generator is already running\");\n      if (\"completed\" === state) {\n        if (\"throw\" === method) throw arg;\n        return doneResult();\n      }\n      for (context.method = method, context.arg = arg;;) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n        if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) {\n          if (\"suspendedStart\" === state) throw state = \"completed\", context.arg;\n          context.dispatchException(context.arg);\n        } else \"return\" === context.method && context.abrupt(\"return\", context.arg);\n        state = \"executing\";\n        var record = tryCatch(innerFn, self, context);\n        if (\"normal\" === record.type) {\n          if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue;\n          return {\n            value: record.arg,\n            done: context.done\n          };\n        }\n        \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg);\n      }\n    };\n  }\n  function maybeInvokeDelegate(delegate, context) {\n    var methodName = context.method,\n      method = delegate.iterator[methodName];\n    if (undefined === method) return context.delegate = null, \"throw\" === methodName && delegate.iterator[\"return\"] && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method) || \"return\" !== methodName && (context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a '\" + methodName + \"' method\")), ContinueSentinel;\n    var record = tryCatch(method, delegate.iterator, context.arg);\n    if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel;\n    var info = record.arg;\n    return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel);\n  }\n  function pushTryEntry(locs) {\n    var entry = {\n      tryLoc: locs[0]\n    };\n    1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry);\n  }\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\", delete record.arg, entry.completion = record;\n  }\n  function Context(tryLocsList) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0);\n  }\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) return iteratorMethod.call(iterable);\n      if (\"function\" == typeof iterable.next) return iterable;\n      if (!isNaN(iterable.length)) {\n        var i = -1,\n          next = function next() {\n            for (; ++i < iterable.length;) if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next;\n            return next.value = undefined, next.done = !0, next;\n          };\n        return next.next = next;\n      }\n    }\n    return {\n      next: doneResult\n    };\n  }\n  function doneResult() {\n    return {\n      value: undefined,\n      done: !0\n    };\n  }\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, defineProperty(Gp, \"constructor\", {\n    value: GeneratorFunctionPrototype,\n    configurable: !0\n  }), defineProperty(GeneratorFunctionPrototype, \"constructor\", {\n    value: GeneratorFunction,\n    configurable: !0\n  }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) {\n    var ctor = \"function\" == typeof genFun && genFun.constructor;\n    return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name));\n  }, exports.mark = function (genFun) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun;\n  }, exports.awrap = function (arg) {\n    return {\n      __await: arg\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    void 0 === PromiseImpl && (PromiseImpl = Promise);\n    var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl);\n    return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) {\n      return result.done ? result.value : iter.next();\n    });\n  }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () {\n    return this;\n  }), define(Gp, \"toString\", function () {\n    return \"[object Generator]\";\n  }), exports.keys = function (val) {\n    var object = Object(val),\n      keys = [];\n    for (var key in object) keys.push(key);\n    return keys.reverse(), function next() {\n      for (; keys.length;) {\n        var key = keys.pop();\n        if (key in object) return next.value = key, next.done = !1, next;\n      }\n      return next.done = !0, next;\n    };\n  }, exports.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function reset(skipTempReset) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined);\n    },\n    stop: function stop() {\n      this.done = !0;\n      var rootRecord = this.tryEntries[0].completion;\n      if (\"throw\" === rootRecord.type) throw rootRecord.arg;\n      return this.rval;\n    },\n    dispatchException: function dispatchException(exception) {\n      if (this.done) throw exception;\n      var context = this;\n      function handle(loc, caught) {\n        return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught;\n      }\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i],\n          record = entry.completion;\n        if (\"root\" === entry.tryLoc) return handle(\"end\");\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\"),\n            hasFinally = hasOwn.call(entry, \"finallyLoc\");\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n          } else {\n            if (!hasFinally) throw new Error(\"try statement without catch or finally\");\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n      finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null);\n      var record = finallyEntry ? finallyEntry.completion : {};\n      return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record);\n    },\n    complete: function complete(record, afterLoc) {\n      if (\"throw\" === record.type) throw record.arg;\n      return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel;\n    },\n    finish: function finish(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel;\n      }\n    },\n    \"catch\": function _catch(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (\"throw\" === record.type) {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(iterable, resultName, nextLoc) {\n      return this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel;\n    }\n  }, exports;\n}\nmodule.exports = _regeneratorRuntime, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","const Logger = require('./Logger');\nconst EnhancedEventEmitter = require('./EnhancedEventEmitter');\nconst Message = require('./Message');\n\nconst logger = new Logger('Peer');\n\nclass Peer extends EnhancedEventEmitter\n{\n\t/**\n\t * @param {protoo.Transport} transport\n\t *\n\t * @emits open\n\t * @emits {currentAttempt: Number} failed\n\t * @emits disconnected\n\t * @emits close\n\t * @emits {request: protoo.Request, accept: Function, reject: Function} request\n\t * @emits {notification: protoo.Notification} notification\n\t */\n\tconstructor(transport)\n\t{\n\t\tsuper(logger);\n\n\t\tlogger.debug('constructor()');\n\n\t\t// Closed flag.\n\t\t// @type {Boolean}\n\t\tthis._closed = false;\n\n\t\t// Transport.\n\t\t// @type {protoo.Transport}\n\t\tthis._transport = transport;\n\n\t\t// Connected flag.\n\t\t// @type {Boolean}\n\t\tthis._connected = false;\n\n\t\t// Custom data object.\n\t\t// @type {Object}\n\t\tthis._data = {};\n\n\t\t// Map of pending sent request objects indexed by request id.\n\t\t// @type {Map<Number, Object>}\n\t\tthis._sents = new Map();\n\n\t\t// Handle transport.\n\t\tthis._handleTransport();\n\t}\n\n\t/**\n\t * Whether the Peer is closed.\n\t *\n\t * @returns {Boolean}\n\t */\n\tget closed()\n\t{\n\t\treturn this._closed;\n\t}\n\n\t/**\n\t * Whether the Peer is connected.\n\t *\n\t * @returns {Boolean}\n\t */\n\tget connected()\n\t{\n\t\treturn this._connected;\n\t}\n\n\t/**\n\t * App custom data.\n\t *\n\t * @returns {Object}\n\t */\n\tget data()\n\t{\n\t\treturn this._data;\n\t}\n\n\t/**\n\t * Invalid setter.\n\t */\n\tset data(data) // eslint-disable-line no-unused-vars\n\t{\n\t\tthrow new Error('cannot override data object');\n\t}\n\n\t/**\n\t * Close this Peer and its Transport.\n\t */\n\tclose()\n\t{\n\t\tif (this._closed)\n\t\t\treturn;\n\n\t\tlogger.debug('close()');\n\n\t\tthis._closed = true;\n\t\tthis._connected = false;\n\n\t\t// Close Transport.\n\t\tthis._transport.close();\n\n\t\t// Close every pending sent.\n\t\tfor (const sent of this._sents.values())\n\t\t{\n\t\t\tsent.close();\n\t\t}\n\n\t\t// Emit 'close' event.\n\t\tthis.safeEmit('close');\n\t}\n\n\t/**\n\t * Send a protoo request to the server-side Room.\n\t *\n\t * @param {String} method\n\t * @param {Object} [data]\n\t *\n\t * @async\n\t * @returns {Object} The response data Object if a success response is received.\n\t */\n\tasync request(method, data = undefined)\n\t{\n\t\tconst request = Message.createRequest(method, data);\n\n\t\tthis._logger.debug('request() [method:%s, id:%s]', method, request.id);\n\n\t\t// This may throw.\n\t\tawait this._transport.send(request);\n\n\t\treturn new Promise((pResolve, pReject) =>\n\t\t{\n\t\t\tconst timeout = 1500 * (15 + (0.1 * this._sents.size));\n\t\t\tconst sent =\n\t\t\t{\n\t\t\t\tid      : request.id,\n\t\t\t\tmethod  : request.method,\n\t\t\t\tresolve : (data2) =>\n\t\t\t\t{\n\t\t\t\t\tif (!this._sents.delete(request.id))\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\tclearTimeout(sent.timer);\n\t\t\t\t\tpResolve(data2);\n\t\t\t\t},\n\t\t\t\treject : (error) =>\n\t\t\t\t{\n\t\t\t\t\tif (!this._sents.delete(request.id))\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\tclearTimeout(sent.timer);\n\t\t\t\t\tpReject(error);\n\t\t\t\t},\n\t\t\t\ttimer : setTimeout(() =>\n\t\t\t\t{\n\t\t\t\t\tif (!this._sents.delete(request.id))\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\tpReject(new Error('request timeout'));\n\t\t\t\t}, timeout),\n\t\t\t\tclose : () =>\n\t\t\t\t{\n\t\t\t\t\tclearTimeout(sent.timer);\n\t\t\t\t\tpReject(new Error('peer closed'));\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// Add sent stuff to the map.\n\t\t\tthis._sents.set(request.id, sent);\n\t\t});\n\t}\n\n\t/**\n\t * Send a protoo notification to the server-side Room.\n\t *\n\t * @param {String} method\n\t * @param {Object} [data]\n\t *\n\t * @async\n\t */\n\tasync notify(method, data = undefined)\n\t{\n\t\tconst notification = Message.createNotification(method, data);\n\n\t\tthis._logger.debug('notify() [method:%s]', method);\n\n\t\t// This may throw.\n\t\tawait this._transport.send(notification);\n\t}\n\n\t_handleTransport()\n\t{\n\t\tif (this._transport.closed)\n\t\t{\n\t\t\tthis._closed = true;\n\n\t\t\tsetTimeout(() =>\n\t\t\t{\n\t\t\t\tif (this._closed)\n\t\t\t\t\treturn;\n\n\t\t\t\tthis._connected = false;\n\n\t\t\t\tthis.safeEmit('close');\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis._transport.on('open', () =>\n\t\t{\n\t\t\tif (this._closed)\n\t\t\t\treturn;\n\n\t\t\tlogger.debug('emit \"open\"');\n\n\t\t\tthis._connected = true;\n\n\t\t\tthis.safeEmit('open');\n\t\t});\n\n\t\tthis._transport.on('disconnected', () =>\n\t\t{\n\t\t\tif (this._closed)\n\t\t\t\treturn;\n\n\t\t\tlogger.debug('emit \"disconnected\"');\n\n\t\t\tthis._connected = false;\n\n\t\t\tthis.safeEmit('disconnected');\n\t\t});\n\n\t\tthis._transport.on('failed', (currentAttempt) =>\n\t\t{\n\t\t\tif (this._closed)\n\t\t\t\treturn;\n\n\t\t\tlogger.debug('emit \"failed\" [currentAttempt:%s]', currentAttempt);\n\n\t\t\tthis._connected = false;\n\n\t\t\tthis.safeEmit('failed', currentAttempt);\n\t\t});\n\n\t\tthis._transport.on('close', () =>\n\t\t{\n\t\t\tif (this._closed)\n\t\t\t\treturn;\n\n\t\t\tthis._closed = true;\n\n\t\t\tlogger.debug('emit \"close\"');\n\n\t\t\tthis._connected = false;\n\n\t\t\tthis.safeEmit('close');\n\t\t});\n\n\t\tthis._transport.on('message', (message) =>\n\t\t{\n\t\t\tif (message.request)\n\t\t\t\tthis._handleRequest(message);\n\t\t\telse if (message.response)\n\t\t\t\tthis._handleResponse(message);\n\t\t\telse if (message.notification)\n\t\t\t\tthis._handleNotification(message);\n\t\t});\n\t}\n\n\t_handleRequest(request)\n\t{\n\t\ttry\n\t\t{\n\t\t\tthis.emit('request',\n\t\t\t\t// Request.\n\t\t\t\trequest,\n\t\t\t\t// accept() function.\n\t\t\t\t(data) =>\n\t\t\t\t{\n\t\t\t\t\tconst response = Message.createSuccessResponse(request, data);\n\n\t\t\t\t\tthis._transport.send(response)\n\t\t\t\t\t\t.catch(() => {});\n\t\t\t\t},\n\t\t\t\t// reject() function.\n\t\t\t\t(errorCode, errorReason) =>\n\t\t\t\t{\n\t\t\t\t\tif (errorCode instanceof Error)\n\t\t\t\t\t{\n\t\t\t\t\t\terrorReason = errorCode.message;\n\t\t\t\t\t\terrorCode = 500;\n\t\t\t\t\t}\n\t\t\t\t\telse if (typeof errorCode === 'number' && errorReason instanceof Error)\n\t\t\t\t\t{\n\t\t\t\t\t\terrorReason = errorReason.message;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst response =\n\t\t\t\t\t\tMessage.createErrorResponse(request, errorCode, errorReason);\n\n\t\t\t\t\tthis._transport.send(response)\n\t\t\t\t\t\t.catch(() => {});\n\t\t\t\t});\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tconst response = Message.createErrorResponse(request, 500, String(error));\n\n\t\t\tthis._transport.send(response)\n\t\t\t\t.catch(() => {});\n\t\t}\n\t}\n\n\t_handleResponse(response)\n\t{\n\t\tconst sent = this._sents.get(response.id);\n\n\t\tif (!sent)\n\t\t{\n\t\t\tlogger.error(\n\t\t\t\t'received response does not match any sent request [id:%s]', response.id);\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (response.ok)\n\t\t{\n\t\t\tsent.resolve(response.data);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst error = new Error(response.errorReason);\n\n\t\t\terror.code = response.errorCode;\n\t\t\tsent.reject(error);\n\t\t}\n\t}\n\n\t_handleNotification(notification)\n\t{\n\t\tthis.safeEmit('notification', notification);\n\t}\n}\n\nmodule.exports = Peer;\n","/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\n\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\nexports.destroy = (() => {\n\tlet warned = false;\n\n\treturn () => {\n\t\tif (!warned) {\n\t\t\twarned = true;\n\t\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t\t}\n\t};\n})();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n\t'#0000CC',\n\t'#0000FF',\n\t'#0033CC',\n\t'#0033FF',\n\t'#0066CC',\n\t'#0066FF',\n\t'#0099CC',\n\t'#0099FF',\n\t'#00CC00',\n\t'#00CC33',\n\t'#00CC66',\n\t'#00CC99',\n\t'#00CCCC',\n\t'#00CCFF',\n\t'#3300CC',\n\t'#3300FF',\n\t'#3333CC',\n\t'#3333FF',\n\t'#3366CC',\n\t'#3366FF',\n\t'#3399CC',\n\t'#3399FF',\n\t'#33CC00',\n\t'#33CC33',\n\t'#33CC66',\n\t'#33CC99',\n\t'#33CCCC',\n\t'#33CCFF',\n\t'#6600CC',\n\t'#6600FF',\n\t'#6633CC',\n\t'#6633FF',\n\t'#66CC00',\n\t'#66CC33',\n\t'#9900CC',\n\t'#9900FF',\n\t'#9933CC',\n\t'#9933FF',\n\t'#99CC00',\n\t'#99CC33',\n\t'#CC0000',\n\t'#CC0033',\n\t'#CC0066',\n\t'#CC0099',\n\t'#CC00CC',\n\t'#CC00FF',\n\t'#CC3300',\n\t'#CC3333',\n\t'#CC3366',\n\t'#CC3399',\n\t'#CC33CC',\n\t'#CC33FF',\n\t'#CC6600',\n\t'#CC6633',\n\t'#CC9900',\n\t'#CC9933',\n\t'#CCCC00',\n\t'#CCCC33',\n\t'#FF0000',\n\t'#FF0033',\n\t'#FF0066',\n\t'#FF0099',\n\t'#FF00CC',\n\t'#FF00FF',\n\t'#FF3300',\n\t'#FF3333',\n\t'#FF3366',\n\t'#FF3399',\n\t'#FF33CC',\n\t'#FF33FF',\n\t'#FF6600',\n\t'#FF6633',\n\t'#FF9900',\n\t'#FF9933',\n\t'#FFCC00',\n\t'#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\n// eslint-disable-next-line complexity\nfunction useColors() {\n\t// NB: In an Electron preload script, document will be defined but not fully\n\t// initialized. Since we know we're in Chrome, we'll just detect this case\n\t// explicitly\n\tif (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n\t\treturn true;\n\t}\n\n\t// Internet Explorer and Edge do not support colors.\n\tif (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n\t\treturn false;\n\t}\n\n\t// Is webkit? http://stackoverflow.com/a/16459606/376773\n\t// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\treturn (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n\t\t// Is firebug? http://stackoverflow.com/a/398120/376773\n\t\t(typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n\t\t// Is firefox >= v31?\n\t\t// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n\t\t// Double check webkit in userAgent just in case we are in a worker\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\targs[0] = (this.useColors ? '%c' : '') +\n\t\tthis.namespace +\n\t\t(this.useColors ? ' %c' : ' ') +\n\t\targs[0] +\n\t\t(this.useColors ? '%c ' : ' ') +\n\t\t'+' + module.exports.humanize(this.diff);\n\n\tif (!this.useColors) {\n\t\treturn;\n\t}\n\n\tconst c = 'color: ' + this.color;\n\targs.splice(1, 0, c, 'color: inherit');\n\n\t// The final \"%c\" is somewhat tricky, because there could be other\n\t// arguments passed either before or after the %c, so we need to\n\t// figure out the correct index to insert the CSS into\n\tlet index = 0;\n\tlet lastC = 0;\n\targs[0].replace(/%[a-zA-Z%]/g, match => {\n\t\tif (match === '%%') {\n\t\t\treturn;\n\t\t}\n\t\tindex++;\n\t\tif (match === '%c') {\n\t\t\t// We only are interested in the *last* %c\n\t\t\t// (the user may have provided their own)\n\t\t\tlastC = index;\n\t\t}\n\t});\n\n\targs.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.debug()` when available.\n * No-op when `console.debug` is not a \"function\".\n * If `console.debug` is not available, falls back\n * to `console.log`.\n *\n * @api public\n */\nexports.log = console.debug || console.log || (() => {});\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\ttry {\n\t\tif (namespaces) {\n\t\t\texports.storage.setItem('debug', namespaces);\n\t\t} else {\n\t\t\texports.storage.removeItem('debug');\n\t\t}\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\nfunction load() {\n\tlet r;\n\ttry {\n\t\tr = exports.storage.getItem('debug');\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n\n\t// If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\tif (!r && typeof process !== 'undefined' && 'env' in process) {\n\t\tr = process.env.DEBUG;\n\t}\n\n\treturn r;\n}\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n\ttry {\n\t\t// TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n\t\t// The Browser also has localStorage in the global context.\n\t\treturn localStorage;\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n\ttry {\n\t\treturn JSON.stringify(v);\n\t} catch (error) {\n\t\treturn '[UnexpectedJSONParseError]: ' + error.message;\n\t}\n};\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\n\nfunction setup(env) {\n\tcreateDebug.debug = createDebug;\n\tcreateDebug.default = createDebug;\n\tcreateDebug.coerce = coerce;\n\tcreateDebug.disable = disable;\n\tcreateDebug.enable = enable;\n\tcreateDebug.enabled = enabled;\n\tcreateDebug.humanize = require('ms');\n\tcreateDebug.destroy = destroy;\n\n\tObject.keys(env).forEach(key => {\n\t\tcreateDebug[key] = env[key];\n\t});\n\n\t/**\n\t* The currently active debug mode names, and names to skip.\n\t*/\n\n\tcreateDebug.names = [];\n\tcreateDebug.skips = [];\n\n\t/**\n\t* Map of special \"%n\" handling functions, for the debug \"format\" argument.\n\t*\n\t* Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n\t*/\n\tcreateDebug.formatters = {};\n\n\t/**\n\t* Selects a color for a debug namespace\n\t* @param {String} namespace The namespace string for the debug instance to be colored\n\t* @return {Number|String} An ANSI color code for the given namespace\n\t* @api private\n\t*/\n\tfunction selectColor(namespace) {\n\t\tlet hash = 0;\n\n\t\tfor (let i = 0; i < namespace.length; i++) {\n\t\t\thash = ((hash << 5) - hash) + namespace.charCodeAt(i);\n\t\t\thash |= 0; // Convert to 32bit integer\n\t\t}\n\n\t\treturn createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n\t}\n\tcreateDebug.selectColor = selectColor;\n\n\t/**\n\t* Create a debugger with the given `namespace`.\n\t*\n\t* @param {String} namespace\n\t* @return {Function}\n\t* @api public\n\t*/\n\tfunction createDebug(namespace) {\n\t\tlet prevTime;\n\t\tlet enableOverride = null;\n\t\tlet namespacesCache;\n\t\tlet enabledCache;\n\n\t\tfunction debug(...args) {\n\t\t\t// Disabled?\n\t\t\tif (!debug.enabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst self = debug;\n\n\t\t\t// Set `diff` timestamp\n\t\t\tconst curr = Number(new Date());\n\t\t\tconst ms = curr - (prevTime || curr);\n\t\t\tself.diff = ms;\n\t\t\tself.prev = prevTime;\n\t\t\tself.curr = curr;\n\t\t\tprevTime = curr;\n\n\t\t\targs[0] = createDebug.coerce(args[0]);\n\n\t\t\tif (typeof args[0] !== 'string') {\n\t\t\t\t// Anything else let's inspect with %O\n\t\t\t\targs.unshift('%O');\n\t\t\t}\n\n\t\t\t// Apply any `formatters` transformations\n\t\t\tlet index = 0;\n\t\t\targs[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format) => {\n\t\t\t\t// If we encounter an escaped % then don't increase the array index\n\t\t\t\tif (match === '%%') {\n\t\t\t\t\treturn '%';\n\t\t\t\t}\n\t\t\t\tindex++;\n\t\t\t\tconst formatter = createDebug.formatters[format];\n\t\t\t\tif (typeof formatter === 'function') {\n\t\t\t\t\tconst val = args[index];\n\t\t\t\t\tmatch = formatter.call(self, val);\n\n\t\t\t\t\t// Now we need to remove `args[index]` since it's inlined in the `format`\n\t\t\t\t\targs.splice(index, 1);\n\t\t\t\t\tindex--;\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\t// Apply env-specific formatting (colors, etc.)\n\t\t\tcreateDebug.formatArgs.call(self, args);\n\n\t\t\tconst logFn = self.log || createDebug.log;\n\t\t\tlogFn.apply(self, args);\n\t\t}\n\n\t\tdebug.namespace = namespace;\n\t\tdebug.useColors = createDebug.useColors();\n\t\tdebug.color = createDebug.selectColor(namespace);\n\t\tdebug.extend = extend;\n\t\tdebug.destroy = createDebug.destroy; // XXX Temporary. Will be removed in the next major release.\n\n\t\tObject.defineProperty(debug, 'enabled', {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: false,\n\t\t\tget: () => {\n\t\t\t\tif (enableOverride !== null) {\n\t\t\t\t\treturn enableOverride;\n\t\t\t\t}\n\t\t\t\tif (namespacesCache !== createDebug.namespaces) {\n\t\t\t\t\tnamespacesCache = createDebug.namespaces;\n\t\t\t\t\tenabledCache = createDebug.enabled(namespace);\n\t\t\t\t}\n\n\t\t\t\treturn enabledCache;\n\t\t\t},\n\t\t\tset: v => {\n\t\t\t\tenableOverride = v;\n\t\t\t}\n\t\t});\n\n\t\t// Env-specific initialization logic for debug instances\n\t\tif (typeof createDebug.init === 'function') {\n\t\t\tcreateDebug.init(debug);\n\t\t}\n\n\t\treturn debug;\n\t}\n\n\tfunction extend(namespace, delimiter) {\n\t\tconst newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n\t\tnewDebug.log = this.log;\n\t\treturn newDebug;\n\t}\n\n\t/**\n\t* Enables a debug mode by namespaces. This can include modes\n\t* separated by a colon and wildcards.\n\t*\n\t* @param {String} namespaces\n\t* @api public\n\t*/\n\tfunction enable(namespaces) {\n\t\tcreateDebug.save(namespaces);\n\t\tcreateDebug.namespaces = namespaces;\n\n\t\tcreateDebug.names = [];\n\t\tcreateDebug.skips = [];\n\n\t\tlet i;\n\t\tconst split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n\t\tconst len = split.length;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (!split[i]) {\n\t\t\t\t// ignore empty strings\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tnamespaces = split[i].replace(/\\*/g, '.*?');\n\n\t\t\tif (namespaces[0] === '-') {\n\t\t\t\tcreateDebug.skips.push(new RegExp('^' + namespaces.slice(1) + '$'));\n\t\t\t} else {\n\t\t\t\tcreateDebug.names.push(new RegExp('^' + namespaces + '$'));\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t* Disable debug output.\n\t*\n\t* @return {String} namespaces\n\t* @api public\n\t*/\n\tfunction disable() {\n\t\tconst namespaces = [\n\t\t\t...createDebug.names.map(toNamespace),\n\t\t\t...createDebug.skips.map(toNamespace).map(namespace => '-' + namespace)\n\t\t].join(',');\n\t\tcreateDebug.enable('');\n\t\treturn namespaces;\n\t}\n\n\t/**\n\t* Returns true if the given mode name is enabled, false otherwise.\n\t*\n\t* @param {String} name\n\t* @return {Boolean}\n\t* @api public\n\t*/\n\tfunction enabled(name) {\n\t\tif (name[name.length - 1] === '*') {\n\t\t\treturn true;\n\t\t}\n\n\t\tlet i;\n\t\tlet len;\n\n\t\tfor (i = 0, len = createDebug.skips.length; i < len; i++) {\n\t\t\tif (createDebug.skips[i].test(name)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0, len = createDebug.names.length; i < len; i++) {\n\t\t\tif (createDebug.names[i].test(name)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t* Convert regexp to namespace\n\t*\n\t* @param {RegExp} regxep\n\t* @return {String} namespace\n\t* @api private\n\t*/\n\tfunction toNamespace(regexp) {\n\t\treturn regexp.toString()\n\t\t\t.substring(2, regexp.toString().length - 2)\n\t\t\t.replace(/\\.\\*\\?$/, '*');\n\t}\n\n\t/**\n\t* Coerce `val`.\n\t*\n\t* @param {Mixed} val\n\t* @return {Mixed}\n\t* @api private\n\t*/\n\tfunction coerce(val) {\n\t\tif (val instanceof Error) {\n\t\t\treturn val.stack || val.message;\n\t\t}\n\t\treturn val;\n\t}\n\n\t/**\n\t* XXX DO NOT USE. This is a temporary stub function.\n\t* XXX It WILL be removed in the next major release.\n\t*/\n\tfunction destroy() {\n\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t}\n\n\tcreateDebug.enable(createDebug.load());\n\n\treturn createDebug;\n}\n\nmodule.exports = setup;\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n","/**\n * Generates a random positive integer.\n *\n * @returns {Number}\n */\nexports.generateRandomNumber = function()\n{\n\treturn Math.round(Math.random() * 10000000);\n};\n","const W3CWebSocket = require('websocket').w3cwebsocket;\nconst retry = require('retry');\nconst Logger = require('../Logger');\nconst EnhancedEventEmitter = require('../EnhancedEventEmitter');\nconst Message = require('../Message');\n\nconst WS_SUBPROTOCOL = 'protoo';\nconst DEFAULT_RETRY_OPTIONS =\n{\n\tretries    : 10,\n\tfactor     : 2,\n\tminTimeout : 1 * 1000,\n\tmaxTimeout : 8 * 1000\n};\n\nconst logger = new Logger('WebSocketTransport');\n\nclass WebSocketTransport extends EnhancedEventEmitter\n{\n\t/**\n\t * @param {String} url - WebSocket URL.\n\t * @param {Object} [options] - Options for WebSocket-Node.W3CWebSocket and retry.\n\t */\n\tconstructor(url, options)\n\t{\n\t\tsuper(logger);\n\n\t\tlogger.debug('constructor() [url:%s, options:%o]', url, options);\n\n\t\t// Closed flag.\n\t\t// @type {Boolean}\n\t\tthis._closed = false;\n\n\t\t// WebSocket URL.\n\t\t// @type {String}\n\t\tthis._url = url;\n\n\t\t// Options.\n\t\t// @type {Object}\n\t\tthis._options = options || {};\n\n\t\t// WebSocket instance.\n\t\t// @type {WebSocket}\n\t\tthis._ws = null;\n\n\t\t// Run the WebSocket.\n\t\tthis._runWebSocket();\n\t}\n\n\tget closed()\n\t{\n\t\treturn this._closed;\n\t}\n\n\tclose()\n\t{\n\t\tif (this._closed)\n\t\t\treturn;\n\n\t\tlogger.debug('close()');\n\n\t\t// Don't wait for the WebSocket 'close' event, do it now.\n\t\tthis._closed = true;\n\t\tthis.safeEmit('close');\n\n\t\ttry\n\t\t{\n\t\t\tthis._ws.onopen = null;\n\t\t\tthis._ws.onclose = null;\n\t\t\tthis._ws.onerror = null;\n\t\t\tthis._ws.onmessage = null;\n\t\t\tthis._ws.close();\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.error('close() | error closing the WebSocket: %o', error);\n\t\t}\n\t}\n\n\tasync send(message)\n\t{\n\t\tif (this._closed)\n\t\t\tthrow new Error('transport closed');\n\n\t\ttry\n\t\t{\n\t\t\tthis._ws.send(JSON.stringify(message));\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tlogger.warn('send() failed:%o', error);\n\n\t\t\tthrow error;\n\t\t}\n\t}\n\n\t_runWebSocket()\n\t{\n\t\tconst operation =\n\t\t\tretry.operation(this._options.retry || DEFAULT_RETRY_OPTIONS);\n\n\t\tlet wasConnected = false;\n\n\t\toperation.attempt((currentAttempt) =>\n\t\t{\n\t\t\tif (this._closed)\n\t\t\t{\n\t\t\t\toperation.stop();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlogger.debug('_runWebSocket() [currentAttempt:%s]', currentAttempt);\n\n\t\t\tthis._ws = new W3CWebSocket(\n\t\t\t\tthis._url,\n\t\t\t\tundefined,\n\t\t\t\tthis._options.origin,\n\t\t\t\tthis._options.headers,\n\t\t\t\tthis._options.requestOptions,\n\t\t\t\tthis._options.clientConfig);\n\n\t\t\tthis._ws.onopen = () =>\n\t\t\t{\n\t\t\t\tif (this._closed)\n\t\t\t\t\treturn;\n\n\t\t\t\twasConnected = true;\n\n\t\t\t\t// Emit 'open' event.\n\t\t\t\tthis.safeEmit('open');\n\t\t\t};\n\n\t\t\tthis._ws.onclose = (event) =>\n\t\t\t{\n\t\t\t\tif (this._closed)\n\t\t\t\t\treturn;\n\n\t\t\t\tlogger.warn(\n\t\t\t\t\t'WebSocket \"close\" event [wasClean:%s, code:%s, reason:\"%s\"]',\n\t\t\t\t\tevent.wasClean, event.code, event.reason);\n\n\t\t\t\t// Don't retry if code is 4000 (closed by the server).\n\t\t\t\tif (event.code !== 4000)\n\t\t\t\t{\n\t\t\t\t\t// If it was not connected, try again.\n\t\t\t\t\tif (!wasConnected)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.safeEmit('failed', currentAttempt);\n\n\t\t\t\t\t\tif (this._closed)\n\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\tif (operation.retry(true))\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t// If it was connected, start from scratch.\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\toperation.stop();\n\n\t\t\t\t\t\tthis.safeEmit('disconnected');\n\n\t\t\t\t\t\tif (this._closed)\n\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\tthis._runWebSocket();\n\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis._closed = true;\n\n\t\t\t\t// Emit 'close' event.\n\t\t\t\tthis.safeEmit('close');\n\t\t\t};\n\n\t\t\tthis._ws.onerror = () =>\n\t\t\t{\n\t\t\t\tif (this._closed)\n\t\t\t\t\treturn;\n\n\t\t\t\tlogger.error('WebSocket \"error\" event');\n\t\t\t};\n\n\t\t\tthis._ws.onmessage = (event) =>\n\t\t\t{\n\t\t\t\tif (this._closed)\n\t\t\t\t\treturn;\n\n\t\t\t\tconst message = Message.parse(event.data);\n\n\t\t\t\tif (!message)\n\t\t\t\t\treturn;\n\n\t\t\t\tif (this.listenerCount('message') === 0)\n\t\t\t\t{\n\t\t\t\t\tlogger.error(\n\t\t\t\t\t\t'no listeners for WebSocket \"message\" event, ignoring received message');\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Emit 'message' event.\n\t\t\t\tthis.safeEmit('message', message);\n\t\t\t};\n\t\t});\n\t}\n}\n\nmodule.exports = WebSocketTransport;\n","var _globalThis;\nif (typeof globalThis === 'object') {\n\t_globalThis = globalThis;\n} else {\n\ttry {\n\t\t_globalThis = require('es5-ext/global');\n\t} catch (error) {\n\t} finally {\n\t\tif (!_globalThis && typeof window !== 'undefined') { _globalThis = window; }\n\t\tif (!_globalThis) { throw new Error('Could not determine global this'); }\n\t}\n}\n\nvar NativeWebSocket = _globalThis.WebSocket || _globalThis.MozWebSocket;\nvar websocket_version = require('./version');\n\n\n/**\n * Expose a W3C WebSocket class with just one or two arguments.\n */\nfunction W3CWebSocket(uri, protocols) {\n\tvar native_instance;\n\n\tif (protocols) {\n\t\tnative_instance = new NativeWebSocket(uri, protocols);\n\t}\n\telse {\n\t\tnative_instance = new NativeWebSocket(uri);\n\t}\n\n\t/**\n\t * 'native_instance' is an instance of nativeWebSocket (the browser's WebSocket\n\t * class). Since it is an Object it will be returned as it is when creating an\n\t * instance of W3CWebSocket via 'new W3CWebSocket()'.\n\t *\n\t * ECMAScript 5: http://bclary.com/2004/11/07/#a-13.2.2\n\t */\n\treturn native_instance;\n}\nif (NativeWebSocket) {\n\t['CONNECTING', 'OPEN', 'CLOSING', 'CLOSED'].forEach(function(prop) {\n\t\tObject.defineProperty(W3CWebSocket, prop, {\n\t\t\tget: function() { return NativeWebSocket[prop]; }\n\t\t});\n\t});\n}\n\n/**\n * Module exports.\n */\nmodule.exports = {\n    'w3cwebsocket' : NativeWebSocket ? W3CWebSocket : null,\n    'version'      : websocket_version\n};\n","var naiveFallback = function () {\n\tif (typeof self === \"object\" && self) return self;\n\tif (typeof window === \"object\" && window) return window;\n\tthrow new Error(\"Unable to resolve global `this`\");\n};\n\nmodule.exports = (function () {\n\tif (this) return this;\n\n\t// Unexpected strict mode (may happen if e.g. bundled into ESM module)\n\n\t// Fallback to standard globalThis if available\n\tif (typeof globalThis === \"object\" && globalThis) return globalThis;\n\n\t// Thanks @mathiasbynens -> https://mathiasbynens.be/notes/globalthis\n\t// In all ES5+ engines global object inherits from Object.prototype\n\t// (if you approached one that doesn't please report)\n\ttry {\n\t\tObject.defineProperty(Object.prototype, \"__global__\", {\n\t\t\tget: function () { return this; },\n\t\t\tconfigurable: true\n\t\t});\n\t} catch (error) {\n\t\t// Unfortunate case of updates to Object.prototype being restricted\n\t\t// via preventExtensions, seal or freeze\n\t\treturn naiveFallback();\n\t}\n\ttry {\n\t\t// Safari case (window.__global__ works, but __global__ does not)\n\t\tif (!__global__) return naiveFallback();\n\t\treturn __global__;\n\t} finally {\n\t\tdelete Object.prototype.__global__;\n\t}\n})();\n","module.exports = require('../package.json').version;\n","module.exports = require('./lib/retry');","var RetryOperation = require('./retry_operation');\n\nexports.operation = function(options) {\n  var timeouts = exports.timeouts(options);\n  return new RetryOperation(timeouts, {\n      forever: options && options.forever,\n      unref: options && options.unref,\n      maxRetryTime: options && options.maxRetryTime\n  });\n};\n\nexports.timeouts = function(options) {\n  if (options instanceof Array) {\n    return [].concat(options);\n  }\n\n  var opts = {\n    retries: 10,\n    factor: 2,\n    minTimeout: 1 * 1000,\n    maxTimeout: Infinity,\n    randomize: false\n  };\n  for (var key in options) {\n    opts[key] = options[key];\n  }\n\n  if (opts.minTimeout > opts.maxTimeout) {\n    throw new Error('minTimeout is greater than maxTimeout');\n  }\n\n  var timeouts = [];\n  for (var i = 0; i < opts.retries; i++) {\n    timeouts.push(this.createTimeout(i, opts));\n  }\n\n  if (options && options.forever && !timeouts.length) {\n    timeouts.push(this.createTimeout(i, opts));\n  }\n\n  // sort the array numerically ascending\n  timeouts.sort(function(a,b) {\n    return a - b;\n  });\n\n  return timeouts;\n};\n\nexports.createTimeout = function(attempt, opts) {\n  var random = (opts.randomize)\n    ? (Math.random() + 1)\n    : 1;\n\n  var timeout = Math.round(random * opts.minTimeout * Math.pow(opts.factor, attempt));\n  timeout = Math.min(timeout, opts.maxTimeout);\n\n  return timeout;\n};\n\nexports.wrap = function(obj, options, methods) {\n  if (options instanceof Array) {\n    methods = options;\n    options = null;\n  }\n\n  if (!methods) {\n    methods = [];\n    for (var key in obj) {\n      if (typeof obj[key] === 'function') {\n        methods.push(key);\n      }\n    }\n  }\n\n  for (var i = 0; i < methods.length; i++) {\n    var method   = methods[i];\n    var original = obj[method];\n\n    obj[method] = function retryWrapper(original) {\n      var op       = exports.operation(options);\n      var args     = Array.prototype.slice.call(arguments, 1);\n      var callback = args.pop();\n\n      args.push(function(err) {\n        if (op.retry(err)) {\n          return;\n        }\n        if (err) {\n          arguments[0] = op.mainError();\n        }\n        callback.apply(this, arguments);\n      });\n\n      op.attempt(function() {\n        original.apply(obj, args);\n      });\n    }.bind(obj, original);\n    obj[method].options = options;\n  }\n};\n","function RetryOperation(timeouts, options) {\n  // Compatibility for the old (timeouts, retryForever) signature\n  if (typeof options === 'boolean') {\n    options = { forever: options };\n  }\n\n  this._originalTimeouts = JSON.parse(JSON.stringify(timeouts));\n  this._timeouts = timeouts;\n  this._options = options || {};\n  this._maxRetryTime = options && options.maxRetryTime || Infinity;\n  this._fn = null;\n  this._errors = [];\n  this._attempts = 1;\n  this._operationTimeout = null;\n  this._operationTimeoutCb = null;\n  this._timeout = null;\n  this._operationStart = null;\n\n  if (this._options.forever) {\n    this._cachedTimeouts = this._timeouts.slice(0);\n  }\n}\nmodule.exports = RetryOperation;\n\nRetryOperation.prototype.reset = function() {\n  this._attempts = 1;\n  this._timeouts = this._originalTimeouts;\n}\n\nRetryOperation.prototype.stop = function() {\n  if (this._timeout) {\n    clearTimeout(this._timeout);\n  }\n\n  this._timeouts       = [];\n  this._cachedTimeouts = null;\n};\n\nRetryOperation.prototype.retry = function(err) {\n  if (this._timeout) {\n    clearTimeout(this._timeout);\n  }\n\n  if (!err) {\n    return false;\n  }\n  var currentTime = new Date().getTime();\n  if (err && currentTime - this._operationStart >= this._maxRetryTime) {\n    this._errors.unshift(new Error('RetryOperation timeout occurred'));\n    return false;\n  }\n\n  this._errors.push(err);\n\n  var timeout = this._timeouts.shift();\n  if (timeout === undefined) {\n    if (this._cachedTimeouts) {\n      // retry forever, only keep last error\n      this._errors.splice(this._errors.length - 1, this._errors.length);\n      this._timeouts = this._cachedTimeouts.slice(0);\n      timeout = this._timeouts.shift();\n    } else {\n      return false;\n    }\n  }\n\n  var self = this;\n  var timer = setTimeout(function() {\n    self._attempts++;\n\n    if (self._operationTimeoutCb) {\n      self._timeout = setTimeout(function() {\n        self._operationTimeoutCb(self._attempts);\n      }, self._operationTimeout);\n\n      if (self._options.unref) {\n          self._timeout.unref();\n      }\n    }\n\n    self._fn(self._attempts);\n  }, timeout);\n\n  if (this._options.unref) {\n      timer.unref();\n  }\n\n  return true;\n};\n\nRetryOperation.prototype.attempt = function(fn, timeoutOps) {\n  this._fn = fn;\n\n  if (timeoutOps) {\n    if (timeoutOps.timeout) {\n      this._operationTimeout = timeoutOps.timeout;\n    }\n    if (timeoutOps.cb) {\n      this._operationTimeoutCb = timeoutOps.cb;\n    }\n  }\n\n  var self = this;\n  if (this._operationTimeoutCb) {\n    this._timeout = setTimeout(function() {\n      self._operationTimeoutCb();\n    }, self._operationTimeout);\n  }\n\n  this._operationStart = new Date().getTime();\n\n  this._fn(this._attempts);\n};\n\nRetryOperation.prototype.try = function(fn) {\n  console.log('Using RetryOperation.try() is deprecated');\n  this.attempt(fn);\n};\n\nRetryOperation.prototype.start = function(fn) {\n  console.log('Using RetryOperation.start() is deprecated');\n  this.attempt(fn);\n};\n\nRetryOperation.prototype.start = RetryOperation.prototype.try;\n\nRetryOperation.prototype.errors = function() {\n  return this._errors;\n};\n\nRetryOperation.prototype.attempts = function() {\n  return this._attempts;\n};\n\nRetryOperation.prototype.mainError = function() {\n  if (this._errors.length === 0) {\n    return null;\n  }\n\n  var counts = {};\n  var mainError = null;\n  var mainErrorCount = 0;\n\n  for (var i = 0; i < this._errors.length; i++) {\n    var error = this._errors[i];\n    var message = error.message;\n    var count = (counts[message] || 0) + 1;\n\n    counts[message] = count;\n\n    if (count >= mainErrorCount) {\n      mainError = error;\n      mainErrorCount = count;\n    }\n  }\n\n  return mainError;\n};\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n","// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\n\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto\n// implementation. Also, find the complete implementation of crypto on IE11.\nvar getRandomValues = (typeof(crypto) != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto)) ||\n                      (typeof(msCrypto) != 'undefined' && typeof window.msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto));\n\nif (getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\n  module.exports = function whatwgRNG() {\n    getRandomValues(rnds8);\n    return rnds8;\n  };\n} else {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n\n  module.exports = function mathRNG() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n  return ([\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]]\n  ]).join('');\n}\n\nmodule.exports = bytesToUuid;\n","var toIntIfInt = function (v) {\n  return String(Number(v)) === v ? Number(v) : v;\n};\n\nvar attachProperties = function (match, location, names, rawName) {\n  if (rawName && !names) {\n    location[rawName] = toIntIfInt(match[1]);\n  }\n  else {\n    for (var i = 0; i < names.length; i += 1) {\n      if (match[i+1] != null) {\n        location[names[i]] = toIntIfInt(match[i+1]);\n      }\n    }\n  }\n};\n\nvar parseReg = function (obj, location, content) {\n  var needsBlank = obj.name && obj.names;\n  if (obj.push && !location[obj.push]) {\n    location[obj.push] = [];\n  }\n  else if (needsBlank && !location[obj.name]) {\n    location[obj.name] = {};\n  }\n  var keyLocation = obj.push ?\n    {} :  // blank object that will be pushed\n    needsBlank ? location[obj.name] : location; // otherwise, named location or root\n\n  attachProperties(content.match(obj.reg), keyLocation, obj.names, obj.name);\n\n  if (obj.push) {\n    location[obj.push].push(keyLocation);\n  }\n};\n\nvar grammar = require('./grammar');\nvar validLine = RegExp.prototype.test.bind(/^([a-z])=(.*)/);\n\nexports.parse = function (sdp) {\n  var session = {}\n    , media = []\n    , location = session; // points at where properties go under (one of the above)\n\n  // parse lines we understand\n  sdp.split(/(\\r\\n|\\r|\\n)/).filter(validLine).forEach(function (l) {\n    var type = l[0];\n    var content = l.slice(2);\n    if (type === 'm') {\n      media.push({rtp: [], fmtp: []});\n      location = media[media.length-1]; // point at latest media line\n    }\n\n    for (var j = 0; j < (grammar[type] || []).length; j += 1) {\n      var obj = grammar[type][j];\n      if (obj.reg.test(content)) {\n        return parseReg(obj, location, content);\n      }\n    }\n  });\n\n  session.media = media; // link it up\n  return session;\n};\n\nvar paramReducer = function (acc, expr) {\n  var s = expr.split(/=(.+)/, 2);\n  if (s.length === 2) {\n    acc[s[0]] = toIntIfInt(s[1]);\n  } else if (s.length === 1 && expr.length > 1) {\n    acc[s[0]] = undefined;\n  }\n  return acc;\n};\n\nexports.parseParams = function (str) {\n  return str.split(/;\\s?/).reduce(paramReducer, {});\n};\n\n// For backward compatibility - alias will be removed in 3.0.0\nexports.parseFmtpConfig = exports.parseParams;\n\nexports.parsePayloads = function (str) {\n  return str.toString().split(' ').map(Number);\n};\n\nexports.parseRemoteCandidates = function (str) {\n  var candidates = [];\n  var parts = str.split(' ').map(toIntIfInt);\n  for (var i = 0; i < parts.length; i += 3) {\n    candidates.push({\n      component: parts[i],\n      ip: parts[i + 1],\n      port: parts[i + 2]\n    });\n  }\n  return candidates;\n};\n\nexports.parseImageAttributes = function (str) {\n  return str.split(' ').map(function (item) {\n    return item.substring(1, item.length-1).split(',').reduce(paramReducer, {});\n  });\n};\n\nexports.parseSimulcastStreamList = function (str) {\n  return str.split(';').map(function (stream) {\n    return stream.split(',').map(function (format) {\n      var scid, paused = false;\n\n      if (format[0] !== '~') {\n        scid = toIntIfInt(format);\n      } else {\n        scid = toIntIfInt(format.substring(1, format.length));\n        paused = true;\n      }\n\n      return {\n        scid: scid,\n        paused: paused\n      };\n    });\n  });\n};\n","var grammar = require('./grammar');\n\n// customized util.format - discards excess arguments and can void middle ones\nvar formatRegExp = /%[sdv%]/g;\nvar format = function (formatStr) {\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  return formatStr.replace(formatRegExp, function (x) {\n    if (i >= len) {\n      return x; // missing argument\n    }\n    var arg = args[i];\n    i += 1;\n    switch (x) {\n    case '%%':\n      return '%';\n    case '%s':\n      return String(arg);\n    case '%d':\n      return Number(arg);\n    case '%v':\n      return '';\n    }\n  });\n  // NB: we discard excess arguments - they are typically undefined from makeLine\n};\n\nvar makeLine = function (type, obj, location) {\n  var str = obj.format instanceof Function ?\n    (obj.format(obj.push ? location : location[obj.name])) :\n    obj.format;\n\n  var args = [type + '=' + str];\n  if (obj.names) {\n    for (var i = 0; i < obj.names.length; i += 1) {\n      var n = obj.names[i];\n      if (obj.name) {\n        args.push(location[obj.name][n]);\n      }\n      else { // for mLine and push attributes\n        args.push(location[obj.names[i]]);\n      }\n    }\n  }\n  else {\n    args.push(location[obj.name]);\n  }\n  return format.apply(null, args);\n};\n\n// RFC specified order\n// TODO: extend this with all the rest\nvar defaultOuterOrder = [\n  'v', 'o', 's', 'i',\n  'u', 'e', 'p', 'c',\n  'b', 't', 'r', 'z', 'a'\n];\nvar defaultInnerOrder = ['i', 'c', 'b', 'a'];\n\n\nmodule.exports = function (session, opts) {\n  opts = opts || {};\n  // ensure certain properties exist\n  if (session.version == null) {\n    session.version = 0; // 'v=0' must be there (only defined version atm)\n  }\n  if (session.name == null) {\n    session.name = ' '; // 's= ' must be there if no meaningful name set\n  }\n  session.media.forEach(function (mLine) {\n    if (mLine.payloads == null) {\n      mLine.payloads = '';\n    }\n  });\n\n  var outerOrder = opts.outerOrder || defaultOuterOrder;\n  var innerOrder = opts.innerOrder || defaultInnerOrder;\n  var sdp = [];\n\n  // loop through outerOrder for matching properties on session\n  outerOrder.forEach(function (type) {\n    grammar[type].forEach(function (obj) {\n      if (obj.name in session && session[obj.name] != null) {\n        sdp.push(makeLine(type, obj, session));\n      }\n      else if (obj.push in session && session[obj.push] != null) {\n        session[obj.push].forEach(function (el) {\n          sdp.push(makeLine(type, obj, el));\n        });\n      }\n    });\n  });\n\n  // then for each media line, follow the innerOrder\n  session.media.forEach(function (mLine) {\n    sdp.push(makeLine('m', grammar.m[0], mLine));\n\n    innerOrder.forEach(function (type) {\n      grammar[type].forEach(function (obj) {\n        if (obj.name in mLine && mLine[obj.name] != null) {\n          sdp.push(makeLine(type, obj, mLine));\n        }\n        else if (obj.push in mLine && mLine[obj.push] != null) {\n          mLine[obj.push].forEach(function (el) {\n            sdp.push(makeLine(type, obj, el));\n          });\n        }\n      });\n    });\n  });\n\n  return sdp.join('\\r\\n') + '\\r\\n';\n};\n","\r\nclass VideoElement {\r\n    constructor() {\r\n\t\tthis._parentElementId = null;\r\n\t\tthis._video = null;\r\n    }\r\n\r\n    play(options = { id, stream, elementId, remote: false }) {\r\n        let video = document.createElement('video');\r\n        video.autoplay = true;\r\n        video.playsinline = true;\r\n        video.controls = true;\r\n        video.muted = !options.remote;\r\n        video.srcObject = options.stream;\r\n        video.id = `stream${options.id}`;\r\n        let parentElement = document.getElementById(options.elementId);\r\n        parentElement.appendChild(video);\r\n        this.parentElement = parentElement;\r\n        this._video = video;\r\n\t\tthis._parentElementId = options.elementId\r\n    }\r\n\r\n\tget parentElementId(){\r\n\t\treturn this._parentElementId;\r\n\t}\r\n\r\n    stop() {\r\n\t\tif(!this._video){\r\n\t\t\treturn;\r\n\t\t}\r\n        this._video.pause();\r\n        this.parentElement.removeChild(this._video);\r\n\t\tthis._parentElementId = null;\r\n    }\r\n}\r\n\r\nexport default VideoElement;\r\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nlet logDisabled_ = true;\nlet deprecationWarnings_ = true;\n\n/**\n * Extract browser version out of the provided user agent string.\n *\n * @param {!string} uastring userAgent string.\n * @param {!string} expr Regular expression used as match criteria.\n * @param {!number} pos position in the version string to be returned.\n * @return {!number} browser version.\n */\nexport function extractVersion(uastring, expr, pos) {\n  const match = uastring.match(expr);\n  return match && match.length >= pos && parseInt(match[pos], 10);\n}\n\n// Wraps the peerconnection event eventNameToWrap in a function\n// which returns the modified event object (or false to prevent\n// the event).\nexport function wrapPeerConnectionEvent(window, eventNameToWrap, wrapper) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  const proto = window.RTCPeerConnection.prototype;\n  const nativeAddEventListener = proto.addEventListener;\n  proto.addEventListener = function(nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap) {\n      return nativeAddEventListener.apply(this, arguments);\n    }\n    const wrappedCallback = (e) => {\n      const modifiedEvent = wrapper(e);\n      if (modifiedEvent) {\n        if (cb.handleEvent) {\n          cb.handleEvent(modifiedEvent);\n        } else {\n          cb(modifiedEvent);\n        }\n      }\n    };\n    this._eventMap = this._eventMap || {};\n    if (!this._eventMap[eventNameToWrap]) {\n      this._eventMap[eventNameToWrap] = new Map();\n    }\n    this._eventMap[eventNameToWrap].set(cb, wrappedCallback);\n    return nativeAddEventListener.apply(this, [nativeEventName,\n      wrappedCallback]);\n  };\n\n  const nativeRemoveEventListener = proto.removeEventListener;\n  proto.removeEventListener = function(nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap || !this._eventMap\n        || !this._eventMap[eventNameToWrap]) {\n      return nativeRemoveEventListener.apply(this, arguments);\n    }\n    if (!this._eventMap[eventNameToWrap].has(cb)) {\n      return nativeRemoveEventListener.apply(this, arguments);\n    }\n    const unwrappedCb = this._eventMap[eventNameToWrap].get(cb);\n    this._eventMap[eventNameToWrap].delete(cb);\n    if (this._eventMap[eventNameToWrap].size === 0) {\n      delete this._eventMap[eventNameToWrap];\n    }\n    if (Object.keys(this._eventMap).length === 0) {\n      delete this._eventMap;\n    }\n    return nativeRemoveEventListener.apply(this, [nativeEventName,\n      unwrappedCb]);\n  };\n\n  Object.defineProperty(proto, 'on' + eventNameToWrap, {\n    get() {\n      return this['_on' + eventNameToWrap];\n    },\n    set(cb) {\n      if (this['_on' + eventNameToWrap]) {\n        this.removeEventListener(eventNameToWrap,\n          this['_on' + eventNameToWrap]);\n        delete this['_on' + eventNameToWrap];\n      }\n      if (cb) {\n        this.addEventListener(eventNameToWrap,\n          this['_on' + eventNameToWrap] = cb);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n}\n\nexport function disableLog(bool) {\n  if (typeof bool !== 'boolean') {\n    return new Error('Argument type: ' + typeof bool +\n        '. Please use a boolean.');\n  }\n  logDisabled_ = bool;\n  return (bool) ? 'adapter.js logging disabled' :\n    'adapter.js logging enabled';\n}\n\n/**\n * Disable or enable deprecation warnings\n * @param {!boolean} bool set to true to disable warnings.\n */\nexport function disableWarnings(bool) {\n  if (typeof bool !== 'boolean') {\n    return new Error('Argument type: ' + typeof bool +\n        '. Please use a boolean.');\n  }\n  deprecationWarnings_ = !bool;\n  return 'adapter.js deprecation warnings ' + (bool ? 'disabled' : 'enabled');\n}\n\nexport function log() {\n  if (typeof window === 'object') {\n    if (logDisabled_) {\n      return;\n    }\n    if (typeof console !== 'undefined' && typeof console.log === 'function') {\n      console.log.apply(console, arguments);\n    }\n  }\n}\n\n/**\n * Shows a deprecation warning suggesting the modern and spec-compatible API.\n */\nexport function deprecated(oldMethod, newMethod) {\n  if (!deprecationWarnings_) {\n    return;\n  }\n  console.warn(oldMethod + ' is deprecated, please use ' + newMethod +\n      ' instead.');\n}\n\n/**\n * Browser detector.\n *\n * @return {object} result containing browser and version\n *     properties.\n */\nexport function detectBrowser(window) {\n  // Returned result object.\n  const result = {browser: null, version: null};\n\n  // Fail early if it's not a browser\n  if (typeof window === 'undefined' || !window.navigator ||\n      !window.navigator.userAgent) {\n    result.browser = 'Not a browser.';\n    return result;\n  }\n\n  const {navigator} = window;\n\n  if (navigator.mozGetUserMedia) { // Firefox.\n    result.browser = 'firefox';\n    result.version = extractVersion(navigator.userAgent,\n      /Firefox\\/(\\d+)\\./, 1);\n  } else if (navigator.webkitGetUserMedia ||\n      (window.isSecureContext === false && window.webkitRTCPeerConnection)) {\n    // Chrome, Chromium, Webview, Opera.\n    // Version matches Chrome/WebRTC version.\n    // Chrome 74 removed webkitGetUserMedia on http as well so we need the\n    // more complicated fallback to webkitRTCPeerConnection.\n    result.browser = 'chrome';\n    result.version = extractVersion(navigator.userAgent,\n      /Chrom(e|ium)\\/(\\d+)\\./, 2);\n  } else if (window.RTCPeerConnection &&\n      navigator.userAgent.match(/AppleWebKit\\/(\\d+)\\./)) { // Safari.\n    result.browser = 'safari';\n    result.version = extractVersion(navigator.userAgent,\n      /AppleWebKit\\/(\\d+)\\./, 1);\n    result.supportsUnifiedPlan = window.RTCRtpTransceiver &&\n        'currentDirection' in window.RTCRtpTransceiver.prototype;\n  } else { // Default fallthrough: not supported.\n    result.browser = 'Not a supported browser.';\n    return result;\n  }\n\n  return result;\n}\n\n/**\n * Checks if something is an object.\n *\n * @param {*} val The something you want to check.\n * @return true if val is an object, false otherwise.\n */\nfunction isObject(val) {\n  return Object.prototype.toString.call(val) === '[object Object]';\n}\n\n/**\n * Remove all empty objects and undefined values\n * from a nested object -- an enhanced and vanilla version\n * of Lodash's `compact`.\n */\nexport function compactObject(data) {\n  if (!isObject(data)) {\n    return data;\n  }\n\n  return Object.keys(data).reduce(function(accumulator, key) {\n    const isObj = isObject(data[key]);\n    const value = isObj ? compactObject(data[key]) : data[key];\n    const isEmptyObject = isObj && !Object.keys(value).length;\n    if (value === undefined || isEmptyObject) {\n      return accumulator;\n    }\n    return Object.assign(accumulator, {[key]: value});\n  }, {});\n}\n\n/* iterates the stats graph recursively. */\nexport function walkStats(stats, base, resultSet) {\n  if (!base || resultSet.has(base.id)) {\n    return;\n  }\n  resultSet.set(base.id, base);\n  Object.keys(base).forEach(name => {\n    if (name.endsWith('Id')) {\n      walkStats(stats, stats.get(base[name]), resultSet);\n    } else if (name.endsWith('Ids')) {\n      base[name].forEach(id => {\n        walkStats(stats, stats.get(id), resultSet);\n      });\n    }\n  });\n}\n\n/* filter getStats for a sender/receiver track. */\nexport function filterStats(result, track, outbound) {\n  const streamStatsType = outbound ? 'outbound-rtp' : 'inbound-rtp';\n  const filteredResult = new Map();\n  if (track === null) {\n    return filteredResult;\n  }\n  const trackStats = [];\n  result.forEach(value => {\n    if (value.type === 'track' &&\n        value.trackIdentifier === track.id) {\n      trackStats.push(value);\n    }\n  });\n  trackStats.forEach(trackStat => {\n    result.forEach(stats => {\n      if (stats.type === streamStatsType && stats.trackId === trackStat.id) {\n        walkStats(result, stats, filteredResult);\n      }\n    });\n  });\n  return filteredResult;\n}\n\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\nimport * as utils from '../utils.js';\nconst logging = utils.log;\n\nexport function shimGetUserMedia(window, browserDetails) {\n  const navigator = window && window.navigator;\n\n  if (!navigator.mediaDevices) {\n    return;\n  }\n\n  const constraintsToChrome_ = function(c) {\n    if (typeof c !== 'object' || c.mandatory || c.optional) {\n      return c;\n    }\n    const cc = {};\n    Object.keys(c).forEach(key => {\n      if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n        return;\n      }\n      const r = (typeof c[key] === 'object') ? c[key] : {ideal: c[key]};\n      if (r.exact !== undefined && typeof r.exact === 'number') {\n        r.min = r.max = r.exact;\n      }\n      const oldname_ = function(prefix, name) {\n        if (prefix) {\n          return prefix + name.charAt(0).toUpperCase() + name.slice(1);\n        }\n        return (name === 'deviceId') ? 'sourceId' : name;\n      };\n      if (r.ideal !== undefined) {\n        cc.optional = cc.optional || [];\n        let oc = {};\n        if (typeof r.ideal === 'number') {\n          oc[oldname_('min', key)] = r.ideal;\n          cc.optional.push(oc);\n          oc = {};\n          oc[oldname_('max', key)] = r.ideal;\n          cc.optional.push(oc);\n        } else {\n          oc[oldname_('', key)] = r.ideal;\n          cc.optional.push(oc);\n        }\n      }\n      if (r.exact !== undefined && typeof r.exact !== 'number') {\n        cc.mandatory = cc.mandatory || {};\n        cc.mandatory[oldname_('', key)] = r.exact;\n      } else {\n        ['min', 'max'].forEach(mix => {\n          if (r[mix] !== undefined) {\n            cc.mandatory = cc.mandatory || {};\n            cc.mandatory[oldname_(mix, key)] = r[mix];\n          }\n        });\n      }\n    });\n    if (c.advanced) {\n      cc.optional = (cc.optional || []).concat(c.advanced);\n    }\n    return cc;\n  };\n\n  const shimConstraints_ = function(constraints, func) {\n    if (browserDetails.version >= 61) {\n      return func(constraints);\n    }\n    constraints = JSON.parse(JSON.stringify(constraints));\n    if (constraints && typeof constraints.audio === 'object') {\n      const remap = function(obj, a, b) {\n        if (a in obj && !(b in obj)) {\n          obj[b] = obj[a];\n          delete obj[a];\n        }\n      };\n      constraints = JSON.parse(JSON.stringify(constraints));\n      remap(constraints.audio, 'autoGainControl', 'googAutoGainControl');\n      remap(constraints.audio, 'noiseSuppression', 'googNoiseSuppression');\n      constraints.audio = constraintsToChrome_(constraints.audio);\n    }\n    if (constraints && typeof constraints.video === 'object') {\n      // Shim facingMode for mobile & surface pro.\n      let face = constraints.video.facingMode;\n      face = face && ((typeof face === 'object') ? face : {ideal: face});\n      const getSupportedFacingModeLies = browserDetails.version < 66;\n\n      if ((face && (face.exact === 'user' || face.exact === 'environment' ||\n                    face.ideal === 'user' || face.ideal === 'environment')) &&\n          !(navigator.mediaDevices.getSupportedConstraints &&\n            navigator.mediaDevices.getSupportedConstraints().facingMode &&\n            !getSupportedFacingModeLies)) {\n        delete constraints.video.facingMode;\n        let matches;\n        if (face.exact === 'environment' || face.ideal === 'environment') {\n          matches = ['back', 'rear'];\n        } else if (face.exact === 'user' || face.ideal === 'user') {\n          matches = ['front'];\n        }\n        if (matches) {\n          // Look for matches in label, or use last cam for back (typical).\n          return navigator.mediaDevices.enumerateDevices()\n            .then(devices => {\n              devices = devices.filter(d => d.kind === 'videoinput');\n              let dev = devices.find(d => matches.some(match =>\n                d.label.toLowerCase().includes(match)));\n              if (!dev && devices.length && matches.includes('back')) {\n                dev = devices[devices.length - 1]; // more likely the back cam\n              }\n              if (dev) {\n                constraints.video.deviceId = face.exact\n                  ? {exact: dev.deviceId}\n                  : {ideal: dev.deviceId};\n              }\n              constraints.video = constraintsToChrome_(constraints.video);\n              logging('chrome: ' + JSON.stringify(constraints));\n              return func(constraints);\n            });\n        }\n      }\n      constraints.video = constraintsToChrome_(constraints.video);\n    }\n    logging('chrome: ' + JSON.stringify(constraints));\n    return func(constraints);\n  };\n\n  const shimError_ = function(e) {\n    if (browserDetails.version >= 64) {\n      return e;\n    }\n    return {\n      name: {\n        PermissionDeniedError: 'NotAllowedError',\n        PermissionDismissedError: 'NotAllowedError',\n        InvalidStateError: 'NotAllowedError',\n        DevicesNotFoundError: 'NotFoundError',\n        ConstraintNotSatisfiedError: 'OverconstrainedError',\n        TrackStartError: 'NotReadableError',\n        MediaDeviceFailedDueToShutdown: 'NotAllowedError',\n        MediaDeviceKillSwitchOn: 'NotAllowedError',\n        TabCaptureError: 'AbortError',\n        ScreenCaptureError: 'AbortError',\n        DeviceCaptureError: 'AbortError'\n      }[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraint || e.constraintName,\n      toString() {\n        return this.name + (this.message && ': ') + this.message;\n      }\n    };\n  };\n\n  const getUserMedia_ = function(constraints, onSuccess, onError) {\n    shimConstraints_(constraints, c => {\n      navigator.webkitGetUserMedia(c, onSuccess, e => {\n        if (onError) {\n          onError(shimError_(e));\n        }\n      });\n    });\n  };\n  navigator.getUserMedia = getUserMedia_.bind(navigator);\n\n  // Even though Chrome 45 has navigator.mediaDevices and a getUserMedia\n  // function which returns a Promise, it does not accept spec-style\n  // constraints.\n  if (navigator.mediaDevices.getUserMedia) {\n    const origGetUserMedia = navigator.mediaDevices.getUserMedia.\n      bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(cs) {\n      return shimConstraints_(cs, c => origGetUserMedia(c).then(stream => {\n        if (c.audio && !stream.getAudioTracks().length ||\n            c.video && !stream.getVideoTracks().length) {\n          stream.getTracks().forEach(track => {\n            track.stop();\n          });\n          throw new DOMException('', 'NotFoundError');\n        }\n        return stream;\n      }, e => Promise.reject(shimError_(e))));\n    };\n  }\n}\n","/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\nexport function shimGetDisplayMedia(window, getSourceId) {\n  if (window.navigator.mediaDevices &&\n    'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n  if (!(window.navigator.mediaDevices)) {\n    return;\n  }\n  // getSourceId is a function that returns a promise resolving with\n  // the sourceId of the screen/window/tab to be shared.\n  if (typeof getSourceId !== 'function') {\n    console.error('shimGetDisplayMedia: getSourceId argument is not ' +\n        'a function');\n    return;\n  }\n  window.navigator.mediaDevices.getDisplayMedia =\n    function getDisplayMedia(constraints) {\n      return getSourceId(constraints)\n        .then(sourceId => {\n          const widthSpecified = constraints.video && constraints.video.width;\n          const heightSpecified = constraints.video &&\n            constraints.video.height;\n          const frameRateSpecified = constraints.video &&\n            constraints.video.frameRate;\n          constraints.video = {\n            mandatory: {\n              chromeMediaSource: 'desktop',\n              chromeMediaSourceId: sourceId,\n              maxFrameRate: frameRateSpecified || 3\n            }\n          };\n          if (widthSpecified) {\n            constraints.video.mandatory.maxWidth = widthSpecified;\n          }\n          if (heightSpecified) {\n            constraints.video.mandatory.maxHeight = heightSpecified;\n          }\n          return window.navigator.mediaDevices.getUserMedia(constraints);\n        });\n    };\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\nimport * as utils from '../utils.js';\n\nexport {shimGetUserMedia} from './getusermedia';\nexport {shimGetDisplayMedia} from './getdisplaymedia';\n\nexport function shimMediaStream(window) {\n  window.MediaStream = window.MediaStream || window.webkitMediaStream;\n}\n\nexport function shimOnTrack(window) {\n  if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n      window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n      get() {\n        return this._ontrack;\n      },\n      set(f) {\n        if (this._ontrack) {\n          this.removeEventListener('track', this._ontrack);\n        }\n        this.addEventListener('track', this._ontrack = f);\n      },\n      enumerable: true,\n      configurable: true\n    });\n    const origSetRemoteDescription =\n        window.RTCPeerConnection.prototype.setRemoteDescription;\n    window.RTCPeerConnection.prototype.setRemoteDescription =\n      function setRemoteDescription() {\n        if (!this._ontrackpoly) {\n          this._ontrackpoly = (e) => {\n            // onaddstream does not fire when a track is added to an existing\n            // stream. But stream.onaddtrack is implemented so we use that.\n            e.stream.addEventListener('addtrack', te => {\n              let receiver;\n              if (window.RTCPeerConnection.prototype.getReceivers) {\n                receiver = this.getReceivers()\n                  .find(r => r.track && r.track.id === te.track.id);\n              } else {\n                receiver = {track: te.track};\n              }\n\n              const event = new Event('track');\n              event.track = te.track;\n              event.receiver = receiver;\n              event.transceiver = {receiver};\n              event.streams = [e.stream];\n              this.dispatchEvent(event);\n            });\n            e.stream.getTracks().forEach(track => {\n              let receiver;\n              if (window.RTCPeerConnection.prototype.getReceivers) {\n                receiver = this.getReceivers()\n                  .find(r => r.track && r.track.id === track.id);\n              } else {\n                receiver = {track};\n              }\n              const event = new Event('track');\n              event.track = track;\n              event.receiver = receiver;\n              event.transceiver = {receiver};\n              event.streams = [e.stream];\n              this.dispatchEvent(event);\n            });\n          };\n          this.addEventListener('addstream', this._ontrackpoly);\n        }\n        return origSetRemoteDescription.apply(this, arguments);\n      };\n  } else {\n    // even if RTCRtpTransceiver is in window, it is only used and\n    // emitted in unified-plan. Unfortunately this means we need\n    // to unconditionally wrap the event.\n    utils.wrapPeerConnectionEvent(window, 'track', e => {\n      if (!e.transceiver) {\n        Object.defineProperty(e, 'transceiver',\n          {value: {receiver: e.receiver}});\n      }\n      return e;\n    });\n  }\n}\n\nexport function shimGetSendersWithDtmf(window) {\n  // Overrides addTrack/removeTrack, depends on shimAddTrackRemoveTrack.\n  if (typeof window === 'object' && window.RTCPeerConnection &&\n      !('getSenders' in window.RTCPeerConnection.prototype) &&\n      'createDTMFSender' in window.RTCPeerConnection.prototype) {\n    const shimSenderWithDtmf = function(pc, track) {\n      return {\n        track,\n        get dtmf() {\n          if (this._dtmf === undefined) {\n            if (track.kind === 'audio') {\n              this._dtmf = pc.createDTMFSender(track);\n            } else {\n              this._dtmf = null;\n            }\n          }\n          return this._dtmf;\n        },\n        _pc: pc\n      };\n    };\n\n    // augment addTrack when getSenders is not available.\n    if (!window.RTCPeerConnection.prototype.getSenders) {\n      window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n        this._senders = this._senders || [];\n        return this._senders.slice(); // return a copy of the internal state.\n      };\n      const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n      window.RTCPeerConnection.prototype.addTrack =\n        function addTrack(track, stream) {\n          let sender = origAddTrack.apply(this, arguments);\n          if (!sender) {\n            sender = shimSenderWithDtmf(this, track);\n            this._senders.push(sender);\n          }\n          return sender;\n        };\n\n      const origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n      window.RTCPeerConnection.prototype.removeTrack =\n        function removeTrack(sender) {\n          origRemoveTrack.apply(this, arguments);\n          const idx = this._senders.indexOf(sender);\n          if (idx !== -1) {\n            this._senders.splice(idx, 1);\n          }\n        };\n    }\n    const origAddStream = window.RTCPeerConnection.prototype.addStream;\n    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n      this._senders = this._senders || [];\n      origAddStream.apply(this, [stream]);\n      stream.getTracks().forEach(track => {\n        this._senders.push(shimSenderWithDtmf(this, track));\n      });\n    };\n\n    const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n    window.RTCPeerConnection.prototype.removeStream =\n      function removeStream(stream) {\n        this._senders = this._senders || [];\n        origRemoveStream.apply(this, [stream]);\n\n        stream.getTracks().forEach(track => {\n          const sender = this._senders.find(s => s.track === track);\n          if (sender) { // remove sender\n            this._senders.splice(this._senders.indexOf(sender), 1);\n          }\n        });\n      };\n  } else if (typeof window === 'object' && window.RTCPeerConnection &&\n             'getSenders' in window.RTCPeerConnection.prototype &&\n             'createDTMFSender' in window.RTCPeerConnection.prototype &&\n             window.RTCRtpSender &&\n             !('dtmf' in window.RTCRtpSender.prototype)) {\n    const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n    window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n      const senders = origGetSenders.apply(this, []);\n      senders.forEach(sender => sender._pc = this);\n      return senders;\n    };\n\n    Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n      get() {\n        if (this._dtmf === undefined) {\n          if (this.track.kind === 'audio') {\n            this._dtmf = this._pc.createDTMFSender(this.track);\n          } else {\n            this._dtmf = null;\n          }\n        }\n        return this._dtmf;\n      }\n    });\n  }\n}\n\nexport function shimGetStats(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  const origGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    const [selector, onSucc, onErr] = arguments;\n\n    // If selector is a function then we are in the old style stats so just\n    // pass back the original getStats format to avoid breaking old users.\n    if (arguments.length > 0 && typeof selector === 'function') {\n      return origGetStats.apply(this, arguments);\n    }\n\n    // When spec-style getStats is supported, return those when called with\n    // either no arguments or the selector argument is null.\n    if (origGetStats.length === 0 && (arguments.length === 0 ||\n        typeof selector !== 'function')) {\n      return origGetStats.apply(this, []);\n    }\n\n    const fixChromeStats_ = function(response) {\n      const standardReport = {};\n      const reports = response.result();\n      reports.forEach(report => {\n        const standardStats = {\n          id: report.id,\n          timestamp: report.timestamp,\n          type: {\n            localcandidate: 'local-candidate',\n            remotecandidate: 'remote-candidate'\n          }[report.type] || report.type\n        };\n        report.names().forEach(name => {\n          standardStats[name] = report.stat(name);\n        });\n        standardReport[standardStats.id] = standardStats;\n      });\n\n      return standardReport;\n    };\n\n    // shim getStats with maplike support\n    const makeMapStats = function(stats) {\n      return new Map(Object.keys(stats).map(key => [key, stats[key]]));\n    };\n\n    if (arguments.length >= 2) {\n      const successCallbackWrapper_ = function(response) {\n        onSucc(makeMapStats(fixChromeStats_(response)));\n      };\n\n      return origGetStats.apply(this, [successCallbackWrapper_,\n        selector]);\n    }\n\n    // promise-support\n    return new Promise((resolve, reject) => {\n      origGetStats.apply(this, [\n        function(response) {\n          resolve(makeMapStats(fixChromeStats_(response)));\n        }, reject]);\n    }).then(onSucc, onErr);\n  };\n}\n\nexport function shimSenderReceiverGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender && window.RTCRtpReceiver)) {\n    return;\n  }\n\n  // shim sender stats.\n  if (!('getStats' in window.RTCRtpSender.prototype)) {\n    const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n    if (origGetSenders) {\n      window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n        const senders = origGetSenders.apply(this, []);\n        senders.forEach(sender => sender._pc = this);\n        return senders;\n      };\n    }\n\n    const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n    if (origAddTrack) {\n      window.RTCPeerConnection.prototype.addTrack = function addTrack() {\n        const sender = origAddTrack.apply(this, arguments);\n        sender._pc = this;\n        return sender;\n      };\n    }\n    window.RTCRtpSender.prototype.getStats = function getStats() {\n      const sender = this;\n      return this._pc.getStats().then(result =>\n        /* Note: this will include stats of all senders that\n         *   send a track with the same id as sender.track as\n         *   it is not possible to identify the RTCRtpSender.\n         */\n        utils.filterStats(result, sender.track, true));\n    };\n  }\n\n  // shim receiver stats.\n  if (!('getStats' in window.RTCRtpReceiver.prototype)) {\n    const origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n    if (origGetReceivers) {\n      window.RTCPeerConnection.prototype.getReceivers =\n        function getReceivers() {\n          const receivers = origGetReceivers.apply(this, []);\n          receivers.forEach(receiver => receiver._pc = this);\n          return receivers;\n        };\n    }\n    utils.wrapPeerConnectionEvent(window, 'track', e => {\n      e.receiver._pc = e.srcElement;\n      return e;\n    });\n    window.RTCRtpReceiver.prototype.getStats = function getStats() {\n      const receiver = this;\n      return this._pc.getStats().then(result =>\n        utils.filterStats(result, receiver.track, false));\n    };\n  }\n\n  if (!('getStats' in window.RTCRtpSender.prototype &&\n      'getStats' in window.RTCRtpReceiver.prototype)) {\n    return;\n  }\n\n  // shim RTCPeerConnection.getStats(track).\n  const origGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    if (arguments.length > 0 &&\n        arguments[0] instanceof window.MediaStreamTrack) {\n      const track = arguments[0];\n      let sender;\n      let receiver;\n      let err;\n      this.getSenders().forEach(s => {\n        if (s.track === track) {\n          if (sender) {\n            err = true;\n          } else {\n            sender = s;\n          }\n        }\n      });\n      this.getReceivers().forEach(r => {\n        if (r.track === track) {\n          if (receiver) {\n            err = true;\n          } else {\n            receiver = r;\n          }\n        }\n        return r.track === track;\n      });\n      if (err || (sender && receiver)) {\n        return Promise.reject(new DOMException(\n          'There are more than one sender or receiver for the track.',\n          'InvalidAccessError'));\n      } else if (sender) {\n        return sender.getStats();\n      } else if (receiver) {\n        return receiver.getStats();\n      }\n      return Promise.reject(new DOMException(\n        'There is no sender or receiver for the track.',\n        'InvalidAccessError'));\n    }\n    return origGetStats.apply(this, arguments);\n  };\n}\n\nexport function shimAddTrackRemoveTrackWithNative(window) {\n  // shim addTrack/removeTrack with native variants in order to make\n  // the interactions with legacy getLocalStreams behave as in other browsers.\n  // Keeps a mapping stream.id => [stream, rtpsenders...]\n  window.RTCPeerConnection.prototype.getLocalStreams =\n    function getLocalStreams() {\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      return Object.keys(this._shimmedLocalStreams)\n        .map(streamId => this._shimmedLocalStreams[streamId][0]);\n    };\n\n  const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n  window.RTCPeerConnection.prototype.addTrack =\n    function addTrack(track, stream) {\n      if (!stream) {\n        return origAddTrack.apply(this, arguments);\n      }\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n      const sender = origAddTrack.apply(this, arguments);\n      if (!this._shimmedLocalStreams[stream.id]) {\n        this._shimmedLocalStreams[stream.id] = [stream, sender];\n      } else if (this._shimmedLocalStreams[stream.id].indexOf(sender) === -1) {\n        this._shimmedLocalStreams[stream.id].push(sender);\n      }\n      return sender;\n    };\n\n  const origAddStream = window.RTCPeerConnection.prototype.addStream;\n  window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n    stream.getTracks().forEach(track => {\n      const alreadyExists = this.getSenders().find(s => s.track === track);\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n          'InvalidAccessError');\n      }\n    });\n    const existingSenders = this.getSenders();\n    origAddStream.apply(this, arguments);\n    const newSenders = this.getSenders()\n      .filter(newSender => existingSenders.indexOf(newSender) === -1);\n    this._shimmedLocalStreams[stream.id] = [stream].concat(newSenders);\n  };\n\n  const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n  window.RTCPeerConnection.prototype.removeStream =\n    function removeStream(stream) {\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      delete this._shimmedLocalStreams[stream.id];\n      return origRemoveStream.apply(this, arguments);\n    };\n\n  const origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n  window.RTCPeerConnection.prototype.removeTrack =\n    function removeTrack(sender) {\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      if (sender) {\n        Object.keys(this._shimmedLocalStreams).forEach(streamId => {\n          const idx = this._shimmedLocalStreams[streamId].indexOf(sender);\n          if (idx !== -1) {\n            this._shimmedLocalStreams[streamId].splice(idx, 1);\n          }\n          if (this._shimmedLocalStreams[streamId].length === 1) {\n            delete this._shimmedLocalStreams[streamId];\n          }\n        });\n      }\n      return origRemoveTrack.apply(this, arguments);\n    };\n}\n\nexport function shimAddTrackRemoveTrack(window, browserDetails) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  // shim addTrack and removeTrack.\n  if (window.RTCPeerConnection.prototype.addTrack &&\n      browserDetails.version >= 65) {\n    return shimAddTrackRemoveTrackWithNative(window);\n  }\n\n  // also shim pc.getLocalStreams when addTrack is shimmed\n  // to return the original streams.\n  const origGetLocalStreams = window.RTCPeerConnection.prototype\n    .getLocalStreams;\n  window.RTCPeerConnection.prototype.getLocalStreams =\n    function getLocalStreams() {\n      const nativeStreams = origGetLocalStreams.apply(this);\n      this._reverseStreams = this._reverseStreams || {};\n      return nativeStreams.map(stream => this._reverseStreams[stream.id]);\n    };\n\n  const origAddStream = window.RTCPeerConnection.prototype.addStream;\n  window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n    this._streams = this._streams || {};\n    this._reverseStreams = this._reverseStreams || {};\n\n    stream.getTracks().forEach(track => {\n      const alreadyExists = this.getSenders().find(s => s.track === track);\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n          'InvalidAccessError');\n      }\n    });\n    // Add identity mapping for consistency with addTrack.\n    // Unless this is being used with a stream from addTrack.\n    if (!this._reverseStreams[stream.id]) {\n      const newStream = new window.MediaStream(stream.getTracks());\n      this._streams[stream.id] = newStream;\n      this._reverseStreams[newStream.id] = stream;\n      stream = newStream;\n    }\n    origAddStream.apply(this, [stream]);\n  };\n\n  const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n  window.RTCPeerConnection.prototype.removeStream =\n    function removeStream(stream) {\n      this._streams = this._streams || {};\n      this._reverseStreams = this._reverseStreams || {};\n\n      origRemoveStream.apply(this, [(this._streams[stream.id] || stream)]);\n      delete this._reverseStreams[(this._streams[stream.id] ?\n        this._streams[stream.id].id : stream.id)];\n      delete this._streams[stream.id];\n    };\n\n  window.RTCPeerConnection.prototype.addTrack =\n    function addTrack(track, stream) {\n      if (this.signalingState === 'closed') {\n        throw new DOMException(\n          'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n          'InvalidStateError');\n      }\n      const streams = [].slice.call(arguments, 1);\n      if (streams.length !== 1 ||\n          !streams[0].getTracks().find(t => t === track)) {\n        // this is not fully correct but all we can manage without\n        // [[associated MediaStreams]] internal slot.\n        throw new DOMException(\n          'The adapter.js addTrack polyfill only supports a single ' +\n          ' stream which is associated with the specified track.',\n          'NotSupportedError');\n      }\n\n      const alreadyExists = this.getSenders().find(s => s.track === track);\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n          'InvalidAccessError');\n      }\n\n      this._streams = this._streams || {};\n      this._reverseStreams = this._reverseStreams || {};\n      const oldStream = this._streams[stream.id];\n      if (oldStream) {\n        // this is using odd Chrome behaviour, use with caution:\n        // https://bugs.chromium.org/p/webrtc/issues/detail?id=7815\n        // Note: we rely on the high-level addTrack/dtmf shim to\n        // create the sender with a dtmf sender.\n        oldStream.addTrack(track);\n\n        // Trigger ONN async.\n        Promise.resolve().then(() => {\n          this.dispatchEvent(new Event('negotiationneeded'));\n        });\n      } else {\n        const newStream = new window.MediaStream([track]);\n        this._streams[stream.id] = newStream;\n        this._reverseStreams[newStream.id] = stream;\n        this.addStream(newStream);\n      }\n      return this.getSenders().find(s => s.track === track);\n    };\n\n  // replace the internal stream id with the external one and\n  // vice versa.\n  function replaceInternalStreamId(pc, description) {\n    let sdp = description.sdp;\n    Object.keys(pc._reverseStreams || []).forEach(internalId => {\n      const externalStream = pc._reverseStreams[internalId];\n      const internalStream = pc._streams[externalStream.id];\n      sdp = sdp.replace(new RegExp(internalStream.id, 'g'),\n        externalStream.id);\n    });\n    return new RTCSessionDescription({\n      type: description.type,\n      sdp\n    });\n  }\n  function replaceExternalStreamId(pc, description) {\n    let sdp = description.sdp;\n    Object.keys(pc._reverseStreams || []).forEach(internalId => {\n      const externalStream = pc._reverseStreams[internalId];\n      const internalStream = pc._streams[externalStream.id];\n      sdp = sdp.replace(new RegExp(externalStream.id, 'g'),\n        internalStream.id);\n    });\n    return new RTCSessionDescription({\n      type: description.type,\n      sdp\n    });\n  }\n  ['createOffer', 'createAnswer'].forEach(function(method) {\n    const nativeMethod = window.RTCPeerConnection.prototype[method];\n    const methodObj = {[method]() {\n      const args = arguments;\n      const isLegacyCall = arguments.length &&\n          typeof arguments[0] === 'function';\n      if (isLegacyCall) {\n        return nativeMethod.apply(this, [\n          (description) => {\n            const desc = replaceInternalStreamId(this, description);\n            args[0].apply(null, [desc]);\n          },\n          (err) => {\n            if (args[1]) {\n              args[1].apply(null, err);\n            }\n          }, arguments[2]\n        ]);\n      }\n      return nativeMethod.apply(this, arguments)\n        .then(description => replaceInternalStreamId(this, description));\n    }};\n    window.RTCPeerConnection.prototype[method] = methodObj[method];\n  });\n\n  const origSetLocalDescription =\n      window.RTCPeerConnection.prototype.setLocalDescription;\n  window.RTCPeerConnection.prototype.setLocalDescription =\n    function setLocalDescription() {\n      if (!arguments.length || !arguments[0].type) {\n        return origSetLocalDescription.apply(this, arguments);\n      }\n      arguments[0] = replaceExternalStreamId(this, arguments[0]);\n      return origSetLocalDescription.apply(this, arguments);\n    };\n\n  // TODO: mangle getStats: https://w3c.github.io/webrtc-stats/#dom-rtcmediastreamstats-streamidentifier\n\n  const origLocalDescription = Object.getOwnPropertyDescriptor(\n    window.RTCPeerConnection.prototype, 'localDescription');\n  Object.defineProperty(window.RTCPeerConnection.prototype,\n    'localDescription', {\n      get() {\n        const description = origLocalDescription.get.apply(this);\n        if (description.type === '') {\n          return description;\n        }\n        return replaceInternalStreamId(this, description);\n      }\n    });\n\n  window.RTCPeerConnection.prototype.removeTrack =\n    function removeTrack(sender) {\n      if (this.signalingState === 'closed') {\n        throw new DOMException(\n          'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n          'InvalidStateError');\n      }\n      // We can not yet check for sender instanceof RTCRtpSender\n      // since we shim RTPSender. So we check if sender._pc is set.\n      if (!sender._pc) {\n        throw new DOMException('Argument 1 of RTCPeerConnection.removeTrack ' +\n            'does not implement interface RTCRtpSender.', 'TypeError');\n      }\n      const isLocal = sender._pc === this;\n      if (!isLocal) {\n        throw new DOMException('Sender was not created by this connection.',\n          'InvalidAccessError');\n      }\n\n      // Search for the native stream the senders track belongs to.\n      this._streams = this._streams || {};\n      let stream;\n      Object.keys(this._streams).forEach(streamid => {\n        const hasTrack = this._streams[streamid].getTracks()\n          .find(track => sender.track === track);\n        if (hasTrack) {\n          stream = this._streams[streamid];\n        }\n      });\n\n      if (stream) {\n        if (stream.getTracks().length === 1) {\n          // if this is the last track of the stream, remove the stream. This\n          // takes care of any shimmed _senders.\n          this.removeStream(this._reverseStreams[stream.id]);\n        } else {\n          // relying on the same odd chrome behaviour as above.\n          stream.removeTrack(sender.track);\n        }\n        this.dispatchEvent(new Event('negotiationneeded'));\n      }\n    };\n}\n\nexport function shimPeerConnection(window, browserDetails) {\n  if (!window.RTCPeerConnection && window.webkitRTCPeerConnection) {\n    // very basic support for old versions.\n    window.RTCPeerConnection = window.webkitRTCPeerConnection;\n  }\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  // shim implicit creation of RTCSessionDescription/RTCIceCandidate\n  if (browserDetails.version < 53) {\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n      .forEach(function(method) {\n        const nativeMethod = window.RTCPeerConnection.prototype[method];\n        const methodObj = {[method]() {\n          arguments[0] = new ((method === 'addIceCandidate') ?\n            window.RTCIceCandidate :\n            window.RTCSessionDescription)(arguments[0]);\n          return nativeMethod.apply(this, arguments);\n        }};\n        window.RTCPeerConnection.prototype[method] = methodObj[method];\n      });\n  }\n}\n\n// Attempt to fix ONN in plan-b mode.\nexport function fixNegotiationNeeded(window, browserDetails) {\n  utils.wrapPeerConnectionEvent(window, 'negotiationneeded', e => {\n    const pc = e.target;\n    if (browserDetails.version < 72 || (pc.getConfiguration &&\n        pc.getConfiguration().sdpSemantics === 'plan-b')) {\n      if (pc.signalingState !== 'stable') {\n        return;\n      }\n    }\n    return e;\n  });\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport * as utils from '../utils';\n\nexport function shimGetUserMedia(window, browserDetails) {\n  const navigator = window && window.navigator;\n  const MediaStreamTrack = window && window.MediaStreamTrack;\n\n  navigator.getUserMedia = function(constraints, onSuccess, onError) {\n    // Replace Firefox 44+'s deprecation warning with unprefixed version.\n    utils.deprecated('navigator.getUserMedia',\n      'navigator.mediaDevices.getUserMedia');\n    navigator.mediaDevices.getUserMedia(constraints).then(onSuccess, onError);\n  };\n\n  if (!(browserDetails.version > 55 &&\n      'autoGainControl' in navigator.mediaDevices.getSupportedConstraints())) {\n    const remap = function(obj, a, b) {\n      if (a in obj && !(b in obj)) {\n        obj[b] = obj[a];\n        delete obj[a];\n      }\n    };\n\n    const nativeGetUserMedia = navigator.mediaDevices.getUserMedia.\n      bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(c) {\n      if (typeof c === 'object' && typeof c.audio === 'object') {\n        c = JSON.parse(JSON.stringify(c));\n        remap(c.audio, 'autoGainControl', 'mozAutoGainControl');\n        remap(c.audio, 'noiseSuppression', 'mozNoiseSuppression');\n      }\n      return nativeGetUserMedia(c);\n    };\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.getSettings) {\n      const nativeGetSettings = MediaStreamTrack.prototype.getSettings;\n      MediaStreamTrack.prototype.getSettings = function() {\n        const obj = nativeGetSettings.apply(this, arguments);\n        remap(obj, 'mozAutoGainControl', 'autoGainControl');\n        remap(obj, 'mozNoiseSuppression', 'noiseSuppression');\n        return obj;\n      };\n    }\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.applyConstraints) {\n      const nativeApplyConstraints =\n        MediaStreamTrack.prototype.applyConstraints;\n      MediaStreamTrack.prototype.applyConstraints = function(c) {\n        if (this.kind === 'audio' && typeof c === 'object') {\n          c = JSON.parse(JSON.stringify(c));\n          remap(c, 'autoGainControl', 'mozAutoGainControl');\n          remap(c, 'noiseSuppression', 'mozNoiseSuppression');\n        }\n        return nativeApplyConstraints.apply(this, [c]);\n      };\n    }\n  }\n}\n","/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nexport function shimGetDisplayMedia(window, preferredMediaSource) {\n  if (window.navigator.mediaDevices &&\n    'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n  if (!(window.navigator.mediaDevices)) {\n    return;\n  }\n  window.navigator.mediaDevices.getDisplayMedia =\n    function getDisplayMedia(constraints) {\n      if (!(constraints && constraints.video)) {\n        const err = new DOMException('getDisplayMedia without video ' +\n            'constraints is undefined');\n        err.name = 'NotFoundError';\n        // from https://heycam.github.io/webidl/#idl-DOMException-error-names\n        err.code = 8;\n        return Promise.reject(err);\n      }\n      if (constraints.video === true) {\n        constraints.video = {mediaSource: preferredMediaSource};\n      } else {\n        constraints.video.mediaSource = preferredMediaSource;\n      }\n      return window.navigator.mediaDevices.getUserMedia(constraints);\n    };\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport * as utils from '../utils';\nexport {shimGetUserMedia} from './getusermedia';\nexport {shimGetDisplayMedia} from './getdisplaymedia';\n\nexport function shimOnTrack(window) {\n  if (typeof window === 'object' && window.RTCTrackEvent &&\n      ('receiver' in window.RTCTrackEvent.prototype) &&\n      !('transceiver' in window.RTCTrackEvent.prototype)) {\n    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n      get() {\n        return {receiver: this.receiver};\n      }\n    });\n  }\n}\n\nexport function shimPeerConnection(window, browserDetails) {\n  if (typeof window !== 'object' ||\n      !(window.RTCPeerConnection || window.mozRTCPeerConnection)) {\n    return; // probably media.peerconnection.enabled=false in about:config\n  }\n  if (!window.RTCPeerConnection && window.mozRTCPeerConnection) {\n    // very basic support for old versions.\n    window.RTCPeerConnection = window.mozRTCPeerConnection;\n  }\n\n  if (browserDetails.version < 53) {\n    // shim away need for obsolete RTCIceCandidate/RTCSessionDescription.\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n      .forEach(function(method) {\n        const nativeMethod = window.RTCPeerConnection.prototype[method];\n        const methodObj = {[method]() {\n          arguments[0] = new ((method === 'addIceCandidate') ?\n            window.RTCIceCandidate :\n            window.RTCSessionDescription)(arguments[0]);\n          return nativeMethod.apply(this, arguments);\n        }};\n        window.RTCPeerConnection.prototype[method] = methodObj[method];\n      });\n  }\n\n  const modernStatsTypes = {\n    inboundrtp: 'inbound-rtp',\n    outboundrtp: 'outbound-rtp',\n    candidatepair: 'candidate-pair',\n    localcandidate: 'local-candidate',\n    remotecandidate: 'remote-candidate'\n  };\n\n  const nativeGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    const [selector, onSucc, onErr] = arguments;\n    return nativeGetStats.apply(this, [selector || null])\n      .then(stats => {\n        if (browserDetails.version < 53 && !onSucc) {\n          // Shim only promise getStats with spec-hyphens in type names\n          // Leave callback version alone; misc old uses of forEach before Map\n          try {\n            stats.forEach(stat => {\n              stat.type = modernStatsTypes[stat.type] || stat.type;\n            });\n          } catch (e) {\n            if (e.name !== 'TypeError') {\n              throw e;\n            }\n            // Avoid TypeError: \"type\" is read-only, in old versions. 34-43ish\n            stats.forEach((stat, i) => {\n              stats.set(i, Object.assign({}, stat, {\n                type: modernStatsTypes[stat.type] || stat.type\n              }));\n            });\n          }\n        }\n        return stats;\n      })\n      .then(onSucc, onErr);\n  };\n}\n\nexport function shimSenderGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender)) {\n    return;\n  }\n  if (window.RTCRtpSender && 'getStats' in window.RTCRtpSender.prototype) {\n    return;\n  }\n  const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n  if (origGetSenders) {\n    window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n      const senders = origGetSenders.apply(this, []);\n      senders.forEach(sender => sender._pc = this);\n      return senders;\n    };\n  }\n\n  const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n  if (origAddTrack) {\n    window.RTCPeerConnection.prototype.addTrack = function addTrack() {\n      const sender = origAddTrack.apply(this, arguments);\n      sender._pc = this;\n      return sender;\n    };\n  }\n  window.RTCRtpSender.prototype.getStats = function getStats() {\n    return this.track ? this._pc.getStats(this.track) :\n      Promise.resolve(new Map());\n  };\n}\n\nexport function shimReceiverGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender)) {\n    return;\n  }\n  if (window.RTCRtpSender && 'getStats' in window.RTCRtpReceiver.prototype) {\n    return;\n  }\n  const origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n  if (origGetReceivers) {\n    window.RTCPeerConnection.prototype.getReceivers = function getReceivers() {\n      const receivers = origGetReceivers.apply(this, []);\n      receivers.forEach(receiver => receiver._pc = this);\n      return receivers;\n    };\n  }\n  utils.wrapPeerConnectionEvent(window, 'track', e => {\n    e.receiver._pc = e.srcElement;\n    return e;\n  });\n  window.RTCRtpReceiver.prototype.getStats = function getStats() {\n    return this._pc.getStats(this.track);\n  };\n}\n\nexport function shimRemoveStream(window) {\n  if (!window.RTCPeerConnection ||\n      'removeStream' in window.RTCPeerConnection.prototype) {\n    return;\n  }\n  window.RTCPeerConnection.prototype.removeStream =\n    function removeStream(stream) {\n      utils.deprecated('removeStream', 'removeTrack');\n      this.getSenders().forEach(sender => {\n        if (sender.track && stream.getTracks().includes(sender.track)) {\n          this.removeTrack(sender);\n        }\n      });\n    };\n}\n\nexport function shimRTCDataChannel(window) {\n  // rename DataChannel to RTCDataChannel (native fix in FF60):\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1173851\n  if (window.DataChannel && !window.RTCDataChannel) {\n    window.RTCDataChannel = window.DataChannel;\n  }\n}\n\nexport function shimAddTransceiver(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!(typeof window === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  const origAddTransceiver = window.RTCPeerConnection.prototype.addTransceiver;\n  if (origAddTransceiver) {\n    window.RTCPeerConnection.prototype.addTransceiver =\n      function addTransceiver() {\n        this.setParametersPromises = [];\n        // WebIDL input coercion and validation\n        let sendEncodings = arguments[1] && arguments[1].sendEncodings;\n        if (sendEncodings === undefined) {\n          sendEncodings = [];\n        }\n        sendEncodings = [...sendEncodings];\n        const shouldPerformCheck = sendEncodings.length > 0;\n        if (shouldPerformCheck) {\n          // If sendEncodings params are provided, validate grammar\n          sendEncodings.forEach((encodingParam) => {\n            if ('rid' in encodingParam) {\n              const ridRegex = /^[a-z0-9]{0,16}$/i;\n              if (!ridRegex.test(encodingParam.rid)) {\n                throw new TypeError('Invalid RID value provided.');\n              }\n            }\n            if ('scaleResolutionDownBy' in encodingParam) {\n              if (!(parseFloat(encodingParam.scaleResolutionDownBy) >= 1.0)) {\n                throw new RangeError('scale_resolution_down_by must be >= 1.0');\n              }\n            }\n            if ('maxFramerate' in encodingParam) {\n              if (!(parseFloat(encodingParam.maxFramerate) >= 0)) {\n                throw new RangeError('max_framerate must be >= 0.0');\n              }\n            }\n          });\n        }\n        const transceiver = origAddTransceiver.apply(this, arguments);\n        if (shouldPerformCheck) {\n          // Check if the init options were applied. If not we do this in an\n          // asynchronous way and save the promise reference in a global object.\n          // This is an ugly hack, but at the same time is way more robust than\n          // checking the sender parameters before and after the createOffer\n          // Also note that after the createoffer we are not 100% sure that\n          // the params were asynchronously applied so we might miss the\n          // opportunity to recreate offer.\n          const {sender} = transceiver;\n          const params = sender.getParameters();\n          if (!('encodings' in params) ||\n              // Avoid being fooled by patched getParameters() below.\n              (params.encodings.length === 1 &&\n               Object.keys(params.encodings[0]).length === 0)) {\n            params.encodings = sendEncodings;\n            sender.sendEncodings = sendEncodings;\n            this.setParametersPromises.push(sender.setParameters(params)\n              .then(() => {\n                delete sender.sendEncodings;\n              }).catch(() => {\n                delete sender.sendEncodings;\n              })\n            );\n          }\n        }\n        return transceiver;\n      };\n  }\n}\n\nexport function shimGetParameters(window) {\n  if (!(typeof window === 'object' && window.RTCRtpSender)) {\n    return;\n  }\n  const origGetParameters = window.RTCRtpSender.prototype.getParameters;\n  if (origGetParameters) {\n    window.RTCRtpSender.prototype.getParameters =\n      function getParameters() {\n        const params = origGetParameters.apply(this, arguments);\n        if (!('encodings' in params)) {\n          params.encodings = [].concat(this.sendEncodings || [{}]);\n        }\n        return params;\n      };\n  }\n}\n\nexport function shimCreateOffer(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!(typeof window === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  const origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n  window.RTCPeerConnection.prototype.createOffer = function createOffer() {\n    if (this.setParametersPromises && this.setParametersPromises.length) {\n      return Promise.all(this.setParametersPromises)\n        .then(() => {\n          return origCreateOffer.apply(this, arguments);\n        })\n        .finally(() => {\n          this.setParametersPromises = [];\n        });\n    }\n    return origCreateOffer.apply(this, arguments);\n  };\n}\n\nexport function shimCreateAnswer(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!(typeof window === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  const origCreateAnswer = window.RTCPeerConnection.prototype.createAnswer;\n  window.RTCPeerConnection.prototype.createAnswer = function createAnswer() {\n    if (this.setParametersPromises && this.setParametersPromises.length) {\n      return Promise.all(this.setParametersPromises)\n        .then(() => {\n          return origCreateAnswer.apply(this, arguments);\n        })\n        .finally(() => {\n          this.setParametersPromises = [];\n        });\n    }\n    return origCreateAnswer.apply(this, arguments);\n  };\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n'use strict';\nimport * as utils from '../utils';\n\nexport function shimLocalStreamsAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  if (!('getLocalStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getLocalStreams =\n      function getLocalStreams() {\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        return this._localStreams;\n      };\n  }\n  if (!('addStream' in window.RTCPeerConnection.prototype)) {\n    const _addTrack = window.RTCPeerConnection.prototype.addTrack;\n    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n      if (!this._localStreams) {\n        this._localStreams = [];\n      }\n      if (!this._localStreams.includes(stream)) {\n        this._localStreams.push(stream);\n      }\n      // Try to emulate Chrome's behaviour of adding in audio-video order.\n      // Safari orders by track id.\n      stream.getAudioTracks().forEach(track => _addTrack.call(this, track,\n        stream));\n      stream.getVideoTracks().forEach(track => _addTrack.call(this, track,\n        stream));\n    };\n\n    window.RTCPeerConnection.prototype.addTrack =\n      function addTrack(track, ...streams) {\n        if (streams) {\n          streams.forEach((stream) => {\n            if (!this._localStreams) {\n              this._localStreams = [stream];\n            } else if (!this._localStreams.includes(stream)) {\n              this._localStreams.push(stream);\n            }\n          });\n        }\n        return _addTrack.apply(this, arguments);\n      };\n  }\n  if (!('removeStream' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.removeStream =\n      function removeStream(stream) {\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        const index = this._localStreams.indexOf(stream);\n        if (index === -1) {\n          return;\n        }\n        this._localStreams.splice(index, 1);\n        const tracks = stream.getTracks();\n        this.getSenders().forEach(sender => {\n          if (tracks.includes(sender.track)) {\n            this.removeTrack(sender);\n          }\n        });\n      };\n  }\n}\n\nexport function shimRemoteStreamsAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  if (!('getRemoteStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getRemoteStreams =\n      function getRemoteStreams() {\n        return this._remoteStreams ? this._remoteStreams : [];\n      };\n  }\n  if (!('onaddstream' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'onaddstream', {\n      get() {\n        return this._onaddstream;\n      },\n      set(f) {\n        if (this._onaddstream) {\n          this.removeEventListener('addstream', this._onaddstream);\n          this.removeEventListener('track', this._onaddstreampoly);\n        }\n        this.addEventListener('addstream', this._onaddstream = f);\n        this.addEventListener('track', this._onaddstreampoly = (e) => {\n          e.streams.forEach(stream => {\n            if (!this._remoteStreams) {\n              this._remoteStreams = [];\n            }\n            if (this._remoteStreams.includes(stream)) {\n              return;\n            }\n            this._remoteStreams.push(stream);\n            const event = new Event('addstream');\n            event.stream = stream;\n            this.dispatchEvent(event);\n          });\n        });\n      }\n    });\n    const origSetRemoteDescription =\n      window.RTCPeerConnection.prototype.setRemoteDescription;\n    window.RTCPeerConnection.prototype.setRemoteDescription =\n      function setRemoteDescription() {\n        const pc = this;\n        if (!this._onaddstreampoly) {\n          this.addEventListener('track', this._onaddstreampoly = function(e) {\n            e.streams.forEach(stream => {\n              if (!pc._remoteStreams) {\n                pc._remoteStreams = [];\n              }\n              if (pc._remoteStreams.indexOf(stream) >= 0) {\n                return;\n              }\n              pc._remoteStreams.push(stream);\n              const event = new Event('addstream');\n              event.stream = stream;\n              pc.dispatchEvent(event);\n            });\n          });\n        }\n        return origSetRemoteDescription.apply(pc, arguments);\n      };\n  }\n}\n\nexport function shimCallbacksAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  const prototype = window.RTCPeerConnection.prototype;\n  const origCreateOffer = prototype.createOffer;\n  const origCreateAnswer = prototype.createAnswer;\n  const setLocalDescription = prototype.setLocalDescription;\n  const setRemoteDescription = prototype.setRemoteDescription;\n  const addIceCandidate = prototype.addIceCandidate;\n\n  prototype.createOffer =\n    function createOffer(successCallback, failureCallback) {\n      const options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n      const promise = origCreateOffer.apply(this, [options]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n\n  prototype.createAnswer =\n    function createAnswer(successCallback, failureCallback) {\n      const options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n      const promise = origCreateAnswer.apply(this, [options]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n\n  let withCallback = function(description, successCallback, failureCallback) {\n    const promise = setLocalDescription.apply(this, [description]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.setLocalDescription = withCallback;\n\n  withCallback = function(description, successCallback, failureCallback) {\n    const promise = setRemoteDescription.apply(this, [description]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.setRemoteDescription = withCallback;\n\n  withCallback = function(candidate, successCallback, failureCallback) {\n    const promise = addIceCandidate.apply(this, [candidate]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.addIceCandidate = withCallback;\n}\n\nexport function shimGetUserMedia(window) {\n  const navigator = window && window.navigator;\n\n  if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n    // shim not needed in Safari 12.1\n    const mediaDevices = navigator.mediaDevices;\n    const _getUserMedia = mediaDevices.getUserMedia.bind(mediaDevices);\n    navigator.mediaDevices.getUserMedia = (constraints) => {\n      return _getUserMedia(shimConstraints(constraints));\n    };\n  }\n\n  if (!navigator.getUserMedia && navigator.mediaDevices &&\n    navigator.mediaDevices.getUserMedia) {\n    navigator.getUserMedia = function getUserMedia(constraints, cb, errcb) {\n      navigator.mediaDevices.getUserMedia(constraints)\n        .then(cb, errcb);\n    }.bind(navigator);\n  }\n}\n\nexport function shimConstraints(constraints) {\n  if (constraints && constraints.video !== undefined) {\n    return Object.assign({},\n      constraints,\n      {video: utils.compactObject(constraints.video)}\n    );\n  }\n\n  return constraints;\n}\n\nexport function shimRTCIceServerUrls(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\n  const OrigPeerConnection = window.RTCPeerConnection;\n  window.RTCPeerConnection =\n    function RTCPeerConnection(pcConfig, pcConstraints) {\n      if (pcConfig && pcConfig.iceServers) {\n        const newIceServers = [];\n        for (let i = 0; i < pcConfig.iceServers.length; i++) {\n          let server = pcConfig.iceServers[i];\n          if (server.urls === undefined && server.url) {\n            utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n            server = JSON.parse(JSON.stringify(server));\n            server.urls = server.url;\n            delete server.url;\n            newIceServers.push(server);\n          } else {\n            newIceServers.push(pcConfig.iceServers[i]);\n          }\n        }\n        pcConfig.iceServers = newIceServers;\n      }\n      return new OrigPeerConnection(pcConfig, pcConstraints);\n    };\n  window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;\n  // wrap static methods. Currently just generateCertificate.\n  if ('generateCertificate' in OrigPeerConnection) {\n    Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n      get() {\n        return OrigPeerConnection.generateCertificate;\n      }\n    });\n  }\n}\n\nexport function shimTrackEventTransceiver(window) {\n  // Add event.transceiver member over deprecated event.receiver\n  if (typeof window === 'object' && window.RTCTrackEvent &&\n      'receiver' in window.RTCTrackEvent.prototype &&\n      !('transceiver' in window.RTCTrackEvent.prototype)) {\n    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n      get() {\n        return {receiver: this.receiver};\n      }\n    });\n  }\n}\n\nexport function shimCreateOfferLegacy(window) {\n  const origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n  window.RTCPeerConnection.prototype.createOffer =\n    function createOffer(offerOptions) {\n      if (offerOptions) {\n        if (typeof offerOptions.offerToReceiveAudio !== 'undefined') {\n          // support bit values\n          offerOptions.offerToReceiveAudio =\n            !!offerOptions.offerToReceiveAudio;\n        }\n        const audioTransceiver = this.getTransceivers().find(transceiver =>\n          transceiver.receiver.track.kind === 'audio');\n        if (offerOptions.offerToReceiveAudio === false && audioTransceiver) {\n          if (audioTransceiver.direction === 'sendrecv') {\n            if (audioTransceiver.setDirection) {\n              audioTransceiver.setDirection('sendonly');\n            } else {\n              audioTransceiver.direction = 'sendonly';\n            }\n          } else if (audioTransceiver.direction === 'recvonly') {\n            if (audioTransceiver.setDirection) {\n              audioTransceiver.setDirection('inactive');\n            } else {\n              audioTransceiver.direction = 'inactive';\n            }\n          }\n        } else if (offerOptions.offerToReceiveAudio === true &&\n            !audioTransceiver) {\n          this.addTransceiver('audio', {direction: 'recvonly'});\n        }\n\n        if (typeof offerOptions.offerToReceiveVideo !== 'undefined') {\n          // support bit values\n          offerOptions.offerToReceiveVideo =\n            !!offerOptions.offerToReceiveVideo;\n        }\n        const videoTransceiver = this.getTransceivers().find(transceiver =>\n          transceiver.receiver.track.kind === 'video');\n        if (offerOptions.offerToReceiveVideo === false && videoTransceiver) {\n          if (videoTransceiver.direction === 'sendrecv') {\n            if (videoTransceiver.setDirection) {\n              videoTransceiver.setDirection('sendonly');\n            } else {\n              videoTransceiver.direction = 'sendonly';\n            }\n          } else if (videoTransceiver.direction === 'recvonly') {\n            if (videoTransceiver.setDirection) {\n              videoTransceiver.setDirection('inactive');\n            } else {\n              videoTransceiver.direction = 'inactive';\n            }\n          }\n        } else if (offerOptions.offerToReceiveVideo === true &&\n            !videoTransceiver) {\n          this.addTransceiver('video', {direction: 'recvonly'});\n        }\n      }\n      return origCreateOffer.apply(this, arguments);\n    };\n}\n\nexport function shimAudioContext(window) {\n  if (typeof window !== 'object' || window.AudioContext) {\n    return;\n  }\n  window.AudioContext = window.webkitAudioContext;\n}\n\n","/*\n *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport SDPUtils from 'sdp';\nimport * as utils from './utils';\n\nexport function shimRTCIceCandidate(window) {\n  // foundation is arbitrarily chosen as an indicator for full support for\n  // https://w3c.github.io/webrtc-pc/#rtcicecandidate-interface\n  if (!window.RTCIceCandidate || (window.RTCIceCandidate && 'foundation' in\n      window.RTCIceCandidate.prototype)) {\n    return;\n  }\n\n  const NativeRTCIceCandidate = window.RTCIceCandidate;\n  window.RTCIceCandidate = function RTCIceCandidate(args) {\n    // Remove the a= which shouldn't be part of the candidate string.\n    if (typeof args === 'object' && args.candidate &&\n        args.candidate.indexOf('a=') === 0) {\n      args = JSON.parse(JSON.stringify(args));\n      args.candidate = args.candidate.substring(2);\n    }\n\n    if (args.candidate && args.candidate.length) {\n      // Augment the native candidate with the parsed fields.\n      const nativeCandidate = new NativeRTCIceCandidate(args);\n      const parsedCandidate = SDPUtils.parseCandidate(args.candidate);\n      for (const key in parsedCandidate) {\n        if (!(key in nativeCandidate)) {\n          Object.defineProperty(nativeCandidate, key,\n            {value: parsedCandidate[key]});\n        }\n      }\n\n      // Override serializer to not serialize the extra attributes.\n      nativeCandidate.toJSON = function toJSON() {\n        return {\n          candidate: nativeCandidate.candidate,\n          sdpMid: nativeCandidate.sdpMid,\n          sdpMLineIndex: nativeCandidate.sdpMLineIndex,\n          usernameFragment: nativeCandidate.usernameFragment,\n        };\n      };\n      return nativeCandidate;\n    }\n    return new NativeRTCIceCandidate(args);\n  };\n  window.RTCIceCandidate.prototype = NativeRTCIceCandidate.prototype;\n\n  // Hook up the augmented candidate in onicecandidate and\n  // addEventListener('icecandidate', ...)\n  utils.wrapPeerConnectionEvent(window, 'icecandidate', e => {\n    if (e.candidate) {\n      Object.defineProperty(e, 'candidate', {\n        value: new window.RTCIceCandidate(e.candidate),\n        writable: 'false'\n      });\n    }\n    return e;\n  });\n}\n\nexport function shimRTCIceCandidateRelayProtocol(window) {\n  if (!window.RTCIceCandidate || (window.RTCIceCandidate && 'relayProtocol' in\n      window.RTCIceCandidate.prototype)) {\n    return;\n  }\n\n  // Hook up the augmented candidate in onicecandidate and\n  // addEventListener('icecandidate', ...)\n  utils.wrapPeerConnectionEvent(window, 'icecandidate', e => {\n    if (e.candidate) {\n      const parsedCandidate = SDPUtils.parseCandidate(e.candidate.candidate);\n      if (parsedCandidate.type === 'relay') {\n        // This is a libwebrtc-specific mapping of local type preference\n        // to relayProtocol.\n        e.candidate.relayProtocol = {\n          0: 'tls',\n          1: 'tcp',\n          2: 'udp',\n        }[parsedCandidate.priority >> 24];\n      }\n    }\n    return e;\n  });\n}\n\nexport function shimMaxMessageSize(window, browserDetails) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  if (!('sctp' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'sctp', {\n      get() {\n        return typeof this._sctp === 'undefined' ? null : this._sctp;\n      }\n    });\n  }\n\n  const sctpInDescription = function(description) {\n    if (!description || !description.sdp) {\n      return false;\n    }\n    const sections = SDPUtils.splitSections(description.sdp);\n    sections.shift();\n    return sections.some(mediaSection => {\n      const mLine = SDPUtils.parseMLine(mediaSection);\n      return mLine && mLine.kind === 'application'\n          && mLine.protocol.indexOf('SCTP') !== -1;\n    });\n  };\n\n  const getRemoteFirefoxVersion = function(description) {\n    // TODO: Is there a better solution for detecting Firefox?\n    const match = description.sdp.match(/mozilla...THIS_IS_SDPARTA-(\\d+)/);\n    if (match === null || match.length < 2) {\n      return -1;\n    }\n    const version = parseInt(match[1], 10);\n    // Test for NaN (yes, this is ugly)\n    return version !== version ? -1 : version;\n  };\n\n  const getCanSendMaxMessageSize = function(remoteIsFirefox) {\n    // Every implementation we know can send at least 64 KiB.\n    // Note: Although Chrome is technically able to send up to 256 KiB, the\n    //       data does not reach the other peer reliably.\n    //       See: https://bugs.chromium.org/p/webrtc/issues/detail?id=8419\n    let canSendMaxMessageSize = 65536;\n    if (browserDetails.browser === 'firefox') {\n      if (browserDetails.version < 57) {\n        if (remoteIsFirefox === -1) {\n          // FF < 57 will send in 16 KiB chunks using the deprecated PPID\n          // fragmentation.\n          canSendMaxMessageSize = 16384;\n        } else {\n          // However, other FF (and RAWRTC) can reassemble PPID-fragmented\n          // messages. Thus, supporting ~2 GiB when sending.\n          canSendMaxMessageSize = 2147483637;\n        }\n      } else if (browserDetails.version < 60) {\n        // Currently, all FF >= 57 will reset the remote maximum message size\n        // to the default value when a data channel is created at a later\n        // stage. :(\n        // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n        canSendMaxMessageSize =\n          browserDetails.version === 57 ? 65535 : 65536;\n      } else {\n        // FF >= 60 supports sending ~2 GiB\n        canSendMaxMessageSize = 2147483637;\n      }\n    }\n    return canSendMaxMessageSize;\n  };\n\n  const getMaxMessageSize = function(description, remoteIsFirefox) {\n    // Note: 65536 bytes is the default value from the SDP spec. Also,\n    //       every implementation we know supports receiving 65536 bytes.\n    let maxMessageSize = 65536;\n\n    // FF 57 has a slightly incorrect default remote max message size, so\n    // we need to adjust it here to avoid a failure when sending.\n    // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1425697\n    if (browserDetails.browser === 'firefox'\n         && browserDetails.version === 57) {\n      maxMessageSize = 65535;\n    }\n\n    const match = SDPUtils.matchPrefix(description.sdp,\n      'a=max-message-size:');\n    if (match.length > 0) {\n      maxMessageSize = parseInt(match[0].substring(19), 10);\n    } else if (browserDetails.browser === 'firefox' &&\n                remoteIsFirefox !== -1) {\n      // If the maximum message size is not present in the remote SDP and\n      // both local and remote are Firefox, the remote peer can receive\n      // ~2 GiB.\n      maxMessageSize = 2147483637;\n    }\n    return maxMessageSize;\n  };\n\n  const origSetRemoteDescription =\n      window.RTCPeerConnection.prototype.setRemoteDescription;\n  window.RTCPeerConnection.prototype.setRemoteDescription =\n    function setRemoteDescription() {\n      this._sctp = null;\n      // Chrome decided to not expose .sctp in plan-b mode.\n      // As usual, adapter.js has to do an 'ugly worakaround'\n      // to cover up the mess.\n      if (browserDetails.browser === 'chrome' && browserDetails.version >= 76) {\n        const {sdpSemantics} = this.getConfiguration();\n        if (sdpSemantics === 'plan-b') {\n          Object.defineProperty(this, 'sctp', {\n            get() {\n              return typeof this._sctp === 'undefined' ? null : this._sctp;\n            },\n            enumerable: true,\n            configurable: true,\n          });\n        }\n      }\n\n      if (sctpInDescription(arguments[0])) {\n        // Check if the remote is FF.\n        const isFirefox = getRemoteFirefoxVersion(arguments[0]);\n\n        // Get the maximum message size the local peer is capable of sending\n        const canSendMMS = getCanSendMaxMessageSize(isFirefox);\n\n        // Get the maximum message size of the remote peer.\n        const remoteMMS = getMaxMessageSize(arguments[0], isFirefox);\n\n        // Determine final maximum message size\n        let maxMessageSize;\n        if (canSendMMS === 0 && remoteMMS === 0) {\n          maxMessageSize = Number.POSITIVE_INFINITY;\n        } else if (canSendMMS === 0 || remoteMMS === 0) {\n          maxMessageSize = Math.max(canSendMMS, remoteMMS);\n        } else {\n          maxMessageSize = Math.min(canSendMMS, remoteMMS);\n        }\n\n        // Create a dummy RTCSctpTransport object and the 'maxMessageSize'\n        // attribute.\n        const sctp = {};\n        Object.defineProperty(sctp, 'maxMessageSize', {\n          get() {\n            return maxMessageSize;\n          }\n        });\n        this._sctp = sctp;\n      }\n\n      return origSetRemoteDescription.apply(this, arguments);\n    };\n}\n\nexport function shimSendThrowTypeError(window) {\n  if (!(window.RTCPeerConnection &&\n      'createDataChannel' in window.RTCPeerConnection.prototype)) {\n    return;\n  }\n\n  // Note: Although Firefox >= 57 has a native implementation, the maximum\n  //       message size can be reset for all data channels at a later stage.\n  //       See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n\n  function wrapDcSend(dc, pc) {\n    const origDataChannelSend = dc.send;\n    dc.send = function send() {\n      const data = arguments[0];\n      const length = data.length || data.size || data.byteLength;\n      if (dc.readyState === 'open' &&\n          pc.sctp && length > pc.sctp.maxMessageSize) {\n        throw new TypeError('Message too large (can send a maximum of ' +\n          pc.sctp.maxMessageSize + ' bytes)');\n      }\n      return origDataChannelSend.apply(dc, arguments);\n    };\n  }\n  const origCreateDataChannel =\n    window.RTCPeerConnection.prototype.createDataChannel;\n  window.RTCPeerConnection.prototype.createDataChannel =\n    function createDataChannel() {\n      const dataChannel = origCreateDataChannel.apply(this, arguments);\n      wrapDcSend(dataChannel, this);\n      return dataChannel;\n    };\n  utils.wrapPeerConnectionEvent(window, 'datachannel', e => {\n    wrapDcSend(e.channel, e.target);\n    return e;\n  });\n}\n\n\n/* shims RTCConnectionState by pretending it is the same as iceConnectionState.\n * See https://bugs.chromium.org/p/webrtc/issues/detail?id=6145#c12\n * for why this is a valid hack in Chrome. In Firefox it is slightly incorrect\n * since DTLS failures would be hidden. See\n * https://bugzilla.mozilla.org/show_bug.cgi?id=1265827\n * for the Firefox tracking bug.\n */\nexport function shimConnectionState(window) {\n  if (!window.RTCPeerConnection ||\n      'connectionState' in window.RTCPeerConnection.prototype) {\n    return;\n  }\n  const proto = window.RTCPeerConnection.prototype;\n  Object.defineProperty(proto, 'connectionState', {\n    get() {\n      return {\n        completed: 'connected',\n        checking: 'connecting'\n      }[this.iceConnectionState] || this.iceConnectionState;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(proto, 'onconnectionstatechange', {\n    get() {\n      return this._onconnectionstatechange || null;\n    },\n    set(cb) {\n      if (this._onconnectionstatechange) {\n        this.removeEventListener('connectionstatechange',\n          this._onconnectionstatechange);\n        delete this._onconnectionstatechange;\n      }\n      if (cb) {\n        this.addEventListener('connectionstatechange',\n          this._onconnectionstatechange = cb);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  ['setLocalDescription', 'setRemoteDescription'].forEach((method) => {\n    const origMethod = proto[method];\n    proto[method] = function() {\n      if (!this._connectionstatechangepoly) {\n        this._connectionstatechangepoly = e => {\n          const pc = e.target;\n          if (pc._lastConnectionState !== pc.connectionState) {\n            pc._lastConnectionState = pc.connectionState;\n            const newEvent = new Event('connectionstatechange', e);\n            pc.dispatchEvent(newEvent);\n          }\n          return e;\n        };\n        this.addEventListener('iceconnectionstatechange',\n          this._connectionstatechangepoly);\n      }\n      return origMethod.apply(this, arguments);\n    };\n  });\n}\n\nexport function removeExtmapAllowMixed(window, browserDetails) {\n  /* remove a=extmap-allow-mixed for webrtc.org < M71 */\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  if (browserDetails.browser === 'chrome' && browserDetails.version >= 71) {\n    return;\n  }\n  if (browserDetails.browser === 'safari' && browserDetails.version >= 605) {\n    return;\n  }\n  const nativeSRD = window.RTCPeerConnection.prototype.setRemoteDescription;\n  window.RTCPeerConnection.prototype.setRemoteDescription =\n  function setRemoteDescription(desc) {\n    if (desc && desc.sdp && desc.sdp.indexOf('\\na=extmap-allow-mixed') !== -1) {\n      const sdp = desc.sdp.split('\\n').filter((line) => {\n        return line.trim() !== 'a=extmap-allow-mixed';\n      }).join('\\n');\n      // Safari enforces read-only-ness of RTCSessionDescription fields.\n      if (window.RTCSessionDescription &&\n          desc instanceof window.RTCSessionDescription) {\n        arguments[0] = new window.RTCSessionDescription({\n          type: desc.type,\n          sdp,\n        });\n      } else {\n        desc.sdp = sdp;\n      }\n    }\n    return nativeSRD.apply(this, arguments);\n  };\n}\n\nexport function shimAddIceCandidateNullOrEmpty(window, browserDetails) {\n  // Support for addIceCandidate(null or undefined)\n  // as well as addIceCandidate({candidate: \"\", ...})\n  // https://bugs.chromium.org/p/chromium/issues/detail?id=978582\n  // Note: must be called before other polyfills which change the signature.\n  if (!(window.RTCPeerConnection && window.RTCPeerConnection.prototype)) {\n    return;\n  }\n  const nativeAddIceCandidate =\n      window.RTCPeerConnection.prototype.addIceCandidate;\n  if (!nativeAddIceCandidate || nativeAddIceCandidate.length === 0) {\n    return;\n  }\n  window.RTCPeerConnection.prototype.addIceCandidate =\n    function addIceCandidate() {\n      if (!arguments[0]) {\n        if (arguments[1]) {\n          arguments[1].apply(null);\n        }\n        return Promise.resolve();\n      }\n      // Firefox 68+ emits and processes {candidate: \"\", ...}, ignore\n      // in older versions.\n      // Native support for ignoring exists for Chrome M77+.\n      // Safari ignores as well, exact version unknown but works in the same\n      // version that also ignores addIceCandidate(null).\n      if (((browserDetails.browser === 'chrome' && browserDetails.version < 78)\n           || (browserDetails.browser === 'firefox'\n               && browserDetails.version < 68)\n           || (browserDetails.browser === 'safari'))\n          && arguments[0] && arguments[0].candidate === '') {\n        return Promise.resolve();\n      }\n      return nativeAddIceCandidate.apply(this, arguments);\n    };\n}\n\n// Note: Make sure to call this ahead of APIs that modify\n// setLocalDescription.length\nexport function shimParameterlessSetLocalDescription(window, browserDetails) {\n  if (!(window.RTCPeerConnection && window.RTCPeerConnection.prototype)) {\n    return;\n  }\n  const nativeSetLocalDescription =\n      window.RTCPeerConnection.prototype.setLocalDescription;\n  if (!nativeSetLocalDescription || nativeSetLocalDescription.length === 0) {\n    return;\n  }\n  window.RTCPeerConnection.prototype.setLocalDescription =\n    function setLocalDescription() {\n      let desc = arguments[0] || {};\n      if (typeof desc !== 'object' || (desc.type && desc.sdp)) {\n        return nativeSetLocalDescription.apply(this, arguments);\n      }\n      // The remaining steps should technically happen when SLD comes off the\n      // RTCPeerConnection's operations chain (not ahead of going on it), but\n      // this is too difficult to shim. Instead, this shim only covers the\n      // common case where the operations chain is empty. This is imperfect, but\n      // should cover many cases. Rationale: Even if we can't reduce the glare\n      // window to zero on imperfect implementations, there's value in tapping\n      // into the perfect negotiation pattern that several browsers support.\n      desc = {type: desc.type, sdp: desc.sdp};\n      if (!desc.type) {\n        switch (this.signalingState) {\n          case 'stable':\n          case 'have-local-offer':\n          case 'have-remote-pranswer':\n            desc.type = 'offer';\n            break;\n          default:\n            desc.type = 'answer';\n            break;\n        }\n      }\n      if (desc.sdp || (desc.type !== 'offer' && desc.type !== 'answer')) {\n        return nativeSetLocalDescription.apply(this, [desc]);\n      }\n      const func = desc.type === 'offer' ? this.createOffer : this.createAnswer;\n      return func.apply(this)\n        .then(d => nativeSetLocalDescription.apply(this, [d]));\n    };\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n\n'use strict';\n\nimport {adapterFactory} from './adapter_factory.js';\n\nconst adapter =\n  adapterFactory({window: typeof window === 'undefined' ? undefined : window});\nexport default adapter;\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\nimport * as utils from './utils';\n\n// Browser shims.\nimport * as chromeShim from './chrome/chrome_shim';\nimport * as firefoxShim from './firefox/firefox_shim';\nimport * as safariShim from './safari/safari_shim';\nimport * as commonShim from './common_shim';\nimport * as sdp from 'sdp';\n\n// Shimming starts here.\nexport function adapterFactory({window} = {}, options = {\n  shimChrome: true,\n  shimFirefox: true,\n  shimSafari: true,\n}) {\n  // Utils.\n  const logging = utils.log;\n  const browserDetails = utils.detectBrowser(window);\n\n  const adapter = {\n    browserDetails,\n    commonShim,\n    extractVersion: utils.extractVersion,\n    disableLog: utils.disableLog,\n    disableWarnings: utils.disableWarnings,\n    // Expose sdp as a convenience. For production apps include directly.\n    sdp,\n  };\n\n  // Shim browser if found.\n  switch (browserDetails.browser) {\n    case 'chrome':\n      if (!chromeShim || !chromeShim.shimPeerConnection ||\n          !options.shimChrome) {\n        logging('Chrome shim is not included in this adapter release.');\n        return adapter;\n      }\n      if (browserDetails.version === null) {\n        logging('Chrome shim can not determine version, not shimming.');\n        return adapter;\n      }\n      logging('adapter.js shimming chrome.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = chromeShim;\n\n      // Must be called before shimPeerConnection.\n      commonShim.shimAddIceCandidateNullOrEmpty(window, browserDetails);\n      commonShim.shimParameterlessSetLocalDescription(window, browserDetails);\n\n      chromeShim.shimGetUserMedia(window, browserDetails);\n      chromeShim.shimMediaStream(window, browserDetails);\n      chromeShim.shimPeerConnection(window, browserDetails);\n      chromeShim.shimOnTrack(window, browserDetails);\n      chromeShim.shimAddTrackRemoveTrack(window, browserDetails);\n      chromeShim.shimGetSendersWithDtmf(window, browserDetails);\n      chromeShim.shimGetStats(window, browserDetails);\n      chromeShim.shimSenderReceiverGetStats(window, browserDetails);\n      chromeShim.fixNegotiationNeeded(window, browserDetails);\n\n      commonShim.shimRTCIceCandidate(window, browserDetails);\n      commonShim.shimRTCIceCandidateRelayProtocol(window, browserDetails);\n      commonShim.shimConnectionState(window, browserDetails);\n      commonShim.shimMaxMessageSize(window, browserDetails);\n      commonShim.shimSendThrowTypeError(window, browserDetails);\n      commonShim.removeExtmapAllowMixed(window, browserDetails);\n      break;\n    case 'firefox':\n      if (!firefoxShim || !firefoxShim.shimPeerConnection ||\n          !options.shimFirefox) {\n        logging('Firefox shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming firefox.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = firefoxShim;\n\n      // Must be called before shimPeerConnection.\n      commonShim.shimAddIceCandidateNullOrEmpty(window, browserDetails);\n      commonShim.shimParameterlessSetLocalDescription(window, browserDetails);\n\n      firefoxShim.shimGetUserMedia(window, browserDetails);\n      firefoxShim.shimPeerConnection(window, browserDetails);\n      firefoxShim.shimOnTrack(window, browserDetails);\n      firefoxShim.shimRemoveStream(window, browserDetails);\n      firefoxShim.shimSenderGetStats(window, browserDetails);\n      firefoxShim.shimReceiverGetStats(window, browserDetails);\n      firefoxShim.shimRTCDataChannel(window, browserDetails);\n      firefoxShim.shimAddTransceiver(window, browserDetails);\n      firefoxShim.shimGetParameters(window, browserDetails);\n      firefoxShim.shimCreateOffer(window, browserDetails);\n      firefoxShim.shimCreateAnswer(window, browserDetails);\n\n      commonShim.shimRTCIceCandidate(window, browserDetails);\n      commonShim.shimConnectionState(window, browserDetails);\n      commonShim.shimMaxMessageSize(window, browserDetails);\n      commonShim.shimSendThrowTypeError(window, browserDetails);\n      break;\n    case 'safari':\n      if (!safariShim || !options.shimSafari) {\n        logging('Safari shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming safari.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = safariShim;\n\n      // Must be called before shimCallbackAPI.\n      commonShim.shimAddIceCandidateNullOrEmpty(window, browserDetails);\n      commonShim.shimParameterlessSetLocalDescription(window, browserDetails);\n\n      safariShim.shimRTCIceServerUrls(window, browserDetails);\n      safariShim.shimCreateOfferLegacy(window, browserDetails);\n      safariShim.shimCallbacksAPI(window, browserDetails);\n      safariShim.shimLocalStreamsAPI(window, browserDetails);\n      safariShim.shimRemoteStreamsAPI(window, browserDetails);\n      safariShim.shimTrackEventTransceiver(window, browserDetails);\n      safariShim.shimGetUserMedia(window, browserDetails);\n      safariShim.shimAudioContext(window, browserDetails);\n\n      commonShim.shimRTCIceCandidate(window, browserDetails);\n      commonShim.shimRTCIceCandidateRelayProtocol(window, browserDetails);\n      commonShim.shimMaxMessageSize(window, browserDetails);\n      commonShim.shimSendThrowTypeError(window, browserDetails);\n      commonShim.removeExtmapAllowMixed(window, browserDetails);\n      break;\n    default:\n      logging('Unsupported browser!');\n      break;\n  }\n\n  return adapter;\n}\n","import adapter from 'webrtc-adapter';\r\nconst ices = 'stun:stun.stunprotocol.org:3478';\r\n\r\nexport function getBrowerDetail(){\r\n\tconsole.log(\"######## webrtc detect browers: \" + JSON.stringify(adapter.browserDetails))\r\n\treturn adapter.browserDetails;\r\n}\r\n\r\nexport function checkSupportWebRtc(){\r\n\ttry {\r\n\t\tif (window.RTCPeerConnection) {\r\n\t\t  new RTCPeerConnection({ iceServers: [{ urls: ices }] });\r\n\t\t  return true;\r\n\t\t} else {\r\n\t\t  throw \"当前浏览器不支持该功能\";\r\n\t\t}\r\n\t  } catch (error) {\r\n\t\tconsole.error(\"browser not support webrtc\" + error)\r\n\t\treturn false;\r\n\t  }\r\n}\r\n\r\nexport function getMediaDevices() {\r\n\treturn new Promise((pResolve, pReject) => {\r\n\t\tlet videoDevices = [];\r\n\t\tlet audioDevices = [];\r\n\t\tlet audioOutputDevices = [];\r\n\t\tnavigator.mediaDevices.enumerateDevices()\r\n\t\t\t.then((devices) => {\r\n\t\t\t\tfor (let device of devices) {\r\n\t\t\t\t\tif (device.kind === 'videoinput') {\r\n\t\t\t\t\t\tvideoDevices.push(device);\r\n\t\t\t\t\t} else if (device.kind === 'audioinput') {\r\n\t\t\t\t\t\taudioDevices.push(device);\r\n\t\t\t\t\t} else if (device.kind === 'audiooutput') {\r\n\t\t\t\t\t\taudioOutputDevices.push(device);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}).then(() => {\r\n\t\t\t\tlet data = { videoDevices, audioDevices, audioOutputDevices };\r\n\t\t\t\tpResolve(data);\r\n\t\t\t});\r\n\t});\r\n}","\r\n// 帧率\r\nexport const FrameRateEnum = {\r\n\tFRAME_RATE_ENUM_5: 0,\r\n\tFRAME_RATE_ENUM_10: 1,\r\n\tFRAME_RATE_ENUM_15: 2,\r\n\tFRAME_RATE_ENUM_20: 3,\r\n\tFRAME_RATE_ENUM_25: 4,\r\n\tFRAME_RATE_ENUM_30: 5,\r\n\tFRAME_RATE_ENUM_NORMAL: 2,\r\n}\r\n\r\n// 设置本地视频质量\r\n// 0 -- 120p    160*120*15     100Kbps\r\n// 1 -- 240p    320*240*15     200Kbps\r\n// 2 -- 360p    480*360*15     350kbps\r\n// 3 -- 480p    640*480*15     500kbps\r\n// 4 -- 540p    960*540*15     1Mbps\r\n// 5 -- 720p    1280*720*15    1.5Mbps\r\n// 6 -- 1080p   1920*1080*15   2Mbps\r\nexport const VideoResolutionEnum = {\r\n\tVIDEO_RESOLUTION_ENUM_120P: 0,\r\n\tVIDEO_RESOLUTION_ENUM_240P: 1,\r\n\tVIDEO_RESOLUTION_ENUM_360P: 2,\r\n\tVIDEO_RESOLUTION_ENUM_480P: 3,\r\n\tVIDEO_RESOLUTION_ENUM_540P: 4,\r\n\tVIDEO_RESOLUTION_ENUM_720P: 5,\r\n\tVIDEO_RESOLUTION_ENUM_1080P: 6,\r\n\tVIDEO_RESOLUTION_ENUM_NORMAL: 6,\r\n}","import { EventEmitter } from 'events';\r\nimport VideoElement from './VideoElement';\r\nimport { getMediaDevices } from './Utils';\r\nimport { FrameRateEnum, VideoResolutionEnum } from './Enum';\r\n\r\n// 设置本地视频质量\r\n// 0 -- 120p    160*120*15     100Kbps\r\n// 1 -- 240p    320*240*15     200Kbps\r\n// 2 -- 360p    480*360*15     350kbps\r\n// 3 -- 480p    640*480*15     500kbps\r\n// 4 -- 540p    960*540*15     1Mbps\r\n// 5 -- 720p    1280*720*15    1.5Mbps\r\n// 6 -- 1080p   1920*1080*15   2Mbps\r\nconst VideoResolutions =\r\n{\r\n\t0: { width: { ideal: 160 }, height: { ideal: 120 } },\r\n\t1: { width: { ideal: 320 }, height: { ideal: 240 } },\r\n\t2: { width: { ideal: 480 }, height: { ideal: 360 } },\r\n\t3: { width: { ideal: 640 }, height: { ideal: 480 } },\r\n\t4: { width: { ideal: 960 }, height: { ideal: 540 } },\r\n\t5: { width: { ideal: 1280 }, height: { ideal: 720 } },\r\n\t6: { width: { ideal: 1920 }, height: { ideal: 1080 } }\r\n};\r\n\r\n// 帧率\r\nconst VideoFrameRate = {\r\n\t0: { frameRate: { ideal: 5, max: 5 } },\r\n\t1: { frameRate: { ideal: 10, max: 10 } },\r\n\t2: { frameRate: { ideal: 15, max: 15 } },\r\n\t3: { frameRate: { ideal: 20, max: 20 } },\r\n\t4: { frameRate: { ideal: 25, max: 25 } },\r\n\t5: { frameRate: { ideal: 30, max: 30 } },\r\n}\r\n\r\nwindow.AudioContext = window.AudioContext || window.webkitAudioContext;\r\n\r\n// 控制麦克风音量\r\nclass MicrophoneContext {\r\n\tconstructor() {\r\n\t\tthis._audioContext = new AudioContext()\r\n\t\tthis._gainNode = this._audioContext.createGain();\r\n\t\tthis._audioSource;\r\n\t\tthis._audioDestination;\r\n\t}\r\n\r\n\tinit(stream) {\r\n\t\tthis._audioSource = this._audioContext.createMediaStreamSource(stream),\r\n\t\tthis._audioDestination = this._audioContext.createMediaStreamDestination();\r\n\t\tthis._audioSource.connect(this._gainNode);\r\n\t\tthis._gainNode.connect(this._audioDestination);\r\n\t}\r\n\r\n\tchangeMicrophoneLevel(value) {\r\n\t\tif (value && value >= 0 && value <= 5) {\r\n\t\t\tthis._gainNode.gain.value = value;\r\n\t\t}\r\n\t}\r\n}\r\n\r\n// 流方向 发送 接收\r\nconst StreamDirection = {\r\n\tSEND: 1,\r\n\tRECIVE: 2\r\n}\r\n\r\nexport default class Stream extends EventEmitter {\r\n\r\n\tconstructor(mid = null, stream = null, streamDir = StreamDirection.RECIVE) {\r\n\t\tsuper();\r\n\t\tthis._streamDirection = streamDir;\r\n\t\tthis._uid = null;\r\n\t\tthis._mid = mid;\r\n\t\tthis._sfuid = null;\r\n\t\tthis._sid = null;\r\n\t\t// 视频的 \r\n\t\t// 0-摄像头\r\n\t\t// 1-屏幕共享\r\n\t\t// 2-其他流\r\n\t\t// 音频\r\n\t\t// 0-代表mic，\r\n\t\t// 1-其他流比如文件流\r\n\t\t// {\r\n\t\t// \taudio:true,\r\n\t\t// \tvideo:true,\r\n\t\t// \taudiotype:0,\r\n\t\t// \tvideotype:0\r\n\t\t// }\r\n\t\tthis._minfo = {};\r\n\t\tthis._stream = stream;\r\n\t\tthis._videoElement = null;\r\n\t\tthis._videoDeviceId = null\r\n\t}\r\n\r\n\tasync init(sender = false, options = { audio: true, video: true, screen: false, resolution: VideoResolutionEnum.VIDEO_RESOLUTION_ENUM_NORMAL, frameRate: FrameRateEnum.FRAME_RATE_ENUM_NORMAL, audioDeviceId: null, videoDeviceId: null }) {\r\n\t\tconsole.log(\"Stream init ---- options: \" + options)\r\n\t\tif (sender) {\r\n\t\t\tlet deviceData = await getMediaDevices();\r\n\t\t\tthis._streamDirection = StreamDirection.SEND;\r\n\t\t\t// then((data)=>{\r\n\t\t\t// \tif (this.state.selectedAudioDevice === \"\" && data.audioDevices.length > 0) {\r\n\t\t\t// \t\tthis.state.selectedAudioDevice = data.audioDevices[0].deviceId;\r\n\t\t\t// \t}\r\n\t\t\t// \tif (this.state.selectedVideoDevice === \"\" && data.videoDevices.length > 0) {\r\n\t\t\t// \t\tthis.state.selectedVideoDevice = data.videoDevices[0].deviceId;\r\n\t\t\t// \t}\r\n\t\t\t// \tthis.state.videoDevices = data.videoDevices;\r\n\t\t\t// \tthis.state.audioDevices = data.audioDevices;\r\n\t\t\t// \tthis.state.audioOutputDevices = data.audioOutputDevices;\r\n\r\n\t\t\t// \tthis.state.audioDevices.map((device, index) => {\r\n\t\t\t// \t\tif (this.state.selectedAudioDevice == device.deviceId) {\r\n\t\t\t// \t\t\tconsole.log(\"Selected audioDevice::\" + JSON.stringify(device));\r\n\t\t\t// \t\t}\r\n\t\t\t// \t});\r\n\t\t\t// \tthis.state.videoDevices.map((device, index) => {\r\n\t\t\t// \t\tif (this.state.selectedVideoDevice == device.deviceId) {\r\n\t\t\t// \t\t\tconsole.log(\"Selected videoDevice::\" + JSON.stringify(device));\r\n\t\t\t// \t\t}\r\n\t\t\t// \t});\r\n\t\t\t// });\r\n\t\t\tif (options.screen) {\r\n\t\t\t\tthis._stream = await navigator.mediaDevices.getDisplayMedia({ video: true, ...VideoFrameRate[options.frameRate] });\r\n\t\t\t} else if (options.audio && options.video) {\r\n\t\t\t\tlet audioOptions = { deviceId: \"\" }\r\n\t\t\t\tif (deviceData.audioDevices.length > 0) {\r\n\t\t\t\t\tif (options.audioDeviceId != null) {\r\n\t\t\t\t\t\tlet audioDevice = deviceData.audioDevices.find(device => device.deviceId == options.audioDeviceId);\r\n\t\t\t\t\t\tif (audioDevice) {\r\n\t\t\t\t\t\t\taudioOptions = { deviceId: options.audioDeviceId }\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\taudioOptions = { deviceId: deviceData.audioDevices[0].deviceId }\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\taudioOptions = { deviceId: deviceData.audioDevices[0].deviceId }\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tlet videoOptions = { deviceId: \"\", ...VideoResolutions[options.resolution], ...VideoFrameRate[options.frameRate] }\r\n\t\t\t\tif (deviceData.videoDevices.length > 0) {\r\n\t\t\t\t\tif (options.videoDeviceId != null) {\r\n\t\t\t\t\t\tlet videoDevice = deviceData.videoDevices.find(device => device.deviceId == options.videoDeviceId);\r\n\t\t\t\t\t\tif (videoDevice) {\r\n\t\t\t\t\t\t\tvideoOptions.deviceId = options.videoDeviceId\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvideoOptions.deviceId = deviceData.videoDevices[0].deviceId\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvideoOptions.deviceId = deviceData.videoDevices[0].deviceId\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis._stream = await navigator.mediaDevices.getUserMedia(\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\taudio: audioOptions,\r\n\t\t\t\t\t\tvideo: videoOptions\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\telse if (options.audio) {\r\n\t\t\t\tlet audioOptions = { deviceId: \"\" }\r\n\t\t\t\tif (deviceData.audioDevices.length > 0) {\r\n\t\t\t\t\tif (options.audioDeviceId != null) {\r\n\t\t\t\t\t\tlet audioDevice = deviceData.audioDevices.find(device => device.deviceId == options.audioDeviceId);\r\n\t\t\t\t\t\tif (audioDevice) {\r\n\t\t\t\t\t\t\taudioOptions = { deviceId: options.audioDeviceId }\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\taudioOptions = { deviceId: deviceData.audioDevices[0].deviceId }\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\taudioOptions = { deviceId: deviceData.audioDevices[0].deviceId }\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tconsole.log(\"Stream init ---- audioOptions: \" + String(audioOptions))\r\n\t\t\t\tthis._stream = await navigator.mediaDevices.getUserMedia(\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\taudio: audioOptions\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tlet videoOptions = { deviceId: \"\", ...VideoResolutions[options.resolution], ...VideoFrameRate[options.frameRate] }\r\n\t\t\t\tif (deviceData.videoDevices.length > 0) {\r\n\t\t\t\t\tif (options.videoDeviceId != null) {\r\n\t\t\t\t\t\tlet videoDevice = deviceData.videoDevices.find(device => device.deviceId == options.videoDeviceId);\r\n\t\t\t\t\t\tif (videoDevice) {\r\n\t\t\t\t\t\t\tvideoOptions.deviceId = options.videoDeviceId\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvideoOptions.deviceId = deviceData.videoDevices[0].deviceId\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvideoOptions.deviceId = deviceData.videoDevices[0].deviceId\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis._videoDeviceId = videoOptions.deviceId;\r\n\t\t\t\t}\r\n\t\t\t\tthis._stream = await navigator.mediaDevices.getUserMedia(\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvideo: videoOptions\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tif (options.audio) {\r\n\t\t\t\tthis._processAudioPubStream();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tset mid(id) { this._mid = id; }\r\n\r\n\tget mid() { return this._mid; }\r\n\r\n\tget stream() { return this._stream };\r\n\r\n\t/**\r\n\t * @param {any} sfuid\r\n\t */\r\n\tset sfuid(sfuid) { this._sfuid = sfuid; }\r\n\r\n\tget sfuid() { return this._sfuid; }\r\n\r\n\tset sid(sid) { this._sid = sid; }\r\n\r\n\tget sid() { return this._sid; }\r\n\r\n\tset uid(uid) { this._uid = uid; }\r\n\r\n\tget uid() { return this._uid; }\r\n\r\n\tset minfo(minfo) { this._minfo = minfo; }\r\n\r\n\tget minfo() { return this._minfo; }\r\n\r\n\tget streamDirection() { return this._streamDirection; }\r\n\r\n\r\n\t// 渲染\r\n\trender(elementId) {\r\n\t\tif (!this._videoElement) {\r\n\t\t\tthis._videoElement = new VideoElement();\r\n\t\t}\r\n\t\tthis._videoElement.play({ id: this._mid, stream: this._stream, elementId, remote: this._streamDirection == StreamDirection.RECIVE });\r\n\t}\r\n\t// 停止渲染\r\n\tstopRender() {\r\n\t\tthis._videoElement.stop();\r\n\t\tthis._videoElement = null\r\n\t}\r\n\r\n\t_processAudioPubStream() {\r\n\t\tif (!this._stream) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis._micro = new MicrophoneContext();\r\n\t\tthis._micro.init(this._stream);\r\n\t}\r\n\r\n\tgetRenderParentElementId() {\r\n\t\tif (!this._videoElement) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn this._videoElement.parentElementId;\r\n\t}\r\n\r\n\t// 设置麦克风音量\r\n\tsetMicrophoneVolume(value) {\r\n\t\tif (this._micro) {\r\n\t\t\tthis._micro.changeMicrophoneLevel(value);\r\n\t\t}\r\n\t}\r\n\r\n\t// 获取音频静音状态\r\n\tgetAudioMuteState() {\r\n\t\tlet tracks = this._stream.getAudioTracks();\r\n\t\ttracks.forEach(track => {\r\n\t\t\treturn !track.enabled;\r\n\t\t})\r\n\t\treturn false;\r\n\t}\r\n\r\n\t// 是否设置静音\r\n\t// 对于本地推流来说，就是 麦克风静音\r\n\t// 对应拉流来说，就是禁止声音，但是仍然接收数据\r\n\tsetMuteAudio(mute = false) {\r\n\t\t// let track = tracks.find(track => track.kind === \"audio\");\r\n\t\tlet tracks = this._stream.getAudioTracks();\r\n\t\tlet isSuccess = false;\r\n\t\ttracks.forEach(track => {\r\n\t\t\ttrack.enabled = !mute;\r\n\t\t\tisSuccess = true;\r\n\t\t})\r\n\t\treturn isSuccess;\r\n\t}\r\n\r\n\t// 是否设置视频\r\n\t// 对于本地推流来说，就是禁止视频采集\r\n\t// 对应拉流来说，就是禁止视频，但是仍然接收数据\r\n\tsetMuteVideo(mute = false) {\r\n\t\t// let track = tracks.find(track => track.kind === \"audio\");\r\n\t\tlet tracks = this._stream.getVideoTracks();\r\n\t\tlet isSuccess = false;\r\n\t\ttracks.forEach(track => {\r\n\t\t\ttrack.enabled = !mute;\r\n\t\t\tisSuccess = true;\r\n\t\t})\r\n\t\treturn isSuccess;\r\n\t}\r\n}","\r\nconst ErrorMessage = new Map([\r\n\t// 通用错误\r\n\t[10000, { name: \"ServerInternalError\", message: \"Service internal error\" }],\r\n\t[10005, { name: \"UidParamError\", message: \"uid param error\" }],\r\n\r\n\t// 房间相关错误\r\n\t[10100, { name: \"NotInRoom\", message: \"User not in the room\" }],\r\n\t[10101, { name: \"LevelRoomServerError\", message: \"The Level failed and the server returned an error\" }],\r\n\r\n\t// 加入房间参数错误\r\n\t[10101, { name: \"JoinParamError\", message: \"Join room parameter error\" }],\r\n\r\n\t// 本地音视频采集播放错误\r\n\t[10200, { name: \"DeviceNotExist\", message: \"The deviceId does not exist\" }],\r\n\t[10201, { name: \"NewDeviceNotExist\", message: \"No new devices were found\" }],\r\n\r\n\t// 发布和订阅错误\r\n\t[10300, { name: \"AudioStreamExistError\", message: \"The audio push stream already exists\" }],\r\n\t[10301, { name: \"AudioStreamNotExistError\", message: \"The audio push stream not exists\" }],\r\n\t[10302, { name: \"VideoStreamExistError\", message: \"The video push stream already exists\" }],\r\n\t[10303, { name: \"VideoStreamNotExistError\", message: \"The video push stream not exists\" }],\r\n\t[10304, { name: \"ScreenStreamExistError\", message: \"The screen push stream already exists\" }],\r\n\t[10305, { name: \"ScreenStreamNotExistError\", message: \"The screen push stream not exists\" }],\r\n\r\n\t[10310, { name: \"UidNotStream\", message: \"This user has not published a stream\" }],\r\n\t[10311, { name: \"UidNotSubStream\", message: \"There is no subscription to this user's stream\" }],\r\n\t[10312, { name: \"SubFailedServerError\", message: \"The subscription failed and the server returned an error\" }],\r\n\t[10313, { name: \"UnSubFailedServerError\", message: \"The unsubscription failed and the server returned an error\" }],\r\n\t[10314, { name: \"BroadcastFailedServerError\", message: \"The broadcast failed and the server returned an error\" }],\r\n\t[10315, { name: \"KeepaliveServerError\", message: \"The Keepalive failed and the server returned an error\" }],\r\n\r\n])\r\n\r\nexport class RTCError {\r\n\tconstructor(code = 0, name = \"\", serverError = \"\") {\r\n\t\tthis.code = code;\r\n\t\tthis.name = name;\r\n\t\tthis.message = \"\";\r\n\t\tthis.serverErrorDesc = \"\"\r\n\t\tif (ErrorMessage.has(code)) {\r\n\t\t\tthis.name = ErrorMessage.get(code).name;\r\n\t\t\tthis.message = ErrorMessage.get(code).message;\r\n\t\t}\r\n\t\tconsole.log(\"serverError: \" + serverError)\r\n\t\tserverError = String(serverError)\r\n\t\tif (serverError.length > 0) {\r\n\t\t\tthis.isServerError = true;\r\n\t\t\tthis.serverErrorDesc = serverError;\r\n\t\t}\r\n\t}\r\n}","import { EventEmitter } from 'events';\r\nimport protooClient from 'protoo-client';\r\nimport uuidv4 from 'uuid/v4';\r\nimport Stream from './Stream';\r\nimport * as sdpTransform from 'sdp-transform';\r\nimport adapter from 'webrtc-adapter';\r\nimport { getMediaDevices } from './Utils';\r\nimport { VideoResolutionEnum, FrameRateEnum } from './Enum';\r\nimport { RTCError } from './RTCError'\r\nconst ices = 'stun:stun.stunprotocol.org:3478';\r\n\r\nconst DefaultPayloadTypePCMU = 0;\r\nconst DefaultPayloadTypePCMA = 8;\r\nconst DefaultPayloadTypeG722 = 9;\r\nconst DefaultPayloadTypeOpus = 111;\r\nconst DefaultPayloadTypeVP8 = 96;\r\nconst DefaultPayloadTypeVP9 = 98;\r\nconst DefaultPayloadTypeH264 = 102;\r\n\r\n// 推流类型\r\nconst PublishStreamType = {\r\n\tAudio: 1,\r\n\tVideo: 2,\r\n\tScreen: 3,\r\n}\r\n\r\nconsole.log(\"######## webrtc detect browers: \" + JSON.stringify(adapter.browserDetails))\r\n\r\nexport default class Client extends EventEmitter {\r\n\r\n\tconstructor(useWSS = false, hostname = null, port = 8443) {\r\n\t\tsuper();\r\n\t\tif (hostname == null) {\r\n\t\t\tthis._hostname = window.location.hostname\r\n\t\t}\r\n\t\tthis._useWSS = useWSS;\r\n\t\tthis._hostname = hostname;\r\n\t\tthis._port = port;\r\n\r\n\t\tthis._uid = 0;\r\n\t\tthis._pcs = new Map();\r\n\t\t// 存储接收的流\r\n\t\tthis._streams = new Map();\r\n\t\t// 存储推送的流\r\n\t\tthis._publishStreams = new Map();\r\n\t\t// 可用的订阅流信息 \r\n\t\tthis._ableSubStreamInfo = new Map();\r\n\t\t// 当前房间id\r\n\t\tthis._rid = null;\r\n\r\n\t\tthis.keepaliveTimer = null;\r\n\r\n\t\t// 是否忽略取消推流、取消订阅、离开房间、心跳的请求报错\r\n\t\tthis._isIgnoreCancelError = false;\r\n\r\n\t\tthis._videoResolution = VideoResolutionEnum.VIDEO_RESOLUTION_ENUM_NORMAL;\r\n\t\tthis._videoFrameRate = FrameRateEnum.FRAME_RATE_ENUM_NORMAL;\r\n\t\tthis._screenFrameRate = FrameRateEnum.FRAME_RATE_ENUM_NORMAL;\r\n\t}\r\n\r\n\tget uid() {\r\n\t\treturn this._uid;\r\n\t}\r\n\r\n\tget rid() {\r\n\t\treturn this._rid;\r\n\t}\r\n\r\n\t/**\r\n\t * @param {boolean} isIgnoreCancelError\r\n\t */\r\n\tset isIgnoreCancelError(isIgnoreCancelError) {\r\n\t\tthis._isIgnoreCancelError = isIgnoreCancelError;\r\n\t}\r\n\r\n\tinit(uid) {\r\n\t\tthis._uid = uid\r\n\t\tthis._url = this._getProtooUrl(this._uid);\r\n\t\tconsole.log('Peer \"init\" - url:' + this._url);\r\n\t\tconsole.log(\"adapter.browserDetails.browser:\" + adapter.browserDetails.browser);\r\n\r\n\t\tlet transport = new protooClient.WebSocketTransport(this._url, {\r\n\t\t\t// 验证 部分字段无效可看源码\r\n\t\t\t// protocols: ['foo'],\r\n\t\t\t// origin: 'https://example.com',\r\n\t\t\t// headers: {\r\n\t\t\t// \t'Sec-Websocket-Protocol1': '000',\r\n\t\t\t// },\r\n\t\t\t// requestOptions: {},\r\n\t\t\t// retry: { // 重试次数\r\n\t\t\t// \tretries: 2,\r\n\t\t\t// }\r\n\t\t}\r\n\t\t);\r\n\t\tthis._protoo = new protooClient.Peer(transport);\r\n\r\n\t\tthis._protoo.on('open', () => {\r\n\t\t\tconsole.log('Peer \"open\" event');\r\n\t\t\tthis.emit('transport-open');\r\n\t\t});\r\n\r\n\t\tthis._protoo.on('connected', () => {\r\n\t\t\tconsole.log('Peer \"connected\" event');\r\n\t\t});\r\n\r\n\t\tthis._protoo.on('failed', (currentAttemp) => {\r\n\t\t\tconsole.log('Peer \"failed\" event - ' + currentAttemp);\r\n\t\t\tthis.emit('failed');\r\n\t\t});\r\n\r\n\t\tthis._protoo.on('disconnected', () => {\r\n\t\t\tconsole.log('Peer \"disconnected\" event');\r\n\t\t\tthis.emit('transport-failed');\r\n\t\t});\r\n\r\n\t\tthis._protoo.on('close', () => {\r\n\t\t\tconsole.log('Peer \"close\" event');\r\n\t\t\tthis.emit('transport-closed');\r\n\t\t});\r\n\r\n\t\tthis._protoo.on('request', this._handleRequest.bind(this));\r\n\t\tthis._protoo.on('notification', this._handleNotification.bind(this));\r\n\t}\r\n\r\n\t// jion room\r\n\tasync join(roomId) {\r\n\t\tif (!roomId) {\r\n\t\t\treturn Promise.reject(new RTCError(10101, \"JoinParamError\"))\r\n\t\t}\r\n\t\ttry {\r\n\t\t\tlet data = await this._protoo.request('join', { 'rid': roomId });\r\n\t\t\tconsole.log('join success: result => ' + JSON.stringify(data));\r\n\t\t\tthis._rid = roomId;\r\n\t\t\tdata.pubs.forEach(ableStreamInfo => {\r\n\t\t\t\tthis._ableSubStreamInfo.set(ableStreamInfo.mid, ableStreamInfo)\r\n\t\t\t})\r\n\t\t\tif (this.keepaliveTimer) {\r\n\t\t\t\tclearInterval(this.keepaliveTimer);\r\n\t\t\t}\r\n\t\t\tthis.keepaliveTimer = setInterval(() => {\r\n\t\t\t\tthis._keepalive();\r\n\t\t\t}, 20 * 1000)\r\n\t\t\treturn data\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log('join reject: error =>' + error);\r\n\t\t\treturn Promise.reject(new RTCError(10000, \"ServerInternalError\", error));\r\n\t\t}\r\n\t}\r\n\r\n\tasync leave() {\r\n\t\tif (!this._rid) {\r\n\t\t\treturn Promise.reject(new RTCError(10100, \"NotInRoom\"))\r\n\t\t}\r\n\t\ttry {\r\n\t\t\t// 离开房间清理\r\n\t\t\tfor (let stream of this._publishStreams.values()) {\r\n\t\t\t\tawait this.unpublish(stream.mid)\r\n\t\t\t}\r\n\t\t\tfor (let stream of this._streams.values()) {\r\n\t\t\t\tawait this.unsubscribe(stream.mid)\r\n\t\t\t}\r\n\t\t\tif (this.keepaliveTimer) {\r\n\t\t\t\tclearInterval(this.keepaliveTimer);\r\n\t\t\t\tthis.keepaliveTimer = null;\r\n\t\t\t}\r\n\t\t\tlet data = await this._protoo.request('leave', { 'rid': this._rid });\r\n\t\t\tconsole.log('leave success: result => ' + JSON.stringify(data));\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log('leave reject: error =>' + error);\r\n\t\t\tif (!this._isIgnoreCancelError) {\r\n\t\t\t\treturn Promise.reject(new RTCError(10101, \"LevelRoomServerError\", error));\r\n\t\t\t}\r\n\t\t} finally {\r\n\t\t\tthis._rid = null\r\n\t\t}\r\n\t}\r\n\r\n\t// ----------set option\r\n\t// 是否启动音频推流\r\n\tasync setAudioPublish(isPublish, audioDeviceId = null) {\r\n\t\tif (isPublish) {\r\n\t\t\tif (this._publishStreams.has(PublishStreamType.Audio)) {\r\n\t\t\t\treturn Promise.reject(new RTCError(10300, \"AudioStreamExistError\"));\r\n\t\t\t}\r\n\t\t\treturn await this.publish({ audio: true, audioDeviceId });\r\n\t\t} else {\r\n\t\t\tif (!this._publishStreams.has(PublishStreamType.Audio)) {\r\n\t\t\t\treturn Promise.reject(new RTCError(10301, \"AudioStreamNotExistError\"));\r\n\t\t\t}\r\n\t\t\tconst stream = this._publishStreams.get(PublishStreamType.Audio);\r\n\t\t\tthis._publishStreams.delete(PublishStreamType.Audio);\r\n\t\t\treturn await this.unpublish(stream.mid);\r\n\t\t}\r\n\t}\r\n\t// \r\n\t//---- 视频接口\r\n\t// 是否启动视频推流\r\n\tasync setVideoPublish(isPublish, videoDeviceId = null) {\r\n\t\tif (isPublish) {\r\n\t\t\tif (this._publishStreams.has(PublishStreamType.Video)) {\r\n\t\t\t\treturn Promise.reject(new RTCError(10302, \"VideoStreamExistError\"));\r\n\t\t\t}\r\n\t\t\treturn await this.publish({ video: true, resolution: this._videoResolution, frameRate: this._videoFrameRate, videoDeviceId });\r\n\t\t} else {\r\n\t\t\tif (!this._publishStreams.has(PublishStreamType.Video)) {\r\n\t\t\t\treturn Promise.reject(new RTCError(10303, \"VideoStreamNotExistError\"));\r\n\t\t\t}\r\n\t\t\tlet stream = this._publishStreams.get(PublishStreamType.Video);\r\n\t\t\tthis._publishStreams.delete(PublishStreamType.Video);\r\n\t\t\treturn await this.unpublish(stream.mid);\r\n\t\t}\r\n\t}\r\n\r\n\t// 切换摄像头\r\n\tasync SwitchVideo(videoDeviceId = null) {\r\n\t\tif (!this._publishStreams.has(PublishStreamType.Video)) {\r\n\t\t\treturn Promise.reject(new RTCError(10303, \"VideoStreamNotExistError\"));\r\n\t\t}\r\n\t\tconst deviceData = await getMediaDevices();\r\n\t\tvar newDevice = null;\r\n\t\tif (videoDeviceId != null) {\r\n\t\t\tnewDevice = deviceData.videoDevices.find(device => device.deviceId == videoDeviceId)\r\n\t\t\tif (!newDevice) {\r\n\t\t\t\treturn Promise.reject(new RTCError(10200, \"DeviceNotExist\"));\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tnewDevice = deviceData.videoDevices.find(device => device.deviceId != this._publishStreams.get(PublishStreamType.Video)._videoDeviceId)\r\n\t\t\tif (!newDevice) {\r\n\t\t\t\treturn Promise.reject(new RTCError(10201, \"NewDeviceNotExist\"));\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (newDevice) {\r\n\t\t\tconsole.log(\"old videoDeviceId: \" + this._publishStreams.get(PublishStreamType.Video)._videoDeviceId + \"new: \" + newDevice.deviceId)\r\n\t\t\tlet stream = this._publishStreams.get(PublishStreamType.Video);\r\n\t\t\tlet elementId = stream.getRenderParentElementId();\r\n\t\t\tif (elementId) {\r\n\t\t\t\tstream.stop()\r\n\t\t\t}\r\n\t\t\tawait this.unpublish(stream.mid);\r\n\t\t\tthis._publishStreams.delete(PublishStreamType.Video);\r\n\t\t\tlet newStream = await this.publish({ video: true, resolution: this._videoResolution, frameRate: this._videoFrameRate, videoDeviceId: newDevice.deviceId });\r\n\t\t\tif (elementId) {\r\n\t\t\t\tnewStream.render(elementId)\r\n\t\t\t}\r\n\t\t\treturn newStream\r\n\t\t}\r\n\t}\r\n\r\n\t// 设置视频推流质量\r\n\tsetVideoPubResolutionFrame(resolution, frameRate) {\r\n\t\tif (VideoResolutionEnum[resolution]) {\r\n\t\t\tthis._videoResolution = VideoResolutionEnum[resolution];\r\n\t\t}\r\n\t\tif (FrameRateEnum[frameRate]) {\r\n\t\t\tthis._videoFrameRate = FrameRateEnum[frameRate];\r\n\t\t}\r\n\t}\r\n\r\n\t// 是否启动屏幕推流\r\n\tasync setScreenPublish(isPublish) {\r\n\t\tif (isPublish) {\r\n\t\t\tif (this._publishStreams.has(PublishStreamType.Screen)) {\r\n\t\t\t\treturn Promise.reject(new RTCError(10304, \"ScreenStreamExistError\"));\r\n\t\t\t}\r\n\t\t\treturn await this.publish({ screen: true, frameRate: this._screenFrameRate });\r\n\t\t} else {\r\n\t\t\tif (!this._publishStreams.has(PublishStreamType.Screen)) {\r\n\t\t\t\treturn Promise.reject(new RTCError(10305, \"ScreenStreamNotExistError\"));\r\n\t\t\t}\r\n\t\t\tlet stream = this._publishStreams.get(PublishStreamType.Screen);\r\n\t\t\tthis._publishStreams.delete(PublishStreamType.Screen);\r\n\t\t\treturn await this.unpublish(stream.mid);\r\n\t\t}\r\n\t}\r\n\r\n\t// 设置屏幕推流帧率\r\n\tsetScreenPubFrame(frameRate) {\r\n\t\tif (FrameRateEnum[frameRate]) {\r\n\t\t\tthis._screenFrameRate = FrameRateEnum[frameRate];\r\n\t\t}\r\n\t}\r\n\r\n\t// 拉取某人音频流\r\n\tasync setAudioSub(uid) {\r\n\t\tif (!uid) {\r\n\t\t\treturn Promise.reject(new RTCError(10005, \"UidParamError\"))\r\n\t\t}\r\n\t\tlet mid = null\r\n\t\tfor (const [key, value] of this._ableSubStreamInfo) {\r\n\t\t\tif (value.uid == uid && value.minfo.audio) {\r\n\t\t\t\tmid = key;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (mid) {\r\n\t\t\treturn await this.subscribe(mid, uid);\r\n\t\t} else {\r\n\t\t\treturn Promise.reject(new RTCError(10310, \"UidNotStream\"))\r\n\t\t}\r\n\t}\r\n\t// 取消某人音频流\r\n\tasync setAudioUnSub(uid) {\r\n\t\tif (!uid) {\r\n\t\t\treturn Promise.reject(new RTCError(10005, \"UidParamError\"))\r\n\t\t}\r\n\t\tlet mid = null\r\n\t\tfor (const value of this._streams.values()) {\r\n\t\t\tif (value.uid == uid && value.stream.getAudioTracks()) {\r\n\t\t\t\tmid = value.mid;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (mid) {\r\n\t\t\treturn await this.unsubscribe(mid);\r\n\t\t} else {\r\n\t\t\treturn Promise.reject(new RTCError(10311, \"UidNotSubStream\"))\r\n\t\t}\r\n\t}\r\n\r\n\t// 拉取某人视频流\r\n\tasync setVideoSub(uid) {\r\n\t\tif (!uid) {\r\n\t\t\treturn Promise.reject(new RTCError(10005, \"UidParamError\"))\r\n\t\t}\r\n\t\tlet mid = null\r\n\t\tfor (const [key, value] of this._ableSubStreamInfo) {\r\n\t\t\tif (value.uid == uid && value.minfo.video && value.minfo.videotype == 0) {\r\n\t\t\t\tmid = key;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (mid) {\r\n\t\t\treturn await this.subscribe(mid, uid);\r\n\t\t} else {\r\n\t\t\treturn Promise.reject(new RTCError(10310, \"UidNotStream\"))\r\n\t\t}\r\n\t}\r\n\t// 取消某人视频流\r\n\tasync setVideoUnSub(uid) {\r\n\t\tif (!uid) {\r\n\t\t\treturn Promise.reject(new RTCError(10005, \"UidParamError\"))\r\n\t\t}\r\n\t\tlet mid = null\r\n\t\tfor (const value of this._streams.values()) {\r\n\t\t\tif (value.uid == uid && value.minfo.video && value.minfo.videotype == 0) {\r\n\t\t\t\tmid = value.mid;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (mid) {\r\n\t\t\treturn await this.unsubscribe(mid);\r\n\t\t} else {\r\n\t\t\treturn Promise.reject(new RTCError(10311, \"UidNotSubStream\"))\r\n\t\t}\r\n\t}\r\n\r\n\t// 拉取某人屏幕流\r\n\tasync setScreenSub(uid) {\r\n\t\tif (!uid) {\r\n\t\t\treturn Promise.reject(new RTCError(10005, \"UidParamError\"))\r\n\t\t}\r\n\t\tlet mid = null\r\n\t\tfor (const [key, value] of this._ableSubStreamInfo) {\r\n\t\t\tif (value.uid == uid && value.minfo.video && value.minfo.videotype == 1) {\r\n\t\t\t\tmid = key;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (mid) {\r\n\t\t\treturn await this.subscribe(mid, uid);\r\n\t\t} else {\r\n\t\t\treturn Promise.reject(new RTCError(10310, \"UidNotStream\"))\r\n\t\t}\r\n\t}\r\n\t// 取消某人屏幕共享流\r\n\tasync setScreenUnSub(uid) {\r\n\t\tif (!uid) {\r\n\t\t\treturn Promise.reject(new RTCError(10005, \"UidParamError\"))\r\n\t\t}\r\n\t\tlet mid = null\r\n\t\tfor (const value of this._streams.values()) {\r\n\t\t\tif (value.uid == uid && value.minfo.video && value.minfo.videotype == 1) {\r\n\t\t\t\tmid = value.mid;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (mid) {\r\n\t\t\treturn await this.unsubscribe(mid);\r\n\t\t} else {\r\n\t\t\treturn Promise.reject(new RTCError(10311, \"UidNotSubStream\"))\r\n\t\t}\r\n\t}\r\n\r\n\tasync publish(options = { audio: false, video: false, screen: false, codec: 'h264', resolution: VideoResolutionEnum.VIDEO_RESOLUTION_ENUM_NORMAL, frameRate: FrameRateEnum.FRAME_RATE_ENUM_NORMAL, audioDeviceId: null, videoDeviceId: null }) {\r\n\t\tconsole.log('publish options => %o', options);\r\n\t\tvar promise = new Promise(async (resolve, reject) => {\r\n\t\t\tlet pc = null;\r\n\t\t\ttry {\r\n\t\t\t\tlet stream = new Stream();\r\n\t\t\t\tstream.uid = this._uid;\r\n\t\t\t\tawait stream.init(true, { audio: options.audio, video: options.video, screen: options.screen, resolution: options.resolution, frameRate: options.frameRate, videoDeviceId: options.videoDeviceId, audioDeviceId: options.audioDeviceId });\r\n\t\t\t\tpc = await this._createSender(stream.stream, options.codec);\r\n\r\n\t\t\t\tpc.onicecandidate = async (e) => {\r\n\t\t\t\t\tif (!pc.sendOffer) {\r\n\t\t\t\t\t\tvar offer = pc.localDescription;\r\n\t\t\t\t\t\tconsole.log('Send offer sdp => ' + offer.sdp);\r\n\t\t\t\t\t\tpc.sendOffer = true\r\n\r\n\t\t\t\t\t\tlet audioOption = {}\r\n\t\t\t\t\t\tif (options.audio) {\r\n\t\t\t\t\t\t\taudioOption[\"audio\"] = true;\r\n\t\t\t\t\t\t\taudioOption[\"audiotype\"] = 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlet videoOption = {}\r\n\t\t\t\t\t\tif (options.video) {\r\n\t\t\t\t\t\t\tvideoOption[\"video\"] = true;\r\n\t\t\t\t\t\t\tvideoOption[\"videotype\"] = 0;\r\n\t\t\t\t\t\t} else if (options.screen) {\r\n\t\t\t\t\t\t\tvideoOption[\"video\"] = true;\r\n\t\t\t\t\t\t\tvideoOption[\"videotype\"] = 1;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tlet result = await this._protoo.request('publish', {\r\n\t\t\t\t\t\t\trid: this._rid, jsep: offer, \"minfo\": {\r\n\t\t\t\t\t\t\t\t// \"audio\": options.audio,\r\n\t\t\t\t\t\t\t\t// \"video\": options.video,\r\n\t\t\t\t\t\t\t\t// \"audiotype\": 0,\r\n\t\t\t\t\t\t\t\t// \"videotype\": options.screen?,\r\n\t\t\t\t\t\t\t\t...audioOption,\r\n\t\t\t\t\t\t\t\t...videoOption\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tawait pc.setRemoteDescription(result.jsep);\r\n\t\t\t\t\t\tconsole.log('publish success => ' + JSON.stringify(result));\r\n\t\t\t\t\t\tstream.mid = result.mid;\r\n\t\t\t\t\t\tstream.sfuid = result.sfuid;\r\n\t\t\t\t\t\tstream.minfo = {\r\n\t\t\t\t\t\t\t...audioOption,\r\n\t\t\t\t\t\t\t...videoOption\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis._pcs.set(stream.mid, pc);\r\n\t\t\t\t\t\tif (options.audio) {\r\n\t\t\t\t\t\t\tthis._publishStreams.set(PublishStreamType.Audio, stream);\r\n\t\t\t\t\t\t} else if (options.video) {\r\n\t\t\t\t\t\t\tthis._publishStreams.set(PublishStreamType.Video, stream);\r\n\t\t\t\t\t\t} else if (options.screen) {\r\n\t\t\t\t\t\t\tthis._publishStreams.set(PublishStreamType.Screen, stream);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tconsole.log(\"imposibile\")\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tresolve(stream);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.log('publish request error  => ' + error);\r\n\t\t\t\tif (pc) {\r\n\t\t\t\t\tpc.close();\r\n\t\t\t\t}\r\n\t\t\t\treject(new RTCError(10000, \"ServerInternalError\", error));\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn promise;\r\n\t}\r\n\r\n\tasync unpublish(mid) {\r\n\t\tconsole.log('unpublish rid => %s, mid => %s', this._rid, mid);\r\n\t\tlet streamType = null;\r\n\t\tfor (const [key, value] of this._publishStreams) {\r\n\t\t\tif (value.mid == mid) {\r\n\t\t\t\tstreamType = key\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!streamType) return;\r\n\t\tlet sfuid = this._publishStreams.get(streamType).sfuid;\r\n\t\tthis._removePC(mid);\r\n\t\ttry {\r\n\t\t\tlet data = await this._protoo.request('unpublish', { rid: this._rid, mid, sfuid: sfuid });\r\n\t\t\tconsole.log('unpublish success: result => ' + JSON.stringify(data));\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log('unpublish reject: error =>' + error);\r\n\t\t\tif (!this._isIgnoreCancelError) {\r\n\t\t\t\treturn Promise.reject(new RTCError(10000, \"ServerInternalError\", error));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tasync subscribe(mid, uid) {\r\n\t\tif (!this._rid) {\r\n\t\t\treturn Promise.reject(new RTCError(10100, \"NotInRoom\"));\r\n\t\t}\r\n\t\tconst rid = this._rid;\r\n\t\tconsole.log('subscribe rid => %s, mid => %a', rid, mid);\r\n\t\tvar promise = new Promise(async (resolve, reject) => {\r\n\t\t\ttry {\r\n\t\t\t\tlet pc = await this._createReceiver(mid);\r\n\t\t\t\tpc.ontrack = (e) => {\r\n\t\t\t\t\tconsole.log(\"Stream::pc::onaddstream---\" + e)\r\n\t\t\t\t\tif (this._streams.has(mid)) {\r\n\t\t\t\t\t\tlet stream = this._streams.get(mid).stream\r\n\t\t\t\t\t\tstream.addTrack(e.track)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this._streams.get(mid).stream.getTracks().length == 1) {\r\n\t\t\t\t\t\tthis._ableSubStreamInfo.delete(mid);\r\n\t\t\t\t\t\tresolve(this._streams.get(mid));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tpc.onaddstream = (e) => {\r\n\t\t\t\t\t// console.log(\"Stream::pc::onaddstream---\" + e)\r\n\t\t\t\t\tvar stream = e.stream;\r\n\t\t\t\t\tconsole.log('Stream::pc::onaddstream', stream.id);\r\n\t\t\t\t}\r\n\t\t\t\tpc.onremovestream = (e) => {\r\n\t\t\t\t\tvar stream = e.stream;\r\n\t\t\t\t\tconsole.log('Stream::pc::onremovestream', stream.id);\r\n\t\t\t\t}\r\n\t\t\t\tpc.onicecandidate = async (e) => {\r\n\t\t\t\t\tif (!pc.sendOffer) {\r\n\t\t\t\t\t\tvar jsep = pc.localDescription;\r\n\t\t\t\t\t\t// console.log('Send offer rid:'+rid+' mid: '+mid+'   sdp => ' + jsep.sdp);\r\n\t\t\t\t\t\tpc.sendOffer = true\r\n\t\t\t\t\t\tlet retry = 0\r\n\t\t\t\t\t\tlet subscribeCb = async () => {\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tconsole.log('subscribe request time:' + new Date().getTime() + ' retry: ' + retry);\r\n\t\t\t\t\t\t\t\tlet result = await this._protoo.request('subscribe', { rid, jsep, mid });\r\n\r\n\t\t\t\t\t\t\t\tconst minfo = this._ableSubStreamInfo.get(mid).minfo\r\n\t\t\t\t\t\t\t\tconst stream = new MediaStream();\r\n\t\t\t\t\t\t\t\tconst newStream = new Stream(mid, stream)\r\n\t\t\t\t\t\t\t\tnewStream.sfuid = result.sfuid\r\n\t\t\t\t\t\t\t\tnewStream.sid = result.sid\r\n\t\t\t\t\t\t\t\tnewStream.uid = uid;\r\n\t\t\t\t\t\t\t\tnewStream.minfo = minfo;\r\n\t\t\t\t\t\t\t\tthis._streams.set(mid, newStream);\r\n\t\t\t\t\t\t\t\tconsole.log('subscribe success => result(' + mid + ') sid: ' + result.sid + ' sdp => ' + result.jsep.sdp);\r\n\t\t\t\t\t\t\t\tawait pc.setRemoteDescription(result.jsep);\r\n\t\t\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\t\t\tconsole.log('subscribe request error  => ' + error);\r\n\t\t\t\t\t\t\t\tretry++;\r\n\t\t\t\t\t\t\t\tif (retry < 10) {\r\n\t\t\t\t\t\t\t\t\tsetTimeout(subscribeCb, 1000)\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tthis._streams.delete(mid)\r\n\t\t\t\t\t\t\t\t\treject(new RTCError(10312, \"SubFailedServerError\", error));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tsubscribeCb()\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.log('subscribe request error  => ' + error);\r\n\t\t\t\tthis._streams.delete(mid)\r\n\t\t\t\treject(new RTCError(10312, \"SubFailedServerError\", error));\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn promise;\r\n\t}\r\n\r\n\tasync unsubscribe(mid) {\r\n\t\tconsole.log('unsubscribe rid => %s, mid => %s ', this._rid, mid);\r\n\t\tif (!this._rid) {\r\n\t\t\treturn Promise.reject(new RTCError(10100, \"NotInRoom\"))\r\n\t\t}\r\n\t\ttry {\r\n\t\t\tconsole.log(\"unsubscribe - sfuid: \" + this._streams.get(mid).sfuid + \"sid: \" + this._streams.get(mid).sid)\r\n\t\t\tlet data = await this._protoo.request('unsubscribe', { rid: this._rid, mid, sid: this._streams.get(mid).sid, sfuid: this._streams.get(mid).sfuid });\r\n\t\t\tconsole.log('unsubscribe success: result => ' + JSON.stringify(data));\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log('unsubscribe reject: error =>' + error);\r\n\t\t\tif (!this._isIgnoreCancelError) {\r\n\t\t\t\treturn Promise.reject(new RTCError(10313, \"UnSubFailedServerError\", error))\r\n\t\t\t}\r\n\t\t} finally {\r\n\t\t\tthis._removePC(mid);\r\n\t\t}\r\n\t}\r\n\r\n\tasync broadcast(data) {\r\n\t\tconsole.log('broadcast rid => %s, data => %s', this._rid, data);\r\n\t\tif (!this._rid) {\r\n\t\t\treturn Promise.reject(new RTCError(10100, \"NotInRoom\"))\r\n\t\t}\r\n\t\ttry {\r\n\t\t\tlet data = await this._protoo.request('broadcast', { rid: this._rid, data });\r\n\t\t\tconsole.log('broadcast success: result => ' + JSON.stringify(data));\r\n\t\t\treturn data;\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log('broadcast reject: error =>' + error);\r\n\t\t\treturn Promise.reject(new RTCError(10314, \"BroadcastFailedServerError\", error))\r\n\t\t}\r\n\t}\r\n\r\n\tasync _keepalive() {\r\n\t\tconsole.log('keepalive rid => %s', this._rid);\r\n\t\tif (!this._rid) {\r\n\t\t\treturn Promise.reject(new RTCError(10100, \"NotInRoom\"))\r\n\t\t}\r\n\t\ttry {\r\n\t\t\tlet data = await this._protoo.request('keepalive', { rid: this._rid });\r\n\t\t\tconsole.log('keepalive success: result => ' + JSON.stringify(data));\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log('keepalive reject: error =>' + error);\r\n\t\t\tif (!this._isIgnoreCancelError) {\r\n\t\t\t\treturn Promise.reject(new RTCError(10315, \"KeepaliveServerError\", error))\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tasync close() {\r\n\t\tif (this._rid) {\r\n\t\t\tawait this.leave();\r\n\t\t\tthis._rid = null;\r\n\t\t}\r\n\t\tthis._protoo.close();\r\n\t}\r\n\r\n\t_payloadModify(desc, codec) {\r\n\r\n\t\tif (codec === undefined)\r\n\t\t\treturn desc;\r\n\r\n\t\t/*\r\n\t\t * DefaultPayloadTypePCMU = 0\r\n\t\t * DefaultPayloadTypePCMA = 8\r\n\t\t * DefaultPayloadTypeG722 = 9\r\n\t\t * DefaultPayloadTypeOpus = 111\r\n\t\t * DefaultPayloadTypeVP8  = 96\r\n\t\t * DefaultPayloadTypeVP9  = 98\r\n\t\t * DefaultPayloadTypeH264 = 102\r\n\t\t*/\r\n\t\tlet payload;\r\n\t\tlet codeName = '';\r\n\t\tconst session = sdpTransform.parse(desc.sdp);\r\n\t\tconsole.log('SDP object => %o', session);\r\n\t\tvar videoIdx = -1;\r\n\t\tsession['media'].map((m, index) => {\r\n\t\t\tif (m.type == 'video') {\r\n\t\t\t\tvideoIdx = index;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif (videoIdx == -1) return desc;\r\n\r\n\t\tif (codec.toLowerCase() === 'vp8') {\r\n\t\t\tpayload = DefaultPayloadTypeVP8;\r\n\t\t\tcodeName = \"VP8\";\r\n\t\t} else if (codec.toLowerCase() === 'vp9') {\r\n\t\t\tpayload = DefaultPayloadTypeVP9;\r\n\t\t\tcodeName = \"VP9\";\r\n\t\t} else if (codec.toLowerCase() === 'h264') {\r\n\t\t\tpayload = DefaultPayloadTypeH264;\r\n\t\t\tcodeName = \"H264\";\r\n\t\t} else {\r\n\t\t\treturn desc;\r\n\t\t}\r\n\r\n\t\tconsole.log('Setup codec => ' + codeName + ', payload => ' + payload);\r\n\r\n\t\tvar rtp = [\r\n\t\t\t{ \"payload\": payload, \"codec\": codeName, \"rate\": 90000, \"encoding\": null },\r\n\t\t\t{ \"payload\": 97, \"codec\": \"rtx\", \"rate\": 90000, \"encoding\": null }\r\n\t\t];\r\n\r\n\t\tsession['media'][videoIdx][\"payloads\"] = payload + \" 97\";\r\n\t\tsession['media'][videoIdx][\"rtp\"] = rtp;\r\n\r\n\t\tvar fmtp = [\r\n\t\t\t{ \"payload\": 97, \"config\": \"apt=\" + payload }\r\n\t\t];\r\n\r\n\t\tsession['media'][videoIdx][\"fmtp\"] = fmtp;\r\n\r\n\t\tvar rtcpFB = [\r\n\t\t\t{ \"payload\": payload, \"type\": \"transport-cc\", \"subtype\": null },\r\n\t\t\t{ \"payload\": payload, \"type\": \"ccm\", \"subtype\": \"fir\" },\r\n\t\t\t{ \"payload\": payload, \"type\": \"nack\", \"subtype\": null },\r\n\t\t\t{ \"payload\": payload, \"type\": \"nack\", \"subtype\": \"pli\" }\r\n\t\t];\r\n\t\tsession['media'][videoIdx][\"rtcpFb\"] = rtcpFB;\r\n\r\n\t\tlet tmp = desc;\r\n\t\ttmp.sdp = sdpTransform.write(session);\r\n\t\treturn tmp;\r\n\t}\r\n\r\n\tasync _createSender(stream, codec) {\r\n\t\tconsole.log('create sender => %s', codec);\r\n\t\tlet pc = new RTCPeerConnection({ iceServers: [{ urls: ices }] });\r\n\t\tpc.sendOffer = false;\r\n\t\tstream.getTracks().forEach(track => {\r\n\t\t\tpc.addTrack(track, stream)\r\n\t\t})\r\n\t\t// pc.addStream(stream);\r\n\t\tlet offer = await\r\n\t\t\tpc.createOffer({ offerToReceiveVideo: false, offerToReceiveAudio: false });\r\n\t\tlet desc = this._payloadModify(offer, codec);\r\n\t\tpc.setLocalDescription(desc);\r\n\t\treturn pc;\r\n\t}\r\n\r\n\tasync _createReceiver(mid) {\r\n\t\tconsole.log('create receiver => mid :%s', mid);\r\n\t\tlet pc = new RTCPeerConnection({ iceServers: [{ urls: ices }] });\r\n\t\tpc.sendOffer = false;\r\n\t\tpc.addTransceiver('audio', { 'direction': 'recvonly' });\r\n\t\tpc.addTransceiver('video', { 'direction': 'recvonly' });\r\n\t\tlet desc = await pc.createOffer();\r\n\t\tdesc.sdp = this._modifyCodec(desc.sdp)\r\n\t\tpc.setLocalDescription(desc);\r\n\t\tthis._pcs.set(mid, pc);\r\n\t\treturn pc;\r\n\t}\r\n\r\n\t_modifyCodec(sdp) {\r\n\t\t// 为了适配服务器只支持VP8编码\r\n\t\tlet firstCodecFlags = 'a=rtpmap:96 ';\r\n\t\tlet beginPos = sdp.indexOf(firstCodecFlags);\r\n\t\tlet codecBegin = beginPos + firstCodecFlags.length;\r\n\t\tlet codecEnd = sdp.slice(codecBegin).indexOf('/') + codecBegin;\r\n\t\tconst codecStr = sdp.slice(codecBegin, codecEnd);\r\n\t\tif (codecStr.toLowerCase() != 'vp8') {\r\n\t\t\tlet newSdp = sdp.slice(0, codecBegin) + 'VP8' + sdp.slice(codecEnd)\r\n\t\t\treturn newSdp;\r\n\t\t}else{\r\n\t\t\treturn sdp;\r\n\t\t}\r\n\t}\r\n\r\n\t_removePC(mid) {\r\n\t\tlet pc = this._pcs.get(mid);\r\n\t\tif (pc) {\r\n\t\t\tconsole.log('remove pc mid => %s', mid);\r\n\t\t\tif (this._streams.has(mid)) {\r\n\t\t\t\tthis._streams.delete(mid);\r\n\t\t\t} else {\r\n\t\t\t\tlet type = null;\r\n\t\t\t\tfor (const [key, value] of this._publishStreams) {\r\n\t\t\t\t\tif (value.mid == mid) {\r\n\t\t\t\t\t\ttype = key\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (type) {\r\n\t\t\t\t\tthis._publishStreams.delete(type);\r\n\t\t\t\t\tconsole.log(\"delete: mid: \" + mid)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tpc.close();\r\n\t\t\tthis._pcs.delete(mid);\r\n\t\t}\r\n\t}\r\n\r\n\t_getProtooUrl(pid) {\r\n\t\t// const hostname = window.location.hostname;\r\n\t\t// let url = `ws://${this._hostname}:${this._port}/ws?peer=${pid}`;\r\n\t\t// 81.69.253.187\r\n\t\tlet proto = 'ws';\r\n\t\tif (this._useWSS) {\r\n\t\t\tproto = 'wss'\r\n\t\t}\r\n\t\tlet url = `${proto}://${this._hostname}:${this._port}/ws?peer=${pid}`;\r\n\t\treturn url;\r\n\t}\r\n\r\n\t_handleRequest(request, accept, reject) {\r\n\t\tconsole.log('Handle request from server: [method:%s, data:%o]', request.method, request.data);\r\n\t}\r\n\r\n\t_handleNotification(notification) {\r\n\t\tconst { method, data } = notification;\r\n\t\tconsole.log('Handle notification from server: [method:%s, data:%o]', method, data);\r\n\t\tswitch (method) {\r\n\t\t\tcase 'peer-join':\r\n\t\t\t\t{\r\n\t\t\t\t\tconst { rid, uid, bizid } = data;\r\n\t\t\t\t\tconsole.log('peer-join peer rid => %s, uid => %s, bizid => %o', rid, uid, bizid);\r\n\t\t\t\t\tthis.emit('peer-join', rid, uid, bizid);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\tcase 'peer-leave':\r\n\t\t\t\t{\r\n\t\t\t\t\tconst { rid, uid } = data;\r\n\t\t\t\t\tconsole.log('peer-leave peer rid => %s, uid => %s', rid, uid);\r\n\t\t\t\t\tthis.emit('peer-leave', rid, uid);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\tcase 'stream-add':\r\n\t\t\t\t{\r\n\t\t\t\t\tconst { rid, uid, mid, sfuid, minfo } = data;\r\n\t\t\t\t\tconsole.log('stream-add peer rid => %s, mid => %s', rid, mid);\r\n\t\t\t\t\tthis._ableSubStreamInfo.set(mid, { rid, uid, mid, sfuid, minfo })\r\n\t\t\t\t\tthis.emit('stream-add', rid, uid, mid, sfuid, minfo);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\tcase 'stream-remove':\r\n\t\t\t\t{\r\n\t\t\t\t\tconst { rid, uid, mid } = data;\r\n\t\t\t\t\tconsole.log('stream-remove peer rid => %s, uid =>%s ,mid => %s', rid, uid, mid);\r\n\t\t\t\t\tif (this._ableSubStreamInfo.has(mid)) {\r\n\t\t\t\t\t\tthis._ableSubStreamInfo.delete(mid)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.emit('stream-remove', rid, uid, mid);\r\n\t\t\t\t\tthis.unsubscribe(mid)\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\tcase 'broadcast':\r\n\t\t\t\t{\r\n\t\t\t\t\tconst { rid, uid, data } = data;\r\n\t\t\t\t\tconsole.log('stream-remove peer rid => %s, uid => %s', rid, uid);\r\n\t\t\t\t\tthis.emit('broadcast', rid, uid, data);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n"],"sourceRoot":""}